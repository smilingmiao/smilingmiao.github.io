<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>smilingmiao</title>
  
  
  <link href="https://github.com/smilingmiao/atom.xml" rel="self"/>
  
  <link href="https://github.com/smilingmiao/"/>
  <updated>2022-08-21T05:18:52.395Z</updated>
  <id>https://github.com/smilingmiao/</id>
  
  <author>
    <name>smilingmiao</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>YouTube ç›¸å…³æ•´ç†å¤‡å¿˜</title>
    <link href="https://github.com/smilingmiao/2022/08/21/YouTube-and-Related/"/>
    <id>https://github.com/smilingmiao/2022/08/21/YouTube-and-Related/</id>
    <published>2022-08-21T04:37:25.000Z</published>
    <updated>2022-08-21T05:18:52.395Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸‹è½½éŸ³è§†é¢‘ï¼ˆåŠå­—å¹•ï¼‰"><a href="#ä¸‹è½½éŸ³è§†é¢‘ï¼ˆåŠå­—å¹•ï¼‰" class="headerlink" title="ä¸‹è½½éŸ³è§†é¢‘ï¼ˆåŠå­—å¹•ï¼‰"></a>ä¸‹è½½éŸ³è§†é¢‘ï¼ˆåŠå­—å¹•ï¼‰</h2><h3 id="ä¸‹è½½æœ€ä¼˜è§†é¢‘"><a href="#ä¸‹è½½æœ€ä¼˜è§†é¢‘" class="headerlink" title="ä¸‹è½½æœ€ä¼˜è§†é¢‘"></a>ä¸‹è½½æœ€ä¼˜è§†é¢‘</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">youtube-dl video_URL</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å¯é€‰çš„è§†ã€éŸ³é¢‘æ ¼å¼"><a href="#æŸ¥çœ‹å¯é€‰çš„è§†ã€éŸ³é¢‘æ ¼å¼" class="headerlink" title="æŸ¥çœ‹å¯é€‰çš„è§†ã€éŸ³é¢‘æ ¼å¼"></a>æŸ¥çœ‹å¯é€‰çš„è§†ã€éŸ³é¢‘æ ¼å¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">youtube-dl -F video_URL</span><br></pre></td></tr></table></figure><p>å„é€‰é¡¹ç¬¬ä¸€åˆ—ä»£è¡¨æ–¹æ¡ˆ ID</p><h4 id="ç»„åˆæ–¹æ¡ˆè¿›è¡Œä¸‹è½½"><a href="#ç»„åˆæ–¹æ¡ˆè¿›è¡Œä¸‹è½½" class="headerlink" title="ç»„åˆæ–¹æ¡ˆè¿›è¡Œä¸‹è½½"></a>ç»„åˆæ–¹æ¡ˆè¿›è¡Œä¸‹è½½</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># å•ç‹¬</span><br><span class="line">youtube-dl -f 100 video_URL</span><br><span class="line"></span><br><span class="line"># ç»„åˆ</span><br><span class="line">youtube-dl -f 100+200 video_URL</span><br><span class="line"></span><br><span class="line"># å­—å¹•</span><br><span class="line">`â€”write-sub`ï¼šå†™å…¥å­—å¹•ï¼Œå³æŠŠå­—å¹•ä¸‹è½½ã€‚  </span><br><span class="line">`--sub-format`ï¼šæŒ‡å®šå­—å¹•æ ¼å¼ï¼ŒæŒ‰é¡ºåºé€‰ï¼Œä¸å­˜åœ¨åˆ™é€‰ä¸‹ä¸€ä¸ªã€‚  </span><br><span class="line">`--convert-subs`ï¼š è½¬æ¢å­—å¹•ï¼Œæ ¼å¼æœ‰é™åˆ¶ï¼Œé€šç”¨ä¸º srt ï¼›è‹¥ä¸è½¬ï¼ŒæŸäº›å­—å¹•å¯èƒ½æ˜¯ .vtt çš„ï¼›å¦‚æœæœ‰ ass å­—å¹•å¯ä¸‹è½½ï¼Œåˆ™æ— é¡»åŠ æ­¤é¡¹ã€‚</span><br><span class="line"></span><br><span class="line">youtube-dl --write-sub --sub-format &quot;ass/srt/best&quot; --convert-subs &quot;srt&quot; &quot;video_url&quot;</span><br></pre></td></tr></table></figure><h4 id="Download-only-audio-with-youtube-dl"><a href="#Download-only-audio-with-youtube-dl" class="headerlink" title="Download only audio with youtube-dl"></a>Download only audio with youtube-dl</h4><blockquote><p>If you only want to download audio from a YouTube video, you can use the -x option with youtube-dl. This extract-audio option converts the video files to audio-only files.</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">youtube-dl -x video_URL</span><br></pre></td></tr></table></figure><p>Example ğŸ‘‡ğŸ»</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">youtube-dl -x https://www.youtube.com/watch?v=m_PmLG7HqbQ</span><br><span class="line">[youtube] m_PmLG7HqbQ: Downloading webpage</span><br><span class="line">[download] Destination: Zorin OS 16 Review - It&#x27;s a Visual Masterpiece-m_PmLG7HqbQ.m4a</span><br><span class="line">[download] 100% of 4.26MiB in 00:03</span><br><span class="line">[ffmpeg] Correcting container in &quot;Zorin OS 16 Review - It&#x27;s a Visual Masterpiece-m_PmLG7HqbQ.m4a&quot;</span><br><span class="line">[ffmpeg] Post-process file Zorin OS 16 Review - It&#x27;s a Visual Masterpiece-m_PmLG7HqbQ.m4a exists, skipping</span><br></pre></td></tr></table></figure><p>Did you notice the audio format? It is in .m4a format. You may specify the audio format to something of your choice.</p><p>Say you want to extract the audio in MP3 format. You can use it like this: ğŸ‘‡ğŸ»</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">youtube-dl -x --audio-format mp3 video_URL</span><br></pre></td></tr></table></figure><h4 id="Download-entire-YouTube-playlist-in-MP3-format"><a href="#Download-entire-YouTube-playlist-in-MP3-format" class="headerlink" title="Download entire YouTube playlist in MP3 format"></a>Download entire YouTube playlist in MP3 format</h4><p>Yes, you can totally do that. The main thing is to get the URL of the playlist here. It is typically in the following format:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.youtube.com/playlist?list=XXXXXXXXXXXXXXXXXXX</span><br></pre></td></tr></table></figure><p>Now that you have the playlist URL, you can use it to download the audio files in MP3 format in the following fashion:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">youtube-dl --extract-audio --audio-format mp3 -o &quot;%(title)s.%(ext)s&quot; playlist_URL</span><br></pre></td></tr></table></figure><p>That scary looking -o â€œ%(title)s.%(ext)sâ€ specifies the output file (with option -o) and instructs it to use the title of the video and the extension (mp3 in this case) for naming the audio files.</p><h2 id="ä¸‹è½½å­—å¹•"><a href="#ä¸‹è½½å­—å¹•" class="headerlink" title="ä¸‹è½½å­—å¹•"></a>ä¸‹è½½å­—å¹•</h2><p>é€šè¿‡ç½‘ç«™ <a href="https://downsub.com/">ä¸‹è½½</a></p><h1 id="å¼•ç”¨é“¾æ¥"><a href="#å¼•ç”¨é“¾æ¥" class="headerlink" title="å¼•ç”¨é“¾æ¥"></a>å¼•ç”¨é“¾æ¥</h1><p><a href="https://ylface.com/course/744.html">youtube-dlå®‰è£…åŠç®€å•ä½¿ç”¨æ•™ç¨‹</a><br><a href="https://itsfoss.com/youtube-dl-audio-only/">How to Download Audio Only Using youtube-dl</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸‹è½½éŸ³è§†é¢‘ï¼ˆåŠå­—å¹•ï¼‰&quot;&gt;&lt;a href=&quot;#ä¸‹è½½éŸ³è§†é¢‘ï¼ˆåŠå­—å¹•ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ä¸‹è½½éŸ³è§†é¢‘ï¼ˆåŠå­—å¹•ï¼‰&quot;&gt;&lt;/a&gt;ä¸‹è½½éŸ³è§†é¢‘ï¼ˆåŠå­—å¹•ï¼‰&lt;/h2&gt;&lt;h3 id=&quot;ä¸‹è½½æœ€ä¼˜è§†é¢‘&quot;&gt;&lt;a href=&quot;#ä¸‹è½½æœ€ä¼˜è§†é¢‘&quot; class=&quot;</summary>
      
    
    
    
    <category term="å·¥å…·" scheme="https://github.com/smilingmiao/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="å·¥å…·" scheme="https://github.com/smilingmiao/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>å›¾å½¢å­¦æ•°å­¦åŸºç¡€çŸ¥è¯†</title>
    <link href="https://github.com/smilingmiao/2020/06/28/graphic-math-basics/"/>
    <id>https://github.com/smilingmiao/2020/06/28/graphic-math-basics/</id>
    <published>2020-06-27T16:57:27.000Z</published>
    <updated>2020-07-08T23:55:26.000Z</updated>
    
    <content type="html"><![CDATA[<h5 id="ä»æ­£ä½™å¼¦ä¸‰è§’å‡½æ•°å¼€å§‹"><a href="#ä»æ­£ä½™å¼¦ä¸‰è§’å‡½æ•°å¼€å§‹" class="headerlink" title="ä»æ­£ä½™å¼¦ä¸‰è§’å‡½æ•°å¼€å§‹"></a>ä»æ­£ä½™å¼¦ä¸‰è§’å‡½æ•°å¼€å§‹</h5><p><del>è¾›è¾›è‹¦è‹¦å†™äº†ä¸¤å°æ—¶å…¬å¼ï¼Œtypora ä¸Šæ˜¯æ”¯æŒçš„å•Šï¼Œæ€ä¹ˆç½‘é¡µä¸æ”¯æŒã€‚</del></p><p>å‡ ä¸ªä¸‰è§’å‡½æ•°å…¬å¼</p><img src="/2020/06/28/graphic-math-basics/1.png" class=""><p>here we go!</p><img src="/2020/06/28/graphic-math-basics/coordinate.png" class=""><p>å¦‚å›¾æ‰€ç¤ºï¼Œå¯å¾—</p><img src="/2020/06/28/graphic-math-basics/2.png" class=""><p>ç»“åˆä¸Šé¢çš„ä¸‰è§’å‡½æ•°å…¬å¼æ±‚è§£å¾—å‡ºï¼š</p><img src="/2020/06/28/graphic-math-basics/3.png" class=""><p>ç”±æ­¤å¯å¾—çŸ©é˜µ</p><img src="/2020/06/28/graphic-math-basics/4.png" class=""><p>å‡‘ä¸ºé½æ¬¡åæ ‡</p><img src="/2020/06/28/graphic-math-basics/5.png" class=""><p>ç±»æ¯”åˆ°ä¸‰ç»´ä¸‹ï¼Œä¸Šé¢çš„çŸ©é˜µç¨åŠ ä¿®æ”¹å³å¯ä»£è¡¨ XOY ç»„æˆçš„å¹³é¢ç»• <strong>Z</strong> è½´è¿›è¡Œæ—‹è½¬çš„æƒ…å†µï¼Œç”±äºç»• <strong>Z</strong> è½´æ—‹è½¬ï¼Œå› æ­¤ Zâ€™ &#x3D; Zï¼Œå¯å¾—ï¼š</p><img src="/2020/06/28/graphic-math-basics/6.png" class=""><p>å¯å¾—é½æ¬¡åæ ‡ä¸‹çš„çŸ©é˜µ</p><img src="/2020/06/28/graphic-math-basics/7.png" class=""><blockquote><p>å¯è§ï¼Œåœ¨ä¸‰ç»´ç©ºé—´ä¸­ï¼Œç»• Z è½´æ—‹è½¬çš„å†³å®šå› å­åœ¨ä½ç½®ã€0ã€‘ã€1ã€‘ã€4ã€‘ã€5ã€‘ï¼ˆè¡Œä¸ºä¸»ï¼Œå¹¶ä¸”ä»¥ 0 ä¸ºèµ·å§‹ä½ç½®ï¼‰</p></blockquote><p>æˆ‘ä»¬å‘ç°ï¼Œä¸Šé¢çš„çŸ©é˜µç¨åŠ å˜å‹å³å¯è¡¨ç¤º YOZ å¹³é¢ç»• <strong>X</strong> è½´è¿›è¡Œçš„æ—‹è½¬ï¼Œå¯å¾—ï¼š</p><img src="/2020/06/28/graphic-math-basics/8.png" class=""><p>å¯å¾—é½æ¬¡åæ ‡ä¸‹çš„çŸ©é˜µ</p><img src="/2020/06/28/graphic-math-basics/9.png" class=""><blockquote><p>å¯è§ï¼Œåœ¨ä¸‰ç»´ç©ºé—´ä¸­ï¼Œç»• Z è½´æ—‹è½¬çš„å†³å®šå› å­åœ¨ä½ç½®ã€5ã€‘ã€6ã€‘ã€9ã€‘ã€10ã€‘ï¼ˆè¡Œä¸ºä¸»ï¼Œå¹¶ä¸”ä»¥ 0 ä¸ºèµ·å§‹ä½ç½®ï¼‰</p></blockquote><p>æ ¹æ®æ³•å‘é‡éµå¾ªçš„å³æ‰‹å®šåˆ™ï¼Œç»“åˆ XOY å¹³é¢ã€YOZ å¹³é¢éƒ½æ—‹è½¬å®Œäº†ï¼Œç°åœ¨å°±å‰© ZOX å¹³é¢äº†ã€‚ZOX ç»• <strong>Y</strong> è½´æ—‹è½¬ï¼Œé‚£ä¹ˆç±»æ¯” YOZ å¹³é¢æ—‹è½¬çš„æƒ…å†µï¼Œåœ¨ ZOX ä¸­ï¼Œ1ï¼‰Z ç›¸å½“äº YOZ ä¸­çš„ Yï¼›2ï¼‰X ç›¸å½“äº YOZ ä¸­çš„ Zï¼›</p><img src="/2020/06/28/graphic-math-basics/10.png" class=""><p>å¯å¾—é½æ¬¡åæ ‡ä¸‹çš„çŸ©é˜µ</p><img src="/2020/06/28/graphic-math-basics/11.png" class=""><blockquote><p>å¯è§ï¼Œåœ¨ä¸‰ç»´ç©ºé—´ä¸­ï¼Œç»• Z è½´æ—‹è½¬çš„å†³å®šå› å­åœ¨ä½ç½®ã€0ã€‘ã€2ã€‘ã€8ã€‘ã€10ã€‘ï¼ˆè¡Œä¸ºä¸»ï¼Œå¹¶ä¸”ä»¥ 0 ä¸ºèµ·å§‹ä½ç½®ï¼‰</p></blockquote><p>æ ¹æ®ä¸Šé¢çš„ç»“æœï¼Œç»• Xã€Yã€Z åˆ†åˆ«æ—‹è½¬çš„çŸ©é˜µå¦‚ä¸‹ï¼š</p><img src="/2020/06/28/graphic-math-basics/12.png" class=""><p>ç”±äºçŸ©é˜µä¹˜æ³•ä¸æ»¡è¶³äº¤æ¢å¾‹ï¼Œå¦‚æœè¦ç”¨ R è¡¨ç¤ºå°†çŸ©é˜µæŒ‰é¡ºåºåˆ†åˆ«ç»• Xã€Yã€Z è¿›è¡Œä¸€å®šçš„æ—‹è½¬çš„è¯ï¼Œç”±äºè®¡ç®—æœºæ˜¯ä»å³å¾€å·¦è®¡ç®—çš„ï¼Œæ‰€ä»¥</p><img src="/2020/06/28/graphic-math-basics/13.png" class=""><p>è®¡ç®—ç»“æœï¼š</p><img src="/2020/06/28/graphic-math-basics/14.png" class=""><p>æ›´æ–°ï¼š2020-07-09</p><p>è¡¥å……ï¼šåœ¨å·²çŸ¥è½´å’Œæ—‹è½¬è§’çš„æƒ…å†µä¸‹ï¼Œè¡¨ç¤ºæ—‹è½¬åçš„ <strong><a href="https://en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle">è½´å’Œè§’çš„æ—‹è½¬çŸ©é˜µ</a></strong></p><p>çŸ©é˜µå…¬å¼å¦‚ä¸‹ï¼š</p><img src="/2020/06/28/graphic-math-basics/axis_and_angle.png" class=""><p>å›¾æ¥è‡ª <a href="https://wikimedia.org/api/rest_v1/media/math/render/svg/f259f80a746ee20d481f9b7f600031084358a27c">ç»´åŸºç™¾ç§‘</a></p><h5 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h5><p><a href="https://math.stackexchange.com/questions/2992347/rotation-matrix-if-x-y-z-the-angles-through-which-x-y-and-z-axis-have-been-rota">https://math.stackexchange.com/questions/2992347/rotation-matrix-if-x-y-z-the-angles-through-which-x-y-and-z-axis-have-been-rota</a></p><p><a href="https://blog.csdn.net/csxiaoshui/article/details/65446125">https://blog.csdn.net/csxiaoshui/article/details/65446125</a></p><p><a href="https://en.wikipedia.org/wiki/Rotation_matrix">https://en.wikipedia.org/wiki/Rotation_matrix</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h5 id=&quot;ä»æ­£ä½™å¼¦ä¸‰è§’å‡½æ•°å¼€å§‹&quot;&gt;&lt;a href=&quot;#ä»æ­£ä½™å¼¦ä¸‰è§’å‡½æ•°å¼€å§‹&quot; class=&quot;headerlink&quot; title=&quot;ä»æ­£ä½™å¼¦ä¸‰è§’å‡½æ•°å¼€å§‹&quot;&gt;&lt;/a&gt;ä»æ­£ä½™å¼¦ä¸‰è§’å‡½æ•°å¼€å§‹&lt;/h5&gt;&lt;p&gt;&lt;del&gt;è¾›è¾›è‹¦è‹¦å†™äº†ä¸¤å°æ—¶å…¬å¼ï¼Œtypora ä¸Šæ˜¯æ”¯æŒçš„å•Šï¼Œæ€ä¹ˆç½‘é¡µä¸æ”¯æŒ</summary>
      
    
    
    
    <category term="å›¾å½¢å­¦" scheme="https://github.com/smilingmiao/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
    <category term="å›¾å½¢å­¦" scheme="https://github.com/smilingmiao/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Automator è§£å†³é—®é¢˜</title>
    <link href="https://github.com/smilingmiao/2020/05/31/use-automator-solve-problems/"/>
    <id>https://github.com/smilingmiao/2020/05/31/use-automator-solve-problems/</id>
    <published>2020-05-30T16:00:00.000Z</published>
    <updated>2020-05-31T15:25:27.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="è¦è§£å†³çš„é—®é¢˜ï¼š"><a href="#è¦è§£å†³çš„é—®é¢˜ï¼š" class="headerlink" title="è¦è§£å†³çš„é—®é¢˜ï¼š"></a>è¦è§£å†³çš„é—®é¢˜ï¼š</h4><p>å¹³æ—¶ç”¨ <strong>Markdown</strong> å†™å­—éœ€è¦ç»™ä¸€äº›å­—åŠ <font size=3 color=#CF443A>é¢œè‰²</font>ï¼Œæˆ–è€…**<font size=3 color=#CF443A>æ—¢åŠ ç²—åˆåŠ é¢œè‰²</font>**ã€‚</p><h4 id="åˆ†æé—®é¢˜"><a href="#åˆ†æé—®é¢˜" class="headerlink" title="åˆ†æé—®é¢˜"></a>åˆ†æé—®é¢˜</h4><p>è¦æŠŠã€Œæ–‡å­—ã€å˜æˆã€Œ<font size=3 color=#CF443A>æ–‡å­—</font>ã€ï¼Œåªè¦æŠŠã€Œæ–‡å­—ã€å˜æˆ <code>&lt;font size=3 color=#CF443A&gt;</code> <code>æ–‡å­—</code> <code>&lt;/font&gt;</code> ä¸‰éƒ¨åˆ†ç»„åˆèµ·æ¥å°±è¡Œã€‚</p><span id="more"></span><h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><p>ä½¿ç”¨ <strong><font size=3 color=#CF443A>Automator</font></strong> å°†é€‰ä¸­çš„æ–‡æœ¬æ›¿æ¢ä¸ºåŠ  HTML æ ‡ç­¾æ ¼å¼çš„æ–‡æœ¬è¿”å›ã€‚</p><p><strong>ç¬¬ä¸€æ­¥</strong>ï¼šæ‰“å¼€ Automator å¹¶é€‰å–ã€Œå¿«é€Ÿæ“ä½œã€</p><ul><li><input checked="" disabled="" type="checkbox"> ã€Œå·¥ä½œæµç¨‹æ”¶åˆ°å½“å‰ã€é€‰å–ã€Œæ–‡æœ¬ã€</li><li><input checked="" disabled="" type="checkbox"> ã€Œä½äºã€é€‰æ‹©ã€Œè®¿è¾¾.appã€</li><li><input checked="" disabled="" type="checkbox"> å‹¾é€‰ã€Œç”¨è¾“å‡ºå†…å®¹æ›¿æ¢æ‰€é€‰æ–‡æœ¬ã€</li></ul><p><strong>ç¬¬äºŒæ­¥</strong>ï¼šåœ¨å·¦ä¾§èœå•æ é¡¶éƒ¨æœç´¢æ¡†é‡Œè¾“å…¥ã€Œapple scriptã€ï¼Œå°†æœç´¢ç»“æœã€Œè¿è¡Œ Apple Scriptã€æ‹–å…¥å³ä¾§éœ€è¦çš„ä½ç½®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">on run &#123;input&#125;</span><br><span class="line"></span><br><span class="line">tell application &quot;System Events&quot;</span><br><span class="line">try</span><br><span class="line">set the clipboard to &quot;&quot; -- æ¸…ç©ºå‰ªè´´æ¿</span><br><span class="line">on error err_message</span><br><span class="line">display dialog err_message</span><br><span class="line">end try</span><br><span class="line">end tell</span><br><span class="line"></span><br><span class="line">set output to &quot;&lt;font size=3 color=#CF443A&gt;&quot; &amp; input &amp; &quot;&lt;/font&gt;&quot; -- ç»™è¾“å…¥çš„æ–‡å­—å‰ååŠ æ ‡ç­¾</span><br><span class="line"></span><br><span class="line">return output -- è¿”å›è¾“å‡ºç»“æœ</span><br><span class="line"></span><br><span class="line">end run</span><br></pre></td></tr></table></figure><blockquote><p>å…¶å®èƒ½åšçš„äº‹æƒ…è¿œè¿œä¸æ­¢è¿™äº›ï¼Œè€Œä¸”ä¸Šé¢ä¸æ­¢èƒ½ä½¿ç”¨ Apple Scriptï¼Œè¿˜èƒ½ä½¿ç”¨ Shellã€JavaScript ç­‰ã€‚</p></blockquote><p>ç¬¬ä¸‰æ­¥ï¼šä¿å­˜ã€‚æ¯”å¦‚ä¿å­˜æˆåä¸º <code>color-to-red</code>ã€‚</p><p>ç¬¬å››æ­¥ï¼šåœ¨ä»»æ„ç¼–è¾‘å™¨ä¸­ï¼Œé€‰ä¸­ä¸€äº›æ–‡å­—ï¼Œå³é”® - æœåŠ¡ - <code>color-to-red</code>ã€‚æ­¤æ—¶æ–‡å­—åº”è¯¥å·²ç»å˜æˆæƒ³è¦çš„é¢œè‰²äº†ã€‚</p><p><strong>æ”¹è¿›ä¸€ä¸‹</strong>ï¼šå…¶å®ä¸Šé¢ç¬¬å››æ­¥è¿™æ ·æŒºéº»çƒ¦çš„ï¼Œæ“ä½œä¸€ä¸‹è¦ç‚¹ä¸‰æ¬¡é¼ æ ‡ï¼Œå¦‚æœæ¢æˆå¿«æ·é”®å°±å¥½äº†ã€‚</p><blockquote><p>æ‰“å¼€è®¾ç½® - é”®ç›˜ - å¿«æ·é”® - æœåŠ¡ï¼Œæ‰¾åˆ° <code>color-to-red</code> ï¼Œç„¶åå½•å…¥å¯¹åº”çš„å¿«æ·é”®ã€‚è¿™æ ·åœ¨ç¼–è¾‘å™¨é‡Œé€‰ä¸­æ–‡å­—ï¼ŒæŒ‰å¿«æ·é”®å°±æå®šäº†ã€‚</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h4 id=&quot;è¦è§£å†³çš„é—®é¢˜ï¼š&quot;&gt;&lt;a href=&quot;#è¦è§£å†³çš„é—®é¢˜ï¼š&quot; class=&quot;headerlink&quot; title=&quot;è¦è§£å†³çš„é—®é¢˜ï¼š&quot;&gt;&lt;/a&gt;è¦è§£å†³çš„é—®é¢˜ï¼š&lt;/h4&gt;&lt;p&gt;å¹³æ—¶ç”¨ &lt;strong&gt;Markdown&lt;/strong&gt; å†™å­—éœ€è¦ç»™ä¸€äº›å­—åŠ &lt;font size=3 color=#CF443A&gt;é¢œè‰²&lt;/font&gt;ï¼Œæˆ–è€…**&lt;font size=3 color=#CF443A&gt;æ—¢åŠ ç²—åˆåŠ é¢œè‰²&lt;/font&gt;**ã€‚&lt;/p&gt;
&lt;h4 id=&quot;åˆ†æé—®é¢˜&quot;&gt;&lt;a href=&quot;#åˆ†æé—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;åˆ†æé—®é¢˜&quot;&gt;&lt;/a&gt;åˆ†æé—®é¢˜&lt;/h4&gt;&lt;p&gt;è¦æŠŠã€Œæ–‡å­—ã€å˜æˆã€Œ&lt;font size=3 color=#CF443A&gt;æ–‡å­—&lt;/font&gt;ã€ï¼Œåªè¦æŠŠã€Œæ–‡å­—ã€å˜æˆ &lt;code&gt;&amp;lt;font size=3 color=#CF443A&amp;gt;&lt;/code&gt; &lt;code&gt;æ–‡å­—&lt;/code&gt; &lt;code&gt;&amp;lt;/font&amp;gt;&lt;/code&gt; ä¸‰éƒ¨åˆ†ç»„åˆèµ·æ¥å°±è¡Œã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="éšæ‰‹ç¬”è®°" scheme="https://github.com/smilingmiao/tags/%E9%9A%8F%E6%89%8B%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€äº›åŸºç¡€å¤§æ‚æ±‡</title>
    <link href="https://github.com/smilingmiao/2020/04/04/mess-basics/"/>
    <id>https://github.com/smilingmiao/2020/04/04/mess-basics/</id>
    <published>2020-04-04T12:42:19.000Z</published>
    <updated>2020-06-27T17:27:43.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h4><p>ä½œä¸ºä¸€åç¨‹åºå‘˜ï¼Œæ€»æ˜¯ç»•ä¸å¼€è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä»Šå¤©ç¨å¾®æ€»ç»“ä¸€ç‚¹ã€‚</p><p>ä» &#x2F;etc è¯´èµ·ï¼Œè¿™é‡Œçš„ etc ä¸æ˜¯ç¼©å†™ï¼Œæ˜¯abbr. ç­‰ç­‰ï¼ŒåŠå…¶ä»– (et cetera) çš„æ„æ€ã€‚</p><p>æ‰§è¡Œ <code>cat /etc/paths</code> å‘½ä»¤å¯ä»¥çœ‹åˆ°å„ç§å‘½ä»¤çš„è„šæœ¬å­˜æ”¾æ–‡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ cat /etc/paths</span><br><span class="line">/usr/local/bin</span><br><span class="line">/usr/bin</span><br><span class="line">/bin</span><br><span class="line">/usr/sbin</span><br><span class="line">/sbin</span><br></pre></td></tr></table></figure><blockquote><p>usr æ˜¯ Unix System Resource çš„ç¼©å†™</p></blockquote><span id="more"></span><p>ä¾‹å¦‚ï¼Œæ‰§è¡Œä¸€ä¸‹ <code>ls /bin/</code>ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„å¾ˆå¤šå‘½ä»¤éƒ½é‡Œé¢ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ ls /bin</span><br><span class="line">[         csh       echo      ksh       mkdir     rm        sync      zsh</span><br><span class="line">bash      dash      ed        launchctl mv        rmdir     tcsh</span><br><span class="line">cat       date      expr      link      pax       sh        test</span><br><span class="line">chmod     dd        hostname  ln        ps        sleep     unlink</span><br><span class="line">cp        df        kill      ls        pwd       stty      wait4path</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä¾æ¬¡æ‰§è¡Œ <code>ls /sbin</code>ï¼Œ<code>ls /usr/bin</code>ï¼Œ<code>ls /usr/sbin</code> ä»¥åŠ <code>ls /usr/local/bin</code> æŸ¥çœ‹å„ä¸ªè·¯å¾„ä¸‹çš„å‘½ä»¤è„šæœ¬æ–‡ä»¶ï¼Œä¸å†èµ˜è¿°ã€‚</p><p><strong>PATH</strong> å±äºç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œå¾ˆå¤šæ—¶å€™ä¸€äº›åº”ç”¨ç¨‹åºä¾èµ–å®ƒã€‚</p><p>æ‰§è¡Œ <code>echo $PATH</code> åå¯ä»¥çœ‹åˆ° <strong>PATH</strong> ä¸­çš„ä»¥å†’å·<code>:</code>åˆ†å‰²çš„æ‰€æœ‰å‘½ä»¤è·¯å¾„ã€‚æœ€åä¸€ä¸ªå†’å·<code>:</code>åé¢è·Ÿçš„æ˜¯ <code>flutter</code> å‘½ä»¤è·¯å¾„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ echo $PATH</span><br><span class="line">/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/Library/Apple/usr/bin:/Users/smilingmiao/development/flutter/bin</span><br></pre></td></tr></table></figure><h4 id="export-å‘½ä»¤"><a href="#export-å‘½ä»¤" class="headerlink" title="export å‘½ä»¤"></a>export å‘½ä»¤</h4><p>é€šå¸¸æˆ‘ä»¬ç›´æ¥åœ¨ç»ˆç«¯é‡Œé¢æ‰§è¡Œ export å’Œ source å‘½ä»¤åï¼Œä»…åœ¨æœ¬æœºæœ¬æ¬¡ç™»å½•æœ‰æ•ˆã€‚æƒ³æ°¸è¿œæœ‰æ•ˆå°±ç›´æ¥åœ¨ <code>.zshrc</code> æ–‡ä»¶é‡Œæ·»åŠ å˜é‡ã€‚</p><ul><li>æ¯”å¦‚ä¸ºæ·»åŠ  flutter çš„ <a href="https://flutter.dev/community/china">å›½å†…é•œåƒ</a></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PUB_HOSTED_URL=https://pub.flutter-io.cn</span><br><span class="line">export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn</span><br></pre></td></tr></table></figure><p>å†æ‰§è¡Œä¸€ä¸‹ <code>source ~/.zshrc</code></p><ul><li>æ·»åŠ  flutter sdk å‘½ä»¤åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ <strong>PATH</strong> ä¸­</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=&quot;$PATH:$HOME/development/flutter/bin&quot;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>PATH=&quot;$PATH:$HOME/development/flutter/bin&quot;</code> è¡¨ç¤ºåœ¨ä¿ç•™åŸæ¥çš„ PATH ç¯å¢ƒæƒ…å†µä¸‹ï¼Œå†è¿½åŠ è·¯å¾„ $HOME&#x2F;development&#x2F;flutter&#x2F;bin ä½œä¸ºæ–°çš„ <strong>PATH</strong> ç¯å¢ƒå˜é‡ã€‚</p><blockquote><p>å…¶ä¸­ï¼Œ<code>=</code> ä»£è¡¨è®¾ç½®ï¼Œ<code>:</code> ä»£è¡¨<strong>è¿½åŠ </strong></p></blockquote><h4 id="source"><a href="#source" class="headerlink" title="source"></a>source</h4><p><code>souce</code> ä½¿å¾—è¢«æ‰§è¡Œæ–‡ä»¶çš„å˜é‡åŠå‡½æ•°åŠ è½½è¿›å½“å‰ç»ˆç«¯ç¯å¢ƒã€‚</p><h4 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h4><p>æ‰§è¡Œè‡ªå·±çš„ shell æ–‡ä»¶ï¼Œå‡å®šå­˜æ”¾åœ¨ç”¨æˆ·æ ¹ç›®å½•ä¸‹çš„ shell æ–‡ä»¶åä¸º <code>.test.sh</code>ï¼Œå†…å®¹ä¸º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">foo() &#123;</span><br><span class="line">echo &quot;hello&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…ˆæ‰§è¡Œ <code>source ~./.test</code>ï¼Œå†æ‰§è¡Œ <code>foo</code> å°±å¯ä»¥æ‰“å°å‡º â€helloâ€œ.</p><h4 id="xcrun"><a href="#xcrun" class="headerlink" title="xcrun"></a>xcrun</h4><p>å…ˆè¯´ <code>xcrun simctl</code>ï¼Œä¸€çœ‹å°±çŸ¥é“æ˜¯æ§åˆ¶æ¨¡æ‹Ÿå™¨çš„ï¼Œç›´æ¥åœ¨ç»ˆç«¯æ‰§è¡Œ <code>xcrun simctl</code> å°±å¯ä»¥çœ‹åˆ°å¯ä»¥ä½¿ç”¨çš„æ‰€æœ‰<code>å­å‘½ä»¤</code>äº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ xcrun simctl</span><br><span class="line">usage: simctl [--set &lt;path&gt;] [--profiles &lt;path&gt;] &lt;subcommand&gt; ...</span><br><span class="line">       simctl help [subcommand]</span><br><span class="line">Command line utility to control the Simulator</span><br><span class="line"></span><br><span class="line">For subcommands that require a &lt;device&gt; argument, you may specify a device UDID</span><br><span class="line">or the special &quot;booted&quot; string which will cause simctl to pick a booted device.</span><br><span class="line">If multiple devices are booted when the &quot;booted&quot; device is selected, simctl</span><br><span class="line">will choose one of them.</span><br><span class="line"></span><br><span class="line">Subcommands:</span><br><span class="line">create              Create a new device.</span><br><span class="line">clone               Clone an existing device.</span><br><span class="line">upgrade             Upgrade a device to a newer runtime.</span><br><span class="line">delete              Delete spcified devices, unavailable devices, or all devices.</span><br><span class="line">pair                Create a new watch and phone pair.</span><br><span class="line">unpair              Unpair a watch and phone pair.</span><br><span class="line">pair_activate       Set a given pair as active.</span><br><span class="line">erase               Erase a device&#x27;s contents and settings.</span><br><span class="line">boot                Boot a device.</span><br><span class="line">shutdown            Shutdown a device.</span><br><span class="line">rename              Rename a device.</span><br><span class="line">getenv              Print an environment variable from a running device.</span><br><span class="line">openurl             Open a URL in a device.</span><br><span class="line">addmedia            Add photos, live photos, videos, or contacts to the library of a device.</span><br><span class="line">install             Install an app on a device.</span><br><span class="line">uninstall           Uninstall an app from a device.</span><br><span class="line">get_app_container   Print the path of the installed app&#x27;s container</span><br><span class="line">launch              Launch an application by identifier on a device.</span><br><span class="line">terminate           Terminate an application by identifier on a device.</span><br><span class="line">spawn               Spawn a process by executing a given executable on a device.</span><br><span class="line">list                List available devices, device types, runtimes, or device pairs.</span><br><span class="line">icloud_sync         Trigger iCloud sync on a device.</span><br><span class="line">pbsync              Sync the pasteboard content from one pasteboard to another.</span><br><span class="line">pbcopy              Copy standard input onto the device pasteboard.</span><br><span class="line">pbpaste             Print the contents of the device&#x27;s pasteboard to standard output.</span><br><span class="line">help                Prints the usage for a given subcommand.</span><br><span class="line">io                  Set up a device IO operation.</span><br><span class="line">diagnose            Collect diagnostic information and logs.</span><br><span class="line">logverbose          enable or disable verbose logging for a device</span><br><span class="line">status_bar          Set or clear status bar overrides</span><br><span class="line">ui                  Get or Set UI options</span><br><span class="line">push                Send a simulated push notification</span><br><span class="line">privacy             Grant, revoke, or reset privacy and permissions</span><br><span class="line">keychain            Manipulate a device&#x27;s keychain</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>xcrun simctl list devices iOS</code> å¯ä»¥çœ‹åˆ°ç›®å‰ç”µè„‘ä¸Šçš„æ‰€æœ‰æ¨¡æ‹Ÿå™¨ï¼Œä»¥åŠè¿è¡ŒçŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">~ xcrun simctl list devices iOS</span><br><span class="line">== Devices ==</span><br><span class="line">-- iOS 13.4 --</span><br><span class="line">    iPhone 8 (B3738A6E-2CA5-43BE-88A9-939339231389) (Shutdown)</span><br><span class="line">    iPhone 8 Plus (6358977D-7D38-479B-B58C-0F1FFE597838) (Shutdown)</span><br><span class="line">    iPhone 11 (8E8490BE-B6FC-40EB-BB4B-15D182E21233) (Shutdown)</span><br><span class="line">    iPhone 11 Pro (964DFF45-2DDB-4C70-AA94-0AC1A08084CB) (Shutdown)</span><br><span class="line">    iPhone 11 Pro Max (24E7078C-4656-4C95-8848-522B286AF7B5) (Shutdown)</span><br><span class="line">    iPad Pro (9.7-inch) (B1217AAB-2B7A-42D0-9DD0-C10A70FA34BC) (Shutdown)</span><br><span class="line">    iPad (7th generation) (A0121545-6727-44C9-93DA-97C1BD8C4CB2) (Shutdown)</span><br><span class="line">    iPad Pro (11-inch) (2nd generation) (A905D7F2-F028-4642-81A9-448AF9C2DC1B) (Shutdown)</span><br><span class="line">    iPad Pro (12.9-inch) (4th generation) (959CE868-E85B-4C64-87BE-E0E04A34EFC2) (Shutdown)</span><br><span class="line">    iPad Air (3rd generation) (ED6079DD-2949-42A7-884A-F981F377CF9C) (Shutdown)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‘½ä»¤åé¢åŠ ä¸ª <code>-j</code> æ‰“å°å‡º JSON æ ¼å¼çš„æ•°æ®ï¼Œå¹¶å¯ä»¥çœ‹åˆ°æ›´å¤šçš„å±æ€§ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ xcrun simctl list devices iOS -j</span><br><span class="line">&#123;</span><br><span class="line">  &quot;devices&quot; : &#123;</span><br><span class="line">    &quot;com.apple.CoreSimulator.SimRuntime.tvOS-13-4&quot; : [</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    &quot;com.apple.CoreSimulator.SimRuntime.watchOS-6-2&quot; : [</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    &quot;com.apple.CoreSimulator.SimRuntime.iOS-13-4&quot; : [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;dataPath&quot; : &quot;\/Users\/smilingmiao\/Library\/Developer\/CoreSimulator\/Devices\/B3738A6E-2CA5-43BE-88A9-939339231389\/data&quot;,</span><br><span class="line">        &quot;logPath&quot; : &quot;\/Users\/smilingmiao\/Library\/Logs\/CoreSimulator\/B3738A6E-2CA5-43BE-88A9-939339231389&quot;,</span><br><span class="line">        &quot;udid&quot; : &quot;B3738A6E-2CA5-43BE-88A9-939339231389&quot;,</span><br><span class="line">        &quot;isAvailable&quot; : true,</span><br><span class="line">        &quot;deviceTypeIdentifier&quot; : &quot;com.apple.CoreSimulator.SimDeviceType.iPhone-8&quot;,</span><br><span class="line">        &quot;state&quot; : &quot;Shutdown&quot;,</span><br><span class="line">        &quot;name&quot; : &quot;iPhone 8&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      ...</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å¯åŠ¨-x2F-å…³é—­ä¸€ä¸ªæ¨¡æ‹Ÿå™¨"><a href="#å¯åŠ¨-x2F-å…³é—­ä¸€ä¸ªæ¨¡æ‹Ÿå™¨" class="headerlink" title="å¯åŠ¨&#x2F;å…³é—­ä¸€ä¸ªæ¨¡æ‹Ÿå™¨"></a>å¯åŠ¨&#x2F;å…³é—­ä¸€ä¸ªæ¨¡æ‹Ÿå™¨</h5><p>å…ˆæ‰¾åˆ°å…·ä½“å‹å·æ¨¡æ‹Ÿå™¨çš„ uuidï¼Œç„¶åæ‰§è¡Œå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// å¯åŠ¨ iPhone 8 æ¨¡æ‹Ÿå™¨</span><br><span class="line">xcrun simctl boot &quot;B3738A6E-2CA5-43BE-88A9-939339231389&quot;</span><br><span class="line">// å…³é—­ iPhone 8 æ¨¡æ‹Ÿå™¨</span><br><span class="line">xcrun simctl shutdown &quot;B3738A6E-2CA5-43BE-88A9-939339231389</span><br></pre></td></tr></table></figure><h5 id="å¯åŠ¨ä¸€ä¸ªåº”ç”¨"><a href="#å¯åŠ¨ä¸€ä¸ªåº”ç”¨" class="headerlink" title="å¯åŠ¨ä¸€ä¸ªåº”ç”¨"></a>å¯åŠ¨ä¸€ä¸ªåº”ç”¨</h5><p><code>xcrun simctl launch &quot;B3738A6E-2CA5-43BE-88A9-939339231389&quot; com.apple.shortcuts</code></p><h5 id="å…³é—­ä¸€ä¸ªåº”ç”¨"><a href="#å…³é—­ä¸€ä¸ªåº”ç”¨" class="headerlink" title="å…³é—­ä¸€ä¸ªåº”ç”¨"></a>å…³é—­ä¸€ä¸ªåº”ç”¨</h5><p><code>xcrun simctl terminate &quot;B3738A6E-2CA5-43BE-88A9-939339231389&quot; com.apple.shortcuts</code></p><h5 id="å½•åˆ¶æ¨¡æ‹Ÿå™¨è§†é¢‘"><a href="#å½•åˆ¶æ¨¡æ‹Ÿå™¨è§†é¢‘" class="headerlink" title="å½•åˆ¶æ¨¡æ‹Ÿå™¨è§†é¢‘"></a>å½•åˆ¶æ¨¡æ‹Ÿå™¨è§†é¢‘</h5><p><code>xcrun simctl io booted recordVideo Desktop/demo_video.mov</code></p><p>æŒ‰ control + C ç»“æŸå½•åˆ¶ï¼Œç”Ÿæˆçš„ demo_video.mov æ–‡ä»¶åœ¨æ¡Œé¢ã€‚</p><p>â€¦</p><p>â€¦</p><h4 id="flutter-pub"><a href="#flutter-pub" class="headerlink" title="flutter pub"></a>flutter pub</h4><p>æ ¹æ® <a href="https://flutter.dev/community/china">Using Flutter in China</a> è®¾ç½®å¥½é•œåƒï¼Œåœ¨ flutter é¡¹ç›®ä¸­ pubspec.yaml æ–‡ä»¶ä¸­æ·»åŠ éœ€è¦çš„ packageï¼Œç„¶å<strong>ä¸è¦</strong>åœ¨ Android Studio ä¸­ç‚¹ Flutter package getï¼Œå› ä¸ºä¼šä¸€ç›´å¡ä½æ‹‰å–ä¸ä¸‹æ¥ã€‚æ­£ç¡®çš„åšæ³•æ˜¯åœ¨ç»ˆç«¯ cd åˆ° flutter é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œç„¶åæ‰§è¡Œ <code>flutter pub get</code>ï¼Œå‡ ç§’é’Ÿå°±å¥½äº†ã€‚</p><h5 id="flutter-run"><a href="#flutter-run" class="headerlink" title="flutter run"></a>flutter run</h5><p>è¿›å…¥ flutter é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œæ‰§è¡Œ <code>flutter run</code>ï¼ŒæŒ‰ç…§æç¤ºæ“ä½œï¼Œè¿™æ ·å°±å¾—åˆ°ä¸€ä¸ª URL å¯ä»¥ç”¨æ¥åœ¨ Android Studio ä¸­çš„ Dart DevTools ç•Œé¢äº†ã€‚</p><h4 id="é…ç½®-Android-ç¯å¢ƒå˜é‡"><a href="#é…ç½®-Android-ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½® Android ç¯å¢ƒå˜é‡"></a>é…ç½® Android ç¯å¢ƒå˜é‡</h4><p>å‚è€ƒ Android <a href="https://developer.android.google.cn/studio/command-line/variables">å®˜ç½‘</a> çš„ä»‹ç»ï¼Œé¦–å…ˆæ‰¾åˆ° Android sdk çš„å­˜æ”¾è·¯å¾„ã€‚ä¹‹ååœ¨ <code>.zshrc</code> æ–‡ä»¶ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œå¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Android Studio sdk</span></span><br><span class="line">export ANDROID_SDK_ROOT=&quot;$HOME/Library/Android/sdk&quot;</span><br><span class="line">export PATH=&quot;$PATH:$ANDROID_SDK_ROOT/emulator&quot;</span><br></pre></td></tr></table></figure><p><code>source .zshrc</code> ä¸€ä¸‹ï¼Œè¿™æ ·å°±æŠŠ <code>emulator</code> å‘½ä»¤é…ç½®å¥½äº†ã€‚</p><p><font color="red">æ›´æ–°</font></p><p>å®é™…æ“ä½œè¿‡ç¨‹ä¸­ï¼Œæ‰§è¡Œ <code>emulator -list-avds</code> æ—¶è¾“å‡º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ emulator -list-avds</span><br><span class="line">Nexus_4_API_23</span><br><span class="line">Pixel_3_XL_API_29</span><br><span class="line">Pixel_API_24</span><br></pre></td></tr></table></figure><p>å†æ‰§è¡Œ <code>emulator -avd Nexus_4_API_23</code> æ—¶è¾“å‡ºå¦‚ä¸‹é”™è¯¯âŒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ emulator -avd Nexus_4_API_23</span><br><span class="line">[4348067264]:ERROR:android/android-emu/android/qt/qt_setup.cpp:28:Qt library not found at ../emulator/lib64/qt/lib</span><br><span class="line">Could not launch &#x27;/Users/smilingmiao/../emulator/qemu/darwin-x86_64/qemu-system-i386&#x27;: No such file or directory</span><br></pre></td></tr></table></figure><p>ç»è¿‡ä¸€ç•ª Google åï¼Œåœ¨<a href="https://medium.com/js-features/launch-android-emulator-from-console-failure-eb43a1115cb5">è¿™é‡Œ</a>æ‰¾åˆ°äº†ç­”æ¡ˆï¼Œå®é™…å°±æ˜¯æ›´æ”¹ä¸ªå‘½ä»¤æ‰€åœ¨è·¯å¾„ã€‚</p><blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å°† `export PATH=&quot;$PATH:$ANDROID_SDK_ROOT/emulator&quot;` æ”¹ä¸ºï¼š</span><br><span class="line">export PATH=&quot;$PATH:$ANDROID_SDK_ROOT/tools/emulator&quot;</span><br></pre></td></tr></table></figure></blockquote><p>è¿™æ ·ç¡®å®æ˜¯ä¿®å¥½äº†ã€‚</p><p>**<font color="red">ä¸è¿‡</font>**ï¼Œæˆ‘æŠŠä¹‹å‰çš„ AVD éƒ½åˆ æ‰äº†ï¼Œåˆåˆ›å»ºäº†æ–°çš„ AVDï¼Œäºæ˜¯åˆéœ€è¦å†æŠŠğŸ‘†ä¸Šé¢å˜æ›´çš„æ”¹å›å»ã€‚ğŸ¤¦</p><p>å¦åˆ™ï¼Œ<code>command not found: emulator</code>ã€‚</p><h4 id="è®¾ç½®åˆ«å"><a href="#è®¾ç½®åˆ«å" class="headerlink" title="è®¾ç½®åˆ«å"></a>è®¾ç½®åˆ«å</h4><p><strong>aliaså‘½ä»¤</strong>ç”¨æ¥è®¾ç½®æŒ‡ä»¤çš„åˆ«åã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤å¯ä»¥å°†ä¸€äº›è¾ƒé•¿çš„å‘½ä»¤è¿›è¡Œç®€åŒ–ã€‚ä½¿ç”¨aliasæ—¶ï¼Œç”¨æˆ·å¿…é¡»ä½¿ç”¨å•å¼•å·<code>&#39;&#39;</code>å°†åŸæ¥çš„å‘½ä»¤å¼•èµ·æ¥ï¼Œé˜²æ­¢ç‰¹æ®Šå­—ç¬¦å¯¼è‡´é”™è¯¯ã€‚å…·ä½“æŸ¥çœ‹ğŸ‘‰ <a href="https://man.linuxde.net/alias">è¿™é‡Œ</a></p><p>emulator ä½œä¸ºå‘½ä»¤å¼€å¤´ï¼Œè¿™ä¸ªå•è¯å®åœ¨å¤ªé•¿äº†ï¼Œç”¨åˆ«åæŠŠå‘½ä»¤ç²¾ç®€ä¸€ä¸‹å·æ‡’</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alias e=&#x27;emulator&#x27;</span><br><span class="line">alias evd=&#x27;emulator -avd&#x27;</span><br><span class="line">alias els=&#x27;emulator -list-avds&#x27;</span><br></pre></td></tr></table></figure><p>äºæ˜¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ els</span><br><span class="line">Pixel_3a_XL_API_29</span><br><span class="line">Pixel_XL_API_R</span><br></pre></td></tr></table></figure><h4 id="è‡ªåŠ¨åŒ–æµ‹è¯•"><a href="#è‡ªåŠ¨åŒ–æµ‹è¯•" class="headerlink" title="è‡ªåŠ¨åŒ–æµ‹è¯•"></a>è‡ªåŠ¨åŒ–æµ‹è¯•</h4><p><strong>adb å‘½ä»¤ - Android Deubg Bridge</strong></p><p><strong>æŸ¥çœ‹æ‰€æœ‰ Android è®¾å¤‡</strong></p><p><code>adb devices</code></p><p><strong>æŸ¥çœ‹ app å…¥å£</strong></p><p><code>adb logcat | grep -i displayed</code></p><blockquote><p>æ³¨ï¼š-i æ˜¯å¿½ç•¥å¤§å°å†™çš„ï¼Œåªè¦æ˜¯ displayed è¿™ä¸ªå•è¯éƒ½ä¼šè¢«åŒ¹é…åˆ°</p></blockquote><p>è¿™ä¸€æ­¥å¯ä»¥è·å–åˆ° app å…¥å£çš„ activity åŒ…åè·¯å¾„ã€‚ä¾‹å¦‚æ‰“å¼€è°·æ­Œåœ°å›¾åç»ˆç«¯å‡ºç°ï¼š<code>com.google.android.apps.maps/com.google.android.maps.MapsActivity</code></p><p><strong>æŸ¥çœ‹ app ç•Œé¢å…ƒç´ </strong></p><p><code>adb shell dumpsys activity top</code></p><p><strong>å¯åŠ¨åº”ç”¨</strong></p><p><code>adb shell am start -n com.google.android.apps.maps/com.google.android.maps.MapsActivity -S</code></p><blockquote><p>æ³¨ï¼šam æ˜¯ Activity Manager çš„ç¼©å†™ã€‚-S ä»£è¡¨ stopï¼Œæ”¾åœ¨æ­¤å‘½ä»¤ä¸­å°±æ˜¯å¯åŠ¨å‰å…ˆæ€æ­»ã€‚</p></blockquote><p><strong>æ¸…ç†ç‰¹å®šåŒ…ç¼“å­˜æ•°æ®</strong></p><p><code>adb shell pm clear com.google.android.apps.maps</code></p><p><strong>è·å–ç•Œé¢çš„å…ƒç´ </strong></p><p><code>adb shell uiautomator dump</code></p><p>UI hierchary dumped to: &#x2F;sdcard&#x2F;window_dump.xml</p><p>å†è¿æ¥ cat å‘½ä»¤æŸ¥çœ‹ dump ä¸‹æ¥çš„æ–‡ä»¶å†…å®¹</p><p><code>adb shell &#39;uiautomator dump &amp;&amp; cat /sdcard/window_dump.xml&#39;</code></p><p>è¿™æ ·å°±æ˜¾ç¤ºäº†å½“å‰ç•Œé¢çš„æ‰€æœ‰æ§ä»¶é…ç½®ä¿¡æ¯ã€‚</p><p>è¾“å…¥ <code>adb shell</code> äº†è§£æ›´å¤šå‘½ä»¤</p><h4 id="å‘½ä»¤-tree"><a href="#å‘½ä»¤-tree" class="headerlink" title="å‘½ä»¤ tree"></a>å‘½ä»¤ tree</h4><p>Linux tree å‘½ä»¤ç”¨äºä»¥æ ‘çŠ¶å›¾åˆ—å‡ºç›®å½•çš„å†…å®¹ã€‚</p><p>æ‰§è¡Œ tree æŒ‡ä»¤ï¼Œå®ƒä¼šåˆ—å‡ºæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬å­ç›®å½•é‡Œçš„æ–‡ä»¶ã€‚</p><p>æ‰§è¡Œ <code>tree --help</code> ä¼šåˆ—å‡ºæ‰€æœ‰çš„ optionï¼Œä¸å†èµ˜è¿°ã€‚</p><p>æœ‰æ—¶å€™æƒ³æ‰¾ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯ç›´æ¥æ‰§è¡Œ <code>tree </code> çš„è¯ï¼Œç»“æœå¤ªå¤šåœ¨ç»ˆç«¯é‡Œæ˜¾ç¤ºä¸å®Œï¼Œæ­¤æ—¶å¯ä»¥ç”¨ tree å‘½ä»¤å°†æ•´ä¸ªæ–‡ä»¶ç»“æ„è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œç„¶åå†æ‰“å¼€æ–‡ä»¶é€šè¿‡å…³é”®å­—æŸ¥è·¯å¾„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tree -f &gt; ~/Desktop/æ–‡ä»¶å.æ‰©å±•å</span><br><span class="line">æˆ–</span><br><span class="line">tree -f -o ~/Desktop/æ–‡ä»¶å.æ‰©å±•å</span><br></pre></td></tr></table></figure><blockquote><p>-f ä»£è¡¨ full path</p></blockquote><h4 id="æ‚ä¸ƒæ‚å…«çš„å‘½ä»¤"><a href="#æ‚ä¸ƒæ‚å…«çš„å‘½ä»¤" class="headerlink" title="æ‚ä¸ƒæ‚å…«çš„å‘½ä»¤"></a>æ‚ä¸ƒæ‚å…«çš„å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat a.txt | pbcopy   # å°†a.txtæ–‡ä»¶ç±»å®¹å†™å…¥å‰ªåˆ‡æ¿ï¼Œç›¸å½“äº cmd + C </span><br></pre></td></tr></table></figure> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pbpaste              # å°†åˆšåˆšå­˜å…¥å‰ªåˆ‡æ¿çš„a.txtå†…å®¹å¤åˆ¶åˆ°ç»ˆç«¯ï¼Œç›¸å½“äº cmd + v</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command + enter  # åœ¨å…¨å±å’Œé€€å‡ºå…¨å±ä¹‹é—´åˆ‡æ¢</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which + ä»»æ„å‘½ä»¤å¼€å¤´ + tab # æŸ¥çœ‹å‘½ä»¤çš„å…¨éƒ¨æˆ– alias</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r + ä»»æ„å‘½ä»¤å¼€å¤´ + tab     # æŸ¥çœ‹å‘½ä»¤å¹¶é€‰æ‹©å’Œæ‰§è¡Œ</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">control + command + F# è¿›å…¥æˆ–é€€å‡ºå…¨å±</span><br></pre></td></tr></table></figure><h4 id="ffmpeg-ç›¸å…³å‘½ä»¤"><a href="#ffmpeg-ç›¸å…³å‘½ä»¤" class="headerlink" title="ffmpeg ç›¸å…³å‘½ä»¤"></a>ffmpeg ç›¸å…³å‘½ä»¤</h4><h5 id="video-è½¬-GIFï¼Œè¯¦è§-è¿™é‡Œ"><a href="#video-è½¬-GIFï¼Œè¯¦è§-è¿™é‡Œ" class="headerlink" title="video è½¬ GIFï¼Œè¯¦è§ è¿™é‡Œ"></a>video è½¬ GIFï¼Œè¯¦è§ <a href="https://gist.github.com/SheldonWangRJT/8d3f44a35c8d1386a396b9b49b43c385#explanation">è¿™é‡Œ</a></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i input.mov -pix_fmts rgb8 -r 10 output.gif &amp;&amp; gifsicle -O3 output.gif -o output.gif</span><br></pre></td></tr></table></figure><h6 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h6><ol><li>Convert the file to gif using <code>ffmpeg</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- input path argument `-i`</span><br><span class="line">- pixel format argument `-pix_fmt`</span><br><span class="line">- removing some frames using framerate argument `-r`</span><br><span class="line">- end `ffmpeg` with new path/to/filename</span><br></pre></td></tr></table></figure><ol><li>Optimize the same output file with third option <code>-O3</code> and rewrite the generated gif file from last step</li><li>Notes: using <code>&amp;&amp;</code> to make sure the conversion sucess before optimizing</li></ol><p>æ›´æ–°ï¼š</p><p>ffmpeg -i input.mov -pix_fmt rgb8 -r 10 output.gif</p><p>ç”±äºè½¬æ¢æ—¶ï¼Œgifsicle è€å‡ºé—®é¢˜ï¼Œæ‰€ä»¥ç›´æ¥å°±ç”¨ä¸Šé¢è¿™æ¡</p><h4 id="Git-ç›¸å…³"><a href="#Git-ç›¸å…³" class="headerlink" title="Git ç›¸å…³"></a>Git ç›¸å…³</h4><h5 id="GitLab-æœåŠ¡å™¨ä¸»æœºé‡è£…åçš„é—®é¢˜"><a href="#GitLab-æœåŠ¡å™¨ä¸»æœºé‡è£…åçš„é—®é¢˜" class="headerlink" title="GitLab æœåŠ¡å™¨ä¸»æœºé‡è£…åçš„é—®é¢˜"></a>GitLab æœåŠ¡å™¨ä¸»æœºé‡è£…åçš„é—®é¢˜</h5><h5 id="å…·ä½“é—®é¢˜"><a href="#å…·ä½“é—®é¢˜" class="headerlink" title="å…·ä½“é—®é¢˜"></a>å…·ä½“é—®é¢˜</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!</span><br><span class="line">Someone could be eavesdropping on you right now (man-in-the-middle attack)!</span><br><span class="line">It is also possible that a host key has just been changed.</span><br></pre></td></tr></table></figure><p>åˆ†æå¯èƒ½å°±æ˜¯æœåŠ¡å™¨è¯ä¹¦å˜æ›´äº†ï¼Œå’Œæœ¬åœ°çš„æŒ‡çº¹ä¸å¯¹åº”äº†ã€‚åªæœ‰æ¸…é™¤å½“å‰æœºå™¨é‡Œå…³äºè¿œç¨‹æœåŠ¡å™¨çš„ç¼“å­˜å’Œå…¬é’¥ä¿¡æ¯ã€‚</p><h5 id="è§£å†³æ–¹å¼"><a href="#è§£å†³æ–¹å¼" class="headerlink" title="è§£å†³æ–¹å¼"></a>è§£å†³æ–¹å¼</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -R 192.168.xxx.xxxï¼ˆè‡ªå»º GitLab æœåŠ¡å™¨åœ°å€ï¼‰</span><br></pre></td></tr></table></figure><h4 id="Carthage"><a href="#Carthage" class="headerlink" title="Carthage"></a>Carthage</h4><p>LLDB å‡ºç° â€œCouldnâ€™t IRGen expressionâ€ï¼Œè§£å†³æ–¹å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">carthage update --platform macOS --no-use-binaries</span><br></pre></td></tr></table></figure><h4 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h4><p>æœ€è¿‘ä»ä¸åŒæ¸ é“æŠ“äº†äº›æ•°æ®ï¼Œæ¸ é“å­—æ®µä¸º <code>app</code>ï¼ŒæŠ“å–æ—¶é—´ä¸º <code>times</code>ï¼Œæ‰€æœ‰æ¸ é“çš„æ•°æ®åˆ°å†™åˆ°ä¸€å¼ åä¸º <code>spiderapp_202005</code> çš„è¡¨é‡Œäº†ã€‚ç°åœ¨æƒ³ç»Ÿè®¡ä¸€ä¸‹ 2020 å¹´ 5 æœˆ 14 æ—¥ å„ä¸ªæ¸ é“æŠ“åˆ°çš„æ•°é‡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">COUNT( * ) AS &#x27;æ€»é‡&#x27;,</span><br><span class="line">SUM( CASE WHEN app = &#x27;æ¸ é“1&#x27; THEN 1 ELSE 0 END ) AS &#x27;æ¸ é“1&#x27;,</span><br><span class="line">SUM( CASE WHEN app = &#x27;æ¸ é“2&#x27; THEN 1 ELSE 0 END ) AS &#x27;æ¸ é“2&#x27;,</span><br><span class="line">SUM( CASE WHEN app = &#x27;æ¸ é“3&#x27; THEN 1 ELSE 0 END ) AS &#x27;æ¸ é“3&#x27;</span><br><span class="line">FROM</span><br><span class="line">`spiderapp_202005` </span><br><span class="line">WHERE</span><br><span class="line">AND times &gt; &#x27;2020-05-14 00:00:00&#x27; </span><br><span class="line">AND times &lt; &#x27;2020-05-15 00:00:00&#x27;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœä¸º</p><table><thead><tr><th>æ€»é‡</th><th>æ¸ é“1</th><th>æ¸ é“2</th><th>æ¸ é“3</th></tr></thead><tbody><tr><td>288</td><td>40</td><td>191</td><td>57</td></tr></tbody></table><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://www.jianshu.com/p/06ee358ad5c0">https://www.jianshu.com/p/06ee358ad5c0</a></p><p><a href="https://blog.csdn.net/ouyang_peng/article/details/81536396">https://blog.csdn.net/ouyang_peng/article/details/81536396</a></p><p><a href="https://developer.android.google.cn/studio/command-line">https://developer.android.google.cn/studio/command-line</a></p><p><a href="https://developer.android.google.cn/studio/command-line/variables">Android é…ç½®ç¯å¢ƒå˜é‡</a></p><p>â€“ EOF â€“</p>]]></content>
    
    
    <summary type="html">&lt;h4 id=&quot;ç¯å¢ƒå˜é‡&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒå˜é‡&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒå˜é‡&quot;&gt;&lt;/a&gt;ç¯å¢ƒå˜é‡&lt;/h4&gt;&lt;p&gt;ä½œä¸ºä¸€åç¨‹åºå‘˜ï¼Œæ€»æ˜¯ç»•ä¸å¼€è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä»Šå¤©ç¨å¾®æ€»ç»“ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ä» &amp;#x2F;etc è¯´èµ·ï¼Œè¿™é‡Œçš„ etc ä¸æ˜¯ç¼©å†™ï¼Œæ˜¯abbr. ç­‰ç­‰ï¼ŒåŠå…¶ä»– (et cetera) çš„æ„æ€ã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œ &lt;code&gt;cat /etc/paths&lt;/code&gt; å‘½ä»¤å¯ä»¥çœ‹åˆ°å„ç§å‘½ä»¤çš„è„šæœ¬å­˜æ”¾æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;âœ  ~ cat /etc/paths&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/local/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/sbin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sbin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;usr æ˜¯ Unix System Resource çš„ç¼©å†™&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="å¼€å‘ç¯å¢ƒ" scheme="https://github.com/smilingmiao/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    
    
    <category term="å‘½ä»¤è¡Œé›†" scheme="https://github.com/smilingmiao/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%9B%86/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ AppleScript æ£€æµ‹æµè§ˆå™¨ä¸­ä¸å¥åº·çš„ç½‘ç«™</title>
    <link href="https://github.com/smilingmiao/2020/03/28/find-porn-web-in-browser/"/>
    <id>https://github.com/smilingmiao/2020/03/28/find-porn-web-in-browser/</id>
    <published>2020-03-28T07:19:37.000Z</published>
    <updated>2020-05-17T16:24:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>æƒ³è¾¾æˆçš„ç›®çš„ï¼šé€šè¿‡è„šæœ¬ç¨‹åº<strong>æ¯åˆ†é’Ÿ</strong>è¿›è¡Œæ£€æµ‹æµè§ˆå™¨ä¸­æ‰“å¼€çš„ç½‘é¡µ<strong>æ˜¯å¦åŒ…å«</strong>é»„è‰²ç½‘ç«™ï¼Œå¦‚æœåŒ…å«å°±å¼¹çª—æç¤ºï¼Œé€šè¿‡ç‚¹å‡»å¼¹çª—çš„æŒ‰é’®å…³é—­è¯¥ç½‘ç«™ã€‚</p><span id="more"></span><h4 id="ç®€å•çš„è„šæœ¬ä»£ç ï¼š"><a href="#ç®€å•çš„è„šæœ¬ä»£ç ï¼š" class="headerlink" title="ç®€å•çš„è„šæœ¬ä»£ç ï¼š"></a>ç®€å•çš„è„šæœ¬ä»£ç ï¼š</h4><figure class="highlight plaintext"><figcaption><span>Script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥çœ‹åº”ç”¨æ˜¯å¦åœ¨è¿è¡Œä¸­</span><br><span class="line">on app_is_running(app_name)</span><br><span class="line">tell application &quot;System Events&quot;</span><br><span class="line">set safari_is_running to (name of processes) contains app_name</span><br><span class="line">return safari_is_running</span><br><span class="line">end tell</span><br><span class="line">end app_is_running</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- ä¸å¥åº·ç½‘ç«™åŸŸåé›†åˆï¼Œè¿™é‡Œçå‡‘æ•°</span><br><span class="line">set porns to &#123;&quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;, &quot;ddd&quot;, &quot;fff&quot;, &quot;ggg&quot;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- æŸ¥çœ‹ Safari æ˜¯å¦åœ¨è¿è¡Œä¸­</span><br><span class="line">if app_is_running(&quot;Safari&quot;) then</span><br><span class="line">tell application &quot;Google Chrome&quot;</span><br><span class="line">set theWindows to windows</span><br><span class="line">repeat with theWindow in theWindows</span><br><span class="line">set theTabs to tab of theWindow</span><br><span class="line">repeat with theTab in theTabs</span><br><span class="line">set tabURL to theTab&#x27;s URL</span><br><span class="line">repeat with pornURL in porns</span><br><span class="line">if tabURL contains pornURL then</span><br><span class="line">display dialog &quot;å°é€¼ä»”åˆ«æµè§ˆé»„è‰²ç½‘ç«™äº†ï¼Œæ³¨æ„è¥å…»&quot; buttons &#123;&quot;å…³é—­&quot;&#125; default button 1</span><br><span class="line">if the button returned of the result is &quot;å…³é—­&quot; then</span><br><span class="line">close theTab</span><br><span class="line">exit repeat</span><br><span class="line">end if</span><br><span class="line">end if</span><br><span class="line">end repeat</span><br><span class="line">end repeat</span><br><span class="line">end repeat</span><br><span class="line">end tell</span><br><span class="line">end if</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- æŸ¥çœ‹ Google Chrome æ˜¯å¦åœ¨è¿è¡Œä¸­</span><br><span class="line">if app_is_running(&quot;Google Chrome&quot;) then</span><br><span class="line">tell application &quot;Google Chrome&quot;</span><br><span class="line">set theWindows to windows</span><br><span class="line">repeat with theWindow in theWindows</span><br><span class="line">set theTabs to tab of theWindow</span><br><span class="line">repeat with theTab in theTabs</span><br><span class="line">set tabURL to theTab&#x27;s URL</span><br><span class="line">repeat with pornURL in porns</span><br><span class="line">if tabURL contains pornURL then</span><br><span class="line">display dialog &quot;å°é€¼ä»”åˆ«æµè§ˆé»„è‰²ç½‘ç«™äº†ï¼Œæ³¨æ„è¥å…»&quot; buttons &#123;&quot;å…³é—­&quot;&#125; default button 1</span><br><span class="line">if the button returned of the result is &quot;å…³é—­&quot; then</span><br><span class="line">close theTab</span><br><span class="line">exit repeat</span><br><span class="line">end if</span><br><span class="line">end if</span><br><span class="line">end repeat</span><br><span class="line">end repeat</span><br><span class="line">end repeat</span><br><span class="line">end tell</span><br><span class="line">end if</span><br></pre></td></tr></table></figure><h4 id="å®šæ—¶æ‰§è¡Œè„šæœ¬ï¼š"><a href="#å®šæ—¶æ‰§è¡Œè„šæœ¬ï¼š" class="headerlink" title="å®šæ—¶æ‰§è¡Œè„šæœ¬ï¼š"></a>å®šæ—¶æ‰§è¡Œè„šæœ¬ï¼š</h4><p><strong>æ–¹æ³•ä¸€</strong></p><ul><li><p>ä½¿ç”¨ Linux å‘½ä»¤ <code>crontab</code> å’Œ <code>osascript</code> é…åˆæ‰§è¡Œè„šæœ¬ </p></li><li><p>å‡è®¾è„šæœ¬æ–‡ä»¶æ˜¯ï¼š<code>/Users/smilingmiao/Desktop/apple.scpt</code></p></li><li><p>ç»ˆç«¯æ‰§è¡Œ <code>crontab -e</code> è¿›å…¥äº¤äº’ç•Œé¢ï¼ˆå¤‡æ³¨ï¼še æ˜¯ edit çš„é¦–å­—æ¯ï¼‰</p></li><li><p>è¾“å…¥ <code>* * * * * osascript /Users/smilingmiao/Desktop/apple.scpt</code> ï¼ˆå…¶ä¸­ç©ºæ ¼éš”å¼€çš„5ä¸ªæ˜Ÿå·æ˜¯ linux å‘½ä»¤ï¼‰</p></li></ul><p><strong>æ–¹æ³•äºŒ</strong></p><p>ä½¿ç”¨ <code>launchctl</code> å‘½ä»¤é…åˆ plist æ–‡ä»¶</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;?xml</span> <span class="string">version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="attr">&lt;!DOCTYPE</span> <span class="string">plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span></span><br><span class="line"><span class="attr">&lt;plist</span> <span class="string">version=&quot;1.0&quot;&gt;</span></span><br><span class="line"><span class="attr">&lt;dict&gt;</span></span><br><span class="line"><span class="attr">&lt;key&gt;Label&lt;/key&gt;</span></span><br><span class="line"><span class="attr">&lt;string&gt;com.dirty.identify&lt;/string&gt;</span> <span class="string">/// å…¨å±€å”¯ä¸€</span></span><br><span class="line"><span class="attr">&lt;key&gt;ProgramArguments&lt;/key&gt;</span></span><br><span class="line"><span class="attr">&lt;array&gt;</span></span><br><span class="line"><span class="attr">&lt;string&gt;osascript&lt;/string&gt;</span> <span class="string">/// å‘½ä»¤</span></span><br><span class="line"><span class="attr">&lt;string&gt;/Users/smilingmiao/Desktop/identify.scpt&lt;/string&gt;</span> <span class="string">/// å‚æ•°</span></span><br><span class="line"><span class="attr">&lt;/array&gt;</span></span><br><span class="line"><span class="attr">&lt;key&gt;StartInterval&lt;/key&gt;</span> <span class="string">/// è¿è¡Œé—´éš”æ—¶é—´</span></span><br><span class="line"><span class="attr">&lt;integer&gt;60&lt;/integer&gt;</span> <span class="string">/// ä»£è¡¨ 60 ç§’</span></span><br><span class="line"><span class="attr">&lt;/dict&gt;</span></span><br><span class="line"><span class="attr">&lt;/plist&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>å°†æ­¤ plist æ–‡ä»¶ä¿å­˜æˆ com.dirty.identify.plist</p></li><li><p>ç»ˆç«¯æ‰§è¡Œ <code>cd ~/Library/LaunchAgents</code> è¿›å…¥ LaunchAgents</p></li><li><p>å°† com.dirty.identify.plist æ–‡ä»¶æ”¾åˆ°æ­¤å¤„</p></li><li><p>æ‰§è¡Œ <code>launchctl load -w com.dirty.identify.plist</code> </p></li><li><p>Mac å¼¹çª—è¯¢é—®æˆæƒï¼Œéƒ½é€‰åŒæ„</p></li></ul><h5 id="osascript"><a href="#osascript" class="headerlink" title="osascript"></a>osascript</h5><blockquote><p>osascript stands for Open Scripting Architecture Scripting Language. â€¦ Executes the given script file, or standard input if none is given. Scripts can be plain text or compiled scripts. osascript was designed for use with AppleScript, but will work with any Open Scripting Architecture (OSA) language.</p></blockquote><p>â€“ EOF â€“</p><h4 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h4><p><a href="https://www.cnblogs.com/hanlingzhi/p/6505967.html">https://www.cnblogs.com/hanlingzhi/p/6505967.html</a></p><p><a href="https://www.jianshu.com/p/b65c1d339eec">https://www.jianshu.com/p/b65c1d339eec</a></p><p><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html">https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æƒ³è¾¾æˆçš„ç›®çš„ï¼šé€šè¿‡è„šæœ¬ç¨‹åº&lt;strong&gt;æ¯åˆ†é’Ÿ&lt;/strong&gt;è¿›è¡Œæ£€æµ‹æµè§ˆå™¨ä¸­æ‰“å¼€çš„ç½‘é¡µ&lt;strong&gt;æ˜¯å¦åŒ…å«&lt;/strong&gt;é»„è‰²ç½‘ç«™ï¼Œå¦‚æœåŒ…å«å°±å¼¹çª—æç¤ºï¼Œé€šè¿‡ç‚¹å‡»å¼¹çª—çš„æŒ‰é’®å…³é—­è¯¥ç½‘ç«™ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="è„šæœ¬" scheme="https://github.com/smilingmiao/tags/%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>lambda</title>
    <link href="https://github.com/smilingmiao/2019/05/17/lambda/"/>
    <id>https://github.com/smilingmiao/2019/05/17/lambda/</id>
    <published>2019-05-16T16:00:00.000Z</published>
    <updated>2020-05-17T16:23:21.000Z</updated>
    
    <content type="html"><![CDATA[<p>lambda ç”± å‚æ•° + ç®­å¤´ + è¡¨è¾¾å¼ ç»„æˆã€‚</p><span id="more"></span><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">login</span><span class="params">(username: <span class="type">String</span>, password: <span class="type">String</span>, done: (<span class="type">String</span>) -&gt; <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">        <span class="comment">// handle login</span></span><br><span class="line">        ......</span><br><span class="line">        <span class="comment">// a second later, handle done.</span></span><br><span class="line">        <span class="keyword">val</span> str: String = <span class="string">&quot;hello&quot;</span></span><br><span class="line">        <span class="keyword">val</span> res = done(str)</span><br><span class="line">        println(res)        <span class="comment">// `hello world`</span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç™»å½•å‡½æ•°ï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª <code>lambda</code>ï¼Œè¿™ä¸ª <code>lambda</code> ç”± ç®­å¤´(<code>â†’</code>) ä»¥åŠå·¦å³ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå·¦è¾¹è¡¨ç¤ºæ¥å—ä¸€ä¸ª (å‚æ•°)ï¼Œå³è¾¹è¡¨ç¤ºè¡¨è¾¾å¼å¹¶ä¸”åŒæ—¶è¡¨ç¤ºéœ€è¦æŠŠè¡¨è¾¾å¼çš„è¿ç®—ç»“æœè¿”å›ï¼Œè™½ç„¶æœ‰æ—¶å€™å¯èƒ½åªæ˜¯ä¸€ä¸ªç®€å•åœ°ä¸€ä¸ªå€¼æˆ–å¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨è¿”å›æ—¶å€™è‡ªå·±å¯¹å…¶åˆ«çš„æ“ä½œã€‚</p><p>æ¯”å¦‚è°ƒç”¨</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">login(username, password, done = &#123; a -&gt; a + <span class="string">&quot; world&quot;</span> &#125;)</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œ<code>done(str)</code> å°†å€¼å›ä¼ ç»™ a æ¥æ”¶ï¼Œç„¶åå¯¹ a è¿›è¡Œä¸€äº›æ“ä½œååˆè¿”å›åˆ° login å‡½æ•°é‡Œï¼ˆæˆ‘ä»¬è¯´è¿‡ï¼Œç®­å¤´(<code>â†’</code>) å³è¾¹çš„æ˜¯è¿ç®—è¡¨è¾¾å¼ï¼Œå½“è¿ç®—å®Œæˆåå°±æŠŠç»“æœè¿”å›çš„ï¼‰ã€‚</p><h4 id="å†æ¥çœ‹ä¸ªç¨å¾®å¤æ‚ç‚¹çš„"><a href="#å†æ¥çœ‹ä¸ªç¨å¾®å¤æ‚ç‚¹çš„" class="headerlink" title="å†æ¥çœ‹ä¸ªç¨å¾®å¤æ‚ç‚¹çš„"></a>å†æ¥çœ‹ä¸ªç¨å¾®å¤æ‚ç‚¹çš„</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">login</span><span class="params">(username: <span class="type">String</span>, password: <span class="type">String</span>, done: (<span class="type">String</span>) -&gt; (<span class="type">Int</span>) -&gt; <span class="type">String</span>)</span></span> &#123; </span><br><span class="line">        <span class="comment">// handle login</span></span><br><span class="line">    ......</span><br><span class="line">        <span class="comment">// a second later, handle done.</span></span><br><span class="line">        <span class="keyword">val</span> str: String = <span class="string">&quot;hello&quot;</span></span><br><span class="line">        <span class="keyword">val</span> res = done(str) <span class="comment">// å¾—åˆ°ä¸€ä¸ªå­ lambda è¡¨è¾¾å¼</span></span><br><span class="line">        <span class="keyword">val</span> fin = res(<span class="number">1</span>)</span><br><span class="line">        println(fin)            <span class="comment">// `hello no. 1`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å†çœ‹è°ƒç”¨ï¼ˆkotlin-è¯­æ³•å…è®¸å°†-lambda-è¡¨è¾¾å¼å†™åˆ°å¤–é¢çš„å¤§æ‹¬å·ä¸­ï¼‰"><a href="#å†çœ‹è°ƒç”¨ï¼ˆkotlin-è¯­æ³•å…è®¸å°†-lambda-è¡¨è¾¾å¼å†™åˆ°å¤–é¢çš„å¤§æ‹¬å·ä¸­ï¼‰" class="headerlink" title="å†çœ‹è°ƒç”¨ï¼ˆkotlin è¯­æ³•å…è®¸å°† lambda è¡¨è¾¾å¼å†™åˆ°å¤–é¢çš„å¤§æ‹¬å·ä¸­ï¼‰"></a>å†çœ‹è°ƒç”¨ï¼ˆkotlin è¯­æ³•å…è®¸å°† lambda è¡¨è¾¾å¼å†™åˆ°å¤–é¢çš„å¤§æ‹¬å·ä¸­ï¼‰</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">login(username, password) &#123; o -&gt; &#123; i -&gt; o + <span class="string">&quot; no. <span class="variable">$i</span>&quot;</span> &#125; &#125;</span><br></pre></td></tr></table></figure><p>å°±è¿™æ ·å§ ;-)</p><p>â€“ EOF â€“</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;lambda ç”± å‚æ•° + ç®­å¤´ + è¡¨è¾¾å¼ ç»„æˆã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="éšæ‰‹ç¬”è®°" scheme="https://github.com/smilingmiao/tags/%E9%9A%8F%E6%89%8B%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>è®©é€šè¯ç•Œé¢è¿›å…¥åå°</title>
    <link href="https://github.com/smilingmiao/2019/04/27/let-calling-to-background/"/>
    <id>https://github.com/smilingmiao/2019/04/27/let-calling-to-background/</id>
    <published>2019-04-27T12:01:38.000Z</published>
    <updated>2020-04-08T10:51:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰ä¸ªéœ€æ±‚ï¼Œå¸Œæœ›æˆ‘ä»¬åœ¨åº”ç”¨å†…æ‰“å‡ºå»ç”µè¯æ—¶ï¼Œè®©æˆ‘ä»¬çš„ app æ˜¾ç¤ºåœ¨æœ€å‰é¢ï¼Œå°†æ‰“ç”µè¯ç•Œé¢ç½®äºåé¢ã€‚å¤§æ¦‚è¿™ç±»éœ€æ±‚å¤ªå°‘ï¼Œç½‘ä¸Šå¹¶æ²¡æ‰¾åˆ°ä»»ä½•èµ„æ–™ã€‚æœ¬æ¥æˆ‘æ˜¯æƒ³ç€åœ¨æ‹¨å‡ºå»ç”µè¯æ—¶å€™å…ˆé€šè¿‡æ–¹æ³•ï¼š</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (void)openURL:(NSURL*)url options:(NSDictionary&lt;UIApplicationOpenExternalURLOptionsKey, id&gt; *)options completionHandler:(void (^ __nullable)(BOOL success))completion</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ Safari è®¿é—®ä¸€ä¸ªåœ°å€ï¼Œç„¶ååˆ©ç”¨ URL Scheme å¹¶é€šè¿‡ js å›è°ƒæ‰“å¼€ app ä½¿å…¶åœ¨æœ€ä¸Šå±‚ã€‚ä½†æƒ³åˆ°åˆ‡æ¥åˆ‡å»ç”¨æˆ·ä½“éªŒå¾ˆä¸å¥½ï¼Œäºæ˜¯æƒ³åˆ°å¯ä»¥å…ˆç”¨ä¸€ä¸ªå›¾å±‚è¦†ç›–åˆ° keyWindow å†è°ƒä¸€ä¸‹è‡ªå·±çš„ Scheme æ¥è®© app ç½®äºæœ€ä¸Šå±‚ï¼Œé€šè¿‡å°è¯•è§‰å¾—å¯è¡Œã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›å®ç°ä»£ç ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">- (void)outgoingCallback &#123;</span><br><span class="line">  </span><br><span class="line">  UIWindow *window = [[UIApplication sharedApplication] keyWindow];</span><br><span class="line">  __block UIView *tempView = [UIView new];</span><br><span class="line">  [window addSubview:tempView];</span><br><span class="line">  </span><br><span class="line">  tempView.translatesAutoresizingMaskIntoConstraints = NO;</span><br><span class="line">  [window addConstraint:[tempView.leadingAnchor constraintEqualToAnchor:window.leadingAnchor]];</span><br><span class="line">  [window addConstraint:[tempView.trailingAnchor constraintEqualToAnchor:window.trailingAnchor]];</span><br><span class="line">  [window addConstraint:[tempView.topAnchor constraintLessThanOrEqualToAnchor:window.topAnchor]];</span><br><span class="line">  [window addConstraint:[tempView.bottomAnchor constraintEqualToAnchor:window.bottomAnchor]];</span><br><span class="line">  </span><br><span class="line">  dispatch_async(dispatch_get_global_queue(QOS_CLASS_USER_INITIATED, 0), ^&#123;</span><br><span class="line">  sleep(1);</span><br><span class="line">  dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">  tempView.hidden = YES;</span><br><span class="line">  &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  NSURL *url = [NSURL URLWithString:@&quot;tinybeeee://&quot;];</span><br><span class="line">  BOOL can = [[UIApplication sharedApplication] canOpenURL:url];</span><br><span class="line">  if (can) &#123;</span><br><span class="line">  [[UIApplication sharedApplication] openURL:url options:@&#123;&#125; completionHandler:^(BOOL success) &#123;</span><br><span class="line">  [tempView removeFromSuperview];</span><br><span class="line">  tempView = nil;</span><br><span class="line">  NSLog(@&quot;====tmp vie ===== %@&quot;, tempView);</span><br><span class="line">  &#125;];</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">  NSURL *url = [NSURL URLWithString:@&quot;tinybeeee://&quot;];</span><br><span class="line"></span><br><span class="line">  BOOL can = [[UIApplication sharedApplication] canOpenURL:url];</span><br><span class="line">  if (can) &#123;</span><br><span class="line">    [[UIApplication sharedApplication] openURL:url options:@&#123;&#125; completionHandler:^(BOOL success) &#123;</span><br><span class="line">      if (success) &#123;</span><br><span class="line">        NSLog(@&quot;æˆåŠŸã€‚ã€‚ã€‚ã€‚&quot;);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        NSLog(@&quot;å¤±è´¥ã€‚ã€‚ã€‚ã€‚&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    NSLog(@&quot;ä¸èƒ½æ‰“å¼€ã€‚ã€‚ã€‚&quot;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>URL Types å¡«è‡ªå·±çš„ <code>identifier</code> å’Œ <code>URLSchemes</code>ï¼Œegï¼šå‰è€…æˆ‘å¡« <code>smilingmiao</code>ï¼Œåè€…å¡« <code>laughing</code> å³å¯ã€‚</p><p>åœ¨ <code>AppDelegate</code> ä¸­å®ç°ä¸‹é¢çš„æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;UIApplicationOpenURLOptionsKey,id&gt; *)options &#123;</span><br><span class="line">  NSLog(@&quot;url = %@&quot;, url.absoluteString);</span><br><span class="line">  NSLog(@&quot;options = %@&quot;, options);</span><br><span class="line">  return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>Safari</code> åœ°å€æ è¾“å…¥ <code>laughing://smilingmiao?a=1&amp;b=2</code> å¹¶å›è½¦ï¼Œæ§åˆ¶å°æ‰“å°å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">laughing://smilingmiao?a=1&amp;b=2</span><br><span class="line">&#123;</span><br><span class="line">    UIApplicationOpenURLOptionsOpenInPlaceKey = 0;</span><br><span class="line">    UIApplicationOpenURLOptionsSourceApplicationKey = &quot;com.apple.mobilesafari&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€“ EOF â€“</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ‰ä¸ªéœ€æ±‚ï¼Œå¸Œæœ›æˆ‘ä»¬åœ¨åº”ç”¨å†…æ‰“å‡ºå»ç”µè¯æ—¶ï¼Œè®©æˆ‘ä»¬çš„ app æ˜¾ç¤ºåœ¨æœ€å‰é¢ï¼Œå°†æ‰“ç”µè¯ç•Œé¢ç½®äºåé¢ã€‚å¤§æ¦‚è¿™ç±»éœ€æ±‚å¤ªå°‘ï¼Œç½‘ä¸Šå¹¶æ²¡æ‰¾åˆ°ä»»ä½•èµ„æ–™ã€‚æœ¬æ¥æˆ‘æ˜¯æƒ³ç€åœ¨æ‹¨å‡ºå»ç”µè¯æ—¶å€™å…ˆé€šè¿‡æ–¹æ³•ï¼š&lt;/p&gt;</summary>
    
    
    
    
    <category term="æ‰“ç”µè¯" scheme="https://github.com/smilingmiao/tags/%E6%89%93%E7%94%B5%E8%AF%9D/"/>
    
  </entry>
  
  <entry>
    <title>é“¾æ¥å™¨ï¼šåŠ¨æ€åº“åŠ è½½å®è·µè¿‡ç¨‹</title>
    <link href="https://github.com/smilingmiao/2019/03/23/the-linker-load-process/"/>
    <id>https://github.com/smilingmiao/2019/03/23/the-linker-load-process/</id>
    <published>2019-03-22T16:00:00.000Z</published>
    <updated>2020-05-17T16:22:45.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="step-1"><a href="#step-1" class="headerlink" title="step 1"></a>step 1</h4><p>ç°æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œä»£ç åˆ†åˆ«å¦‚ä¸‹ï¼š</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// Boy.h</span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">@interface Boy : NSObject</span><br><span class="line">- (void)say;</span><br><span class="line">@end </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// Boy.m</span><br><span class="line">#import &quot;Boy.h&quot;</span><br><span class="line">@implementation Boy</span><br><span class="line">- (void)say</span><br><span class="line">&#123;</span><br><span class="line">    NSLog(@&quot;hi there again!\n&quot;);</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// main.m</span><br><span class="line">#import &quot;Boy.h&quot;</span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    @autoreleasepool &#123;</span><br><span class="line">        Boy *boy = [[Boy alloc] init];</span><br><span class="line">        [boy say];</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="step-2"><a href="#step-2" class="headerlink" title="step 2"></a>step 2</h4><p>ç¼–è¯‘ <code>.m</code> æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcrun clang -c Boy.m main.m</span><br></pre></td></tr></table></figure><p>äº§ç‰©</p><img src="/2019/03/23/the-linker-load-process/compile-derived.png" class=""><h4 id="step-3"><a href="#step-3" class="headerlink" title="step 3"></a>step 3</h4><p>å°†ç¼–è¯‘åçš„ <code>.o</code> æ–‡ä»¶é“¾æ¥èµ·æ¥ç”Ÿæˆ <code>a.out</code> å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆ<code>a.out</code> æ˜¯ç¼–è¯‘å™¨çš„é»˜è®¤åå­—ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcrun clang main.o Boy.o -Wl,`xcrun --show-sdk-path`/System/Library/Frameworks/Foundation.framework/Foundation</span><br></pre></td></tr></table></figure><p>äº§ç‰©</p><img src="/2019/03/23/the-linker-load-process/link-derived.png" class=""><h4 id="step-4"><a href="#step-4" class="headerlink" title="step 4"></a>step 4</h4><p>ä½¿ç”¨ <code>nm</code> å‘½ä»¤æŸ¥çœ‹ç¬¦å·è¡¨è§„å®šçš„ç¬¦å·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nm main.o</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">                 U _OBJC_CLASS_$_Boy</span><br><span class="line">0000000000000000 T _main</span><br><span class="line">                 U _objc_autoreleasePoolPop</span><br><span class="line">                 U _objc_autoreleasePoolPush</span><br><span class="line">                 U _objc_msgSend</span><br></pre></td></tr></table></figure><p>çœ‹å¾—äººäº‘é‡Œé›¾é‡Œï¼Œåªçœ‹åˆ°äº†äº›ç¬¦å·ï¼Œä¼¼ä¹ç¼ºå°‘ä¸€äº›ä¿¡æ¯ã€‚æ¯”å¦‚ <code>U</code> å’Œ <code>T</code> åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Œå†è¯•è¯•åˆ«çš„å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcrun nm -nm main.o</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">                 (undefined) external _OBJC_CLASS_$_Boy</span><br><span class="line">                 (undefined) external _objc_autoreleasePoolPop</span><br><span class="line">                 (undefined) external _objc_autoreleasePoolPush</span><br><span class="line">                 (undefined) external _objc_msgSend</span><br><span class="line">0000000000000000 (__TEXT,__text) external _main</span><br></pre></td></tr></table></figure><p>é™¤äº†æŠŠ <code>U</code> æ›¿æ¢æˆæˆ‘ä»¬èƒ½çœ‹æ‡‚çš„å•è¯ <code>undefined-æœªå®šä¹‰</code> ä»¥åŠ <code>T</code> å˜æˆ <code>TEXT</code> å¤–ï¼Œè¿˜åœ¨åŸæ¥çš„ä¿¡æ¯ä¸Šåˆå¤šäº† <code>external</code> ä»£è¡¨ â€œéç§æœ‰â€ã€‚<code>external _main</code> è¡¨ç¤º <code>main()</code> å‡½æ•°å¤„ç† 0 åœ°å€ï¼Œè®°å½•åœ¨ <code>TEXT</code> æ®µ <code>__text</code> é‡Œã€‚</p><p>å†çœ‹ä¸‹ <code>Boy.o</code> æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcrun nm -nm Boy.o</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">                 (undefined) external _NSLog</span><br><span class="line">                 (undefined) external _OBJC_CLASS_$_NSObject</span><br><span class="line">                 (undefined) external _OBJC_METACLASS_$_NSObject</span><br><span class="line">                 (undefined) external ___CFConstantStringClassReference</span><br><span class="line">                 (undefined) external __objc_empty_cache</span><br><span class="line">0000000000000000 (__TEXT,__text) non-external -[Boy say]</span><br><span class="line">0000000000000060 (__DATA,__objc_const) non-external l_OBJC_METACLASS_RO_$_Boy</span><br><span class="line">00000000000000a8 (__DATA,__objc_const) non-external l_OBJC_$_INSTANCE_METHODS_Boy</span><br><span class="line">00000000000000c8 (__DATA,__objc_const) non-external l_OBJC_CLASS_RO_$_Boy</span><br><span class="line">0000000000000110 (__DATA,__objc_data) external _OBJC_METACLASS_$_Boy</span><br><span class="line">0000000000000138 (__DATA,__objc_data) external _OBJC_CLASS_$_Boy</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ <code>undefined</code> ç¬¦å·è¡¨ç¤ºè¯¥æ–‡ä»¶ç±»æœªå®šä¹‰ï¼Œå› æ­¤åœ¨ç›®æ ‡æ–‡ä»¶å’Œ <code>Foundation framework</code> åŠ¨æ€é“¾æ¥åº“è¿›è¡Œé“¾æ¥æ—¶å€™ï¼Œé“¾æ¥å™¨ä¼šå°è¯•è§£ææ‰€æœ‰çš„ <code>undefined</code> ç¬¦å·ã€‚</p><h4 id="step-5"><a href="#step-5" class="headerlink" title="step 5"></a>step 5</h4><p>ä½¿ç”¨ <code>nm</code> å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹ <code>a.out</code> ç¬¦å·è¡¨ï¼Œå¯¹æ¯”ç€ <code>Boy.o</code> çœ‹çœ‹è¿æ¥å™¨è§£æç¬¦å·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xcrun nm -nm a.out</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">                 (undefined) external _NSLog (from Foundation)</span><br><span class="line">                 (undefined) external _OBJC_CLASS_$_NSObject (from libobjc)</span><br><span class="line">                 (undefined) external _OBJC_METACLASS_$_NSObject (from libobjc)</span><br><span class="line">                 (undefined) external ___CFConstantStringClassReference (from CoreFoundation)</span><br><span class="line">                 (undefined) external __objc_empty_cache (from libobjc)</span><br><span class="line">                 (undefined) external _objc_autoreleasePoolPop (from libobjc)</span><br><span class="line">                 (undefined) external _objc_autoreleasePoolPush (from libobjc)</span><br><span class="line">                 (undefined) external _objc_msgSend (from libobjc)</span><br><span class="line">                 (undefined) external dyld_stub_binder (from libSystem)</span><br><span class="line">0000000100000000 (__TEXT,__text) [referenced dynamically] external __mh_execute_header</span><br><span class="line">0000000100000ea0 (__TEXT,__text) external _main</span><br><span class="line">0000000100000f20 (__TEXT,__text) non-external -[Boy say]</span><br><span class="line">0000000100001130 (__DATA,__objc_data) external _OBJC_METACLASS_$_Boy</span><br><span class="line">0000000100001158 (__DATA,__objc_data) external _OBJC_CLASS_$_Boy</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é‡ç‚¹å…³æ³¨ <code>undefined</code> ç¬¦å·è¿›è¡Œå¯¹æ¯”ã€‚å†ç”¨ğŸ‘‡å‘½ä»¤çœ‹çœ‹ç¬¦å·æ‰€éœ€çš„åº“çš„è·¯å¾„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xcrun otool -L a.out</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a.out:</span><br><span class="line">/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 1560.12.0)</span><br><span class="line">/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1252.200.5)</span><br><span class="line">/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1560.12.0)</span><br><span class="line">/usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»è¾“å‡ºç»“æœæ¥çœ‹ï¼Œè¿™äº› <code>undefined</code> ç¬¦å·éœ€è¦çš„ä¸¤ä¸ªåº“åˆ†åˆ«æ˜¯ <code>libSystem</code> å’Œ <code>libobjc</code>ã€‚</p><h4 id="step-6"><a href="#step-6" class="headerlink" title="step 6"></a>step 6</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(export DYLD_PRINT_LIBRARIES=; ./a.out)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">dyld: loaded: /Users/miaoyongxiang/Desktop/./a.out</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation</span><br><span class="line">dyld: loaded: /usr/lib/libSystem.B.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation</span><br><span class="line">dyld: loaded: /usr/lib/libobjc.A.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libauto.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration</span><br><span class="line">dyld: loaded: /usr/lib/libarchive.2.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libDiagnosticMessagesClient.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libicucore.A.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libxml2.2.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libz.1.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CFNetwork.framework/Versions/A/CFNetwork</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices</span><br><span class="line">dyld: loaded: /usr/lib/liblangid.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit</span><br><span class="line">dyld: loaded: /usr/lib/libCRFSuite.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libc++.1.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libc++abi.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libcache.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libcommonCrypto.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libcompiler_rt.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libcopyfile.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libcorecrypto.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libdispatch.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libdyld.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libkeymgr.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/liblaunch.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libmacho.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libquarantine.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libremovefile.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_asl.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_blocks.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_c.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_configuration.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_coreservices.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_darwin.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_dnssd.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_info.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_m.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_malloc.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_networkextension.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_notify.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_sandbox.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_secinit.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_kernel.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_platform.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_pthread.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_symptoms.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libsystem_trace.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libunwind.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libxpc.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Security.framework/Versions/A/Security</span><br><span class="line">dyld: loaded: /usr/lib/libenergytrace.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libbsm.0.dylib</span><br><span class="line">dyld: loaded: /usr/lib/system/libkxld.dylib</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/AppleFSCompression.framework/Versions/A/AppleFSCompression</span><br><span class="line">dyld: loaded: /usr/lib/libOpenScriptingUtil.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libcoretls.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libcoretls_cfhelpers.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libpam.2.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libsqlite3.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libxar.1.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libbz2.1.0.dylib</span><br><span class="line">dyld: loaded: /usr/lib/liblzma.5.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libnetwork.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libapple_nghttp2.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libpcap.A.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/FSEvents.framework/Versions/A/FSEvents</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SharedFileList.framework/Versions/A/SharedFileList</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/NetFS.framework/Versions/A/NetFS</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/NetAuth.framework/Versions/A/NetAuth</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/login.framework/Versions/A/Frameworks/loginsupport.framework/Versions/A/loginsupport</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/TCC.framework/Versions/A/TCC</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/CoreNLP.framework/Versions/A/CoreNLP</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/MetadataUtilities.framework/Versions/A/MetadataUtilities</span><br><span class="line">dyld: loaded: /usr/lib/libmecabra.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreText.framework/Versions/A/CoreText</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ImageIO.framework/Versions/A/ImageIO</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ColorSync.framework/Versions/A/ColorSync</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSyncLegacy.framework/Versions/A/ColorSyncLegacy</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/SkyLight.framework/Versions/A/SkyLight</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/IOSurface.framework/Versions/A/IOSurface</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate</span><br><span class="line">dyld: loaded: /usr/lib/libcompression.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreDisplay.framework/Versions/A/CoreDisplay</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Metal.framework/Versions/A/Metal</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/MetalPerformanceShaders.framework/Versions/A/MetalPerformanceShaders</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/MultitouchSupport.framework/Versions/A/MultitouchSupport</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLinearAlgebra.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libSparseBLAS.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libQuadrature.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBNNS.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libSparse.dylib</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/GPUWrangler.framework/Versions/A/GPUWrangler</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/IOAccelerator.framework/Versions/A/IOAccelerator</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/IOPresentment.framework/Versions/A/IOPresentment</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/DSExternalDisplay.framework/Versions/A/DSExternalDisplay</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreFSCache.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSCore.framework/Versions/A/MPSCore</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSImage.framework/Versions/A/MPSImage</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSNeuralNetwork.framework/Versions/A/MPSNeuralNetwork</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSMatrix.framework/Versions/A/MPSMatrix</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSRayIntersector.framework/Versions/A/MPSRayIntersector</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/MetalTools.framework/Versions/A/MetalTools</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/AggregateDictionary.framework/Versions/A/AggregateDictionary</span><br><span class="line">dyld: loaded: /usr/lib/libMobileGestalt.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreImage.framework/Versions/A/CoreImage</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/GraphVisualizer.framework/Versions/A/GraphVisualizer</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/FaceCore.framework/Versions/A/FaceCore</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/OpenCL.framework/Versions/A/OpenCL</span><br><span class="line">dyld: loaded: /usr/lib/libFosl_dynamic.dylib</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/OTSVG.framework/Versions/A/OTSVG</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontParser.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontRegistry.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libJP2.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/AppleJPEG.framework/Versions/A/AppleJPEG</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGFXShared.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCVMSPluginSupport.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreVMClient.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libcups.2.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/GSS.framework/Versions/A/GSS</span><br><span class="line">dyld: loaded: /usr/lib/libresolv.9.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libiconv.2.dylib</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/Heimdal.framework/Versions/A/Heimdal</span><br><span class="line">dyld: loaded: /usr/lib/libheimdal-asn1.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/OpenDirectory.framework/Versions/A/OpenDirectory</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/CommonAuth.framework/Versions/A/CommonAuth</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/APFS.framework/Versions/A/APFS</span><br><span class="line">dyld: loaded: /usr/lib/libutil.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libcharset.1.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/AppleSauce.framework/Versions/A/AppleSauce</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/AssertionServices.framework/Versions/A/AssertionServices</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/BaseBoard.framework/Versions/A/BaseBoard</span><br><span class="line">dyld: loaded: /usr/lib/libmecab.1.0.0.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libgermantok.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libThaiTokenizer.dylib</span><br><span class="line">dyld: loaded: /usr/lib/libChineseTokenizer.dylib</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/LanguageModeling.framework/Versions/A/LanguageModeling</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/CoreEmoji.framework/Versions/A/CoreEmoji</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/Lexicon.framework/Versions/A/Lexicon</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/LinguisticData.framework/Versions/A/LinguisticData</span><br><span class="line">dyld: loaded: /usr/lib/libcmph.dylib</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData</span><br><span class="line">dyld: loaded: /System/Library/Frameworks/ServiceManagement.framework/Versions/A/ServiceManagement</span><br><span class="line">dyld: loaded: /System/Library/PrivateFrameworks/BackgroundTaskManagement.framework/Versions/A/BackgroundTaskManagement</span><br><span class="line">dyld: loaded: /usr/lib/libxslt.1.dylib</span><br><span class="line">dyld: loaded: /System/Library/CoreServices/Encodings/libSimplifiedChineseConverter.dylib</span><br><span class="line">2019-03-22 13:59:21.000 a.out[2048:178438] hi there again!</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯è§ï¼ŒåŠ è½½çš„åº“éå¸¸å¤šï¼Œå¹¶ä¸” <code>.dylib</code> ç±»åŠ¨æ€é“¾æ¥çš„åº“ä¹Ÿå å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚</p><p>â€“ EOF â€“</p><h1 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h1><p><a href="https://objccn.io/issue-6-3/">https://objccn.io/issue-6-3/</a></p><p><a href="https://developer.apple.com/library/archive/documentation/System/Conceptual/ManPages_iPhoneOS/man3/intro.3.html">https://developer.apple.com/library/archive/documentation/System/Conceptual/ManPages_iPhoneOS/man3/intro.3.html</a></p><p><a href="https://opensource.apple.com/tarballs/">https://opensource.apple.com/tarballs/</a></p><p><a href="https://blog.cnbluebox.com/blog/2017/06/20/dyldyu-objc/">https://blog.cnbluebox.com/blog/2017/06/20/dyldyu-objc/</a></p><p><a href="https://www.mikeash.com/pyblog/friday-qa-2012-11-09-dyld-dynamic-linking-on-os-x.html">https://www.mikeash.com/pyblog/friday-qa-2012-11-09-dyld-dynamic-linking-on-os-x.html</a></p><p><a href="http://blog.cnbang.net/tech/3219/">http://blog.cnbang.net/tech/3219/</a></p><p><a href="https://stackoverflow.com/questions/7221141/any-difference-between-wl-option-and-xlinker-option-syntax-for-gcc">https://stackoverflow.com/questions/7221141/any-difference-between-wl-option-and-xlinker-option-syntax-for-gcc</a></p><p><a href="https://gcc.gnu.org/onlinedocs/gcc-7.3.0/gcc/Link-Options.html#Link-Options">https://gcc.gnu.org/onlinedocs/gcc-7.3.0/gcc/Link-Options.html#Link-Options</a></p>]]></content>
    
    
    <summary type="html">&lt;h4 id=&quot;step-1&quot;&gt;&lt;a href=&quot;#step-1&quot; class=&quot;headerlink&quot; title=&quot;step 1&quot;&gt;&lt;/a&gt;step 1&lt;/h4&gt;&lt;p&gt;ç°æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œä»£ç åˆ†åˆ«å¦‚ä¸‹ï¼š&lt;/p&gt;</summary>
    
    
    
    
    <category term="éšæ‰‹ç¬”è®°" scheme="https://github.com/smilingmiao/tags/%E9%9A%8F%E6%89%8B%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>UITableViewCell è‡ªé€‚åº”é«˜åº¦</title>
    <link href="https://github.com/smilingmiao/2019/03/20/Self-adaptive-UITableViewCell-Height/"/>
    <id>https://github.com/smilingmiao/2019/03/20/Self-adaptive-UITableViewCell-Height/</id>
    <published>2019-03-19T16:00:00.000Z</published>
    <updated>2020-05-17T16:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Masonry"><a href="#Masonry" class="headerlink" title="Masonry"></a>Masonry</h3><p>åœ¨æˆ´é“­è€å¸ˆçš„ä¸“æ ç¬¬ä¸‰ç¯‡<a href="https://time.geekbang.org/column/article/85332">æ–‡ç« </a>ï¼Œè¯„è®ºä¸­æœ‰äººæåˆ°ä½¿ç”¨ AutoLayout å¸ƒå±€æ¥å®ç° UITableViewCell é«˜åº¦è‡ªé€‚åº”çš„é—®é¢˜ã€‚åœ¨è¯„è®ºä¸­ï¼Œæˆ´é“­è€å¸ˆç»™å‡ºäº†è§£å†³<a href="https://github.com/ming1016/study/wiki/Masonry">æ–¹æ¡ˆ</a>ã€‚æˆ‘ç»è¿‡è‡ªå·±å†™ demo å®è·µäº†ä¸€ä¸‹çš„ç¡®æ˜¯å¯ä»¥çš„ï¼Œå½“ç„¶ç›´æ¥ä½¿ç”¨ Xib å¸ƒå±€å¥½åŠ è½½åˆ° UITableView ä¸­ä¹Ÿè¡Œã€‚åœ¨è¯» <a href="https://github.com/SnapKit/Masonry">Masonry</a> æºç è¿‡ç¨‹ä¸­ï¼Œæˆ‘æƒŠå¹äºä½œè€…ä½¿ç”¨ block çš„å·§å¦™æ€è·¯ï¼Œç®€ç›´å¯ä»¥å« Blocksonry äº†ã€‚é€šè¿‡ chainable syntax ç‚¹è¯­æ³•è¿”å›å¯¹è±¡æˆ– blockï¼Œè¿™æ ·å°±ç‚¹ç‚¹ç‚¹å°±å®Œæˆäº†ä¸€ç³»åˆ—å‡½æ•°è°ƒç”¨ï¼Œå®åœ¨å·§å¦™ã€‚ä¸‹é¢æ˜¯ä¸ªä¾‹å­ã€‚</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[subview mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.top.equalTo(superview.mas_top).offset(10);</span><br><span class="line">    make.leading.equalTo(superview.mas_leading).offset(10);</span><br><span class="line">    make.trailing.equalTo(superview.mas_trailing).offset(-10);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p><code>Masonry</code> é€šè¿‡åˆ†ç±» <code>View+MASAdditions</code> ä½œä¸ºè°ƒç”¨å…¥å£ï¼Œè¿™æ · UIView ç±»ç°‡çš„æ‰€æœ‰ç±»éƒ½å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚<code>MASConstraintMaker</code> æ˜¯ä¸€ä¸ªå¸ƒå±€å¯¹è±¡ï¼Œ<code>subview</code> è°ƒç”¨æ–¹æ³• <code>mas_makeConstraints:^(...)</code> åï¼Œ<code>MASConstraintMaker</code> å®ä¾‹ä¼šè¢«åˆ›å»ºå¹¶ä¸”ä»¥ <code>weak</code> å’Œ <code>readonly</code> æ–¹å¼æŒæœ‰ <code>subview</code>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MASConstraintMaker *constraintMaker = [[MASConstraintMaker alloc] initWithView:self];</span><br></pre></td></tr></table></figure><p>ç´§æ¥ç€ï¼Œ<code>MASConstraintMaker</code> å®ä¾‹ <code>make</code> è¢« block å›è°ƒä»¥å‚æ•°çš„æ–¹å¼ä¼ é€’åˆ°æˆ‘ä»¬ç¼–å†™çš„ä»£ç åœ¨ä¸­ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ª <code>make</code> è®¾ç½®æ‰€æœ‰éœ€è¦çš„å¸ƒå±€æ“ä½œäº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">block(constraintMaker);</span><br></pre></td></tr></table></figure><p>æ¥åˆ†æå®Œæˆä¸€ä¸ªå¸ƒå±€å±æ€§ <code>top</code> çš„è¿‡ç¨‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make.top.equalTo(superview.mas_top).offset(10);</span><br></pre></td></tr></table></figure><ol><li><code>.top</code> ç”Ÿæˆä¸€ä¸ª <code>MASViewConstraint: MASConstraint</code> çº¦æŸå®ä¾‹ <code>constraint</code>ï¼Œå¹¶åŠ å…¥åˆ° <code>make</code> æŒæœ‰çš„ <code>constraints</code> æ•°ç»„ä¸­ã€‚æœ€åå†æŠŠè¿™ä¸ª <code>constraint</code> è¿”å›ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[self.constraints addObject:newConstraint];</span><br></pre></td></tr></table></figure><ol start="2"><li><code>.equalTo</code> è¿”å›ä¸€ä¸ªæ¥å— <code>MASViewConstraint</code> å®ä¾‹ä¸ºå‚æ•°çš„ blockï¼Œæ¥ç€å°† <code>superview.mas_top</code> ç”Ÿæˆçš„ <code>MASViewConstraint</code> å®ä¾‹ä¼ å…¥ block å®ç°è°ƒç”¨ã€‚è°ƒç”¨å®Œæˆåè¿”å›ğŸ‘†<strong>1</strong> ä¸­çš„ <code>constraint</code>ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (MASViewAttribute *)mas_top &#123;</span><br><span class="line">    return [[MASViewAttribute alloc] initWithView:self layoutAttribute:NSLayoutAttributeTop];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li><code>.offet</code> è¿˜æ˜¯ç…§ä¾‹è¿”å›ä¸€ä¸ªæ¥å—å‚æ•°ç±»å‹ä¸º <code>CGFloat</code> çš„ blockï¼Œæ¥ç€å°† <code>10</code> ä¼ è¿›å»è°ƒç”¨ block å¹¶è¿”å› <code>self</code> ä¹Ÿå°±æ˜¯ 1 ä¸­çš„ <code>constraint</code>ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (MASConstraint * (^)(CGFloat))offset &#123;</span><br><span class="line">    return ^id(CGFloat offset)&#123;</span><br><span class="line">        self.offset = offset;</span><br><span class="line">        return self;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½®å®Œæ‰€æœ‰éœ€è¦çš„å¸ƒå±€å±æ€§åï¼Œæœ€åå†æ‰§è¡Œ <code>[constraintMaker install]</code>ï¼Œè¿™ä¸€æ­¥ä¼šå°† <code>constraintMaker</code> ä¹Ÿå°±æ˜¯å›è°ƒå‚æ•°çš„ <code>make</code> æ‰€æŒæœ‰çš„ <code>constraints</code> æ•°ç»„é‡Œçš„æ‰€æœ‰ <code>constraint</code> çœŸæ­£ <code>install</code> åˆ°å¸ƒå±€é‡Œé¢ï¼ˆå…¶å®çœŸæ­£åšçš„äº‹æƒ…æ˜¯ <code>[superview addConstraint:]</code>ï¼‰ï¼Œæœ€åå†å°† <code>constraints</code> è¿”å›ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return [constraintMaker install];</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NSArray *constraints = self.constraints.copy;</span><br><span class="line">for (MASConstraint *constraint in constraints) &#123;</span><br><span class="line">    [constraint install];</span><br><span class="line">&#125;</span><br><span class="line">[self.constraints removeAllObjects];</span><br><span class="line">return constraints;</span><br></pre></td></tr></table></figure><p>æ›´å¤šç»†èŠ‚è¿™é‡Œå°±ä¸è¯¦ç»†å±•å¼€äº†ã€‚ä¸‹é¢æ˜¯å®è·µçš„éƒ¨åˆ†ä»£ç ã€‚</p><h3 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h3><ol><li>ä½¿ç”¨ <code>Masonry</code> è¿›è¡Œå¯¹ <code>UITableViewCell</code> å­è§†å›¾è¿›è¡Œå¸ƒå±€ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/// add constraints for titleLabel</span><br><span class="line">[_titleLabel mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.top.equalTo(superview.mas_top).offset(20);</span><br><span class="line">    make.leading.equalTo(superview.mas_leading).offset(10);</span><br><span class="line">    make.trailing.equalTo(superview.mas_trailing).offset(-10);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">/// add constraints for contentLabel</span><br><span class="line">[_contentLabel mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.top.equalTo(self.titleLabel.mas_bottom).offset(10);</span><br><span class="line">    make.leading.equalTo(self.titleLabel.mas_leading).offset(0);</span><br><span class="line">    make.trailing.equalTo(self.titleLabel.mas_trailing).offset(0);</span><br><span class="line">    make.bottom.equalTo(superview.mas_bottom).offset(-10);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨ç¬¬ä¸€ç§åŸç”Ÿçš„è‡ªåŠ¨å¸ƒå±€æ–¹å¼</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">/// add constraints for titleLabel</span><br><span class="line">[superview addConstraint:[NSLayoutConstraint constraintWithItem:_titleLabel</span><br><span class="line">                                                      attribute:NSLayoutAttributeTop</span><br><span class="line">                                                      relatedBy:NSLayoutRelationEqual</span><br><span class="line">                                                         toItem:superview</span><br><span class="line">                                                      attribute:NSLayoutAttributeTop</span><br><span class="line">                                                     multiplier:1.0</span><br><span class="line">                                                       constant:20.0]];</span><br><span class="line">[superview addConstraint:[NSLayoutConstraint constraintWithItem:_titleLabel</span><br><span class="line">                                                      attribute:NSLayoutAttributeLeading</span><br><span class="line">                                                      relatedBy:NSLayoutRelationEqual</span><br><span class="line">                                                         toItem:superview</span><br><span class="line">                                                      attribute:NSLayoutAttributeLeading</span><br><span class="line">                                                     multiplier:1.0</span><br><span class="line">                                                       constant:10.0]];</span><br><span class="line">[superview addConstraint:[NSLayoutConstraint constraintWithItem:_titleLabel</span><br><span class="line">                                                      attribute:NSLayoutAttributeTrailing</span><br><span class="line">                                                      relatedBy:NSLayoutRelationEqual</span><br><span class="line">                                                         toItem:superview</span><br><span class="line">                                                      attribute:NSLayoutAttributeTrailing</span><br><span class="line">                                                     multiplier:1.0</span><br><span class="line">                                                       constant:-10.0]];</span><br><span class="line"></span><br><span class="line">/// add constraints for contentLabel</span><br><span class="line">[superview addConstraint:[NSLayoutConstraint constraintWithItem:_contentLabel</span><br><span class="line">                                                      attribute:NSLayoutAttributeTop</span><br><span class="line">                                                      relatedBy:NSLayoutRelationEqual</span><br><span class="line">                                                         toItem:_titleLabel</span><br><span class="line">                                                      attribute:NSLayoutAttributeBottom</span><br><span class="line">                                                     multiplier:1.0</span><br><span class="line">                                                       constant:10.0]];</span><br><span class="line">[superview addConstraint:[NSLayoutConstraint constraintWithItem:_contentLabel</span><br><span class="line">                                                      attribute:NSLayoutAttributeLeading</span><br><span class="line">                                                      relatedBy:NSLayoutRelationEqual</span><br><span class="line">                                                         toItem:_titleLabel</span><br><span class="line">                                                      attribute:NSLayoutAttributeLeading</span><br><span class="line">                                                     multiplier:1.0 constant:0.0]];</span><br><span class="line">[superview addConstraint:[NSLayoutConstraint constraintWithItem:_contentLabel</span><br><span class="line">                                                      attribute:NSLayoutAttributeTrailing</span><br><span class="line">                                                      relatedBy:NSLayoutRelationEqual</span><br><span class="line">                                                         toItem:_titleLabel</span><br><span class="line">                                                      attribute:NSLayoutAttributeTrailing</span><br><span class="line">                                                     multiplier:1.0</span><br><span class="line">                                                       constant:0.0]];</span><br><span class="line">[superview addConstraint:[NSLayoutConstraint constraintWithItem:_contentLabel</span><br><span class="line">                                                      attribute:NSLayoutAttributeBottom</span><br><span class="line">                                                      relatedBy:NSLayoutRelationEqual</span><br><span class="line">                                                         toItem:superview</span><br><span class="line">                                                      attribute:NSLayoutAttributeBottom</span><br><span class="line">                                                     multiplier:1.0</span><br><span class="line">                                                       constant:-10.0]];</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨ç¬¬äºŒç§åŸç”Ÿè‡ªåŠ¨å¸ƒå±€çš„æ–¹å¼</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/// add constraints for titleLabel</span><br><span class="line">[superview addConstraint:[_titleLabel.topAnchor constraintEqualToAnchor:superview.topAnchor constant:20]];</span><br><span class="line">[superview addConstraint:[_titleLabel.leadingAnchor constraintEqualToAnchor:superview.leadingAnchor constant:10]];</span><br><span class="line">[superview addConstraint:[_titleLabel.trailingAnchor constraintEqualToAnchor:superview.trailingAnchor constant:-10]];</span><br><span class="line"></span><br><span class="line">/// add constraints for contentLabel</span><br><span class="line">[superview addConstraint:[_contentLabel.topAnchor constraintEqualToAnchor:_titleLabel.bottomAnchor constant:10]];</span><br><span class="line">[superview addConstraint:[_contentLabel.leadingAnchor constraintEqualToAnchor:_titleLabel.leadingAnchor constant:0]];</span><br><span class="line">[superview addConstraint:[_contentLabel.trailingAnchor constraintEqualToAnchor:_titleLabel.trailingAnchor constant:0]];</span><br><span class="line">[superview addConstraint:[_contentLabel.bottomAnchor constraintEqualToAnchor:superview.bottomAnchor constant:-10]];</span><br></pre></td></tr></table></figure><p>ç”±ä¸Šé¢å¯ä»¥çœ‹å‡ºç¬¬ä¸€ç§å’Œç¬¬ä¸‰ç§æ–¹å¼çš„ä»£ç é‡å·²ç»å¾ˆæ¥è¿‘äº†ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼æ›¿æ¢æ‰ç¬¬ä¸€ç§ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ä½¿ç”¨ <b><font size=4, color=#32CD32>åŸç”Ÿ</font></b> çš„è‡ªåŠ¨å¸ƒå±€æ–¹å¼ï¼Œå¿…é¡»è¦è®¾ç½® <code>view.translatesAutoresizingMaskIntoConstraints = NO</code>ï¼Œå¦åˆ™çº¦æŸä¼šæŠ¥é”™ã€‚</p><p>åœ¨ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼çš„æ—¶å€™ï¼Œå¯¹ <code>.leadingAnchor</code> å’Œ <code>.leftAnchor</code> ä»¥åŠ <code>trailingAnchor</code> å’Œ <code>rightAnchor</code> çš„å·®åˆ«äº§ç”Ÿäº†çº ç»“ã€‚</p><h5 id="leadingAnchor"><a href="#leadingAnchor" class="headerlink" title="leadingAnchor"></a>leadingAnchor</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A layout anchor representing the leading edge of the viewâ€™s frame.</span><br></pre></td></tr></table></figure><h5 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Use this anchor to create constraints with the viewâ€™s leading edge. You can combine this anchor only with a subset of the NSLayoutXAxisAnchor anchors. You can combine a UIView with another leadingAnchor, a trailingAnchor, or a centerXAnchor. For more information, see NSLayoutAnchor.</span><br></pre></td></tr></table></figure><hr><h5 id="leftAnchor"><a href="#leftAnchor" class="headerlink" title="leftAnchor"></a>leftAnchor</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A layout anchor representing the left edge of the viewâ€™s frame.</span><br></pre></td></tr></table></figure><h5 id="Discussion-1"><a href="#Discussion-1" class="headerlink" title="Discussion"></a>Discussion</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Use this anchor to create constraints with the viewâ€™s left edge. You can combine this anchor only with a subset of the NSLayoutXAxisAnchor anchors. You can combine a UIView with another leftAnchor, a rightAnchor, or a centerXAnchor. For more information, see NSLayoutAnchor.</span><br></pre></td></tr></table></figure><p>å¯¹æ¯”è¿™ä¸Šé¢çœ‹äº†åå‘ç°å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚äºæ˜¯åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ä¸€é¡¿æ‰¾ï¼Œç»ˆäºåœ¨ <a href="https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/AnatomyofaConstraint.html#//apple_ref/doc/uid/TP40010853-CH9-SW1">Anatomy of a Constraint</a> æ‰¾åˆ°äº†åŒºåˆ«çš„å¯¹æ¯”è¡¨ã€‚ä¸€ç›®äº†ç„¶ï¼ŒåŸæ¥æ˜¯å’Œå¸ƒå±€æ–¹å‘æœ‰å…³ã€‚</p><img src="/2019/03/20/Self-adaptive-UITableViewCell-Height/leading-vs-left-and-trailing-vs-right.jpg" class=""><p><b><font size=4, color=#32CD32> Demo åœ°å€ <a href="https://github.com/smilingmiao/UITableViewFittingHeight">GitHub</a> </font></b></p><p>â€“ EOF â€“</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/AnatomyofaConstraint.html#//apple_ref/doc/uid/TP40010853-CH9-SW1">https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/AnatomyofaConstraint.html#//apple_ref/doc/uid/TP40010853-CH9-SW1</a></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;Masonry&quot;&gt;&lt;a href=&quot;#Masonry&quot; class=&quot;headerlink&quot; title=&quot;Masonry&quot;&gt;&lt;/a&gt;Masonry&lt;/h3&gt;&lt;p&gt;åœ¨æˆ´é“­è€å¸ˆçš„ä¸“æ ç¬¬ä¸‰ç¯‡&lt;a href=&quot;https://time.geekbang.org/column/article/85332&quot;&gt;æ–‡ç« &lt;/a&gt;ï¼Œè¯„è®ºä¸­æœ‰äººæåˆ°ä½¿ç”¨ AutoLayout å¸ƒå±€æ¥å®ç° UITableViewCell é«˜åº¦è‡ªé€‚åº”çš„é—®é¢˜ã€‚åœ¨è¯„è®ºä¸­ï¼Œæˆ´é“­è€å¸ˆç»™å‡ºäº†è§£å†³&lt;a href=&quot;https://github.com/ming1016/study/wiki/Masonry&quot;&gt;æ–¹æ¡ˆ&lt;/a&gt;ã€‚æˆ‘ç»è¿‡è‡ªå·±å†™ demo å®è·µäº†ä¸€ä¸‹çš„ç¡®æ˜¯å¯ä»¥çš„ï¼Œå½“ç„¶ç›´æ¥ä½¿ç”¨ Xib å¸ƒå±€å¥½åŠ è½½åˆ° UITableView ä¸­ä¹Ÿè¡Œã€‚åœ¨è¯» &lt;a href=&quot;https://github.com/SnapKit/Masonry&quot;&gt;Masonry&lt;/a&gt; æºç è¿‡ç¨‹ä¸­ï¼Œæˆ‘æƒŠå¹äºä½œè€…ä½¿ç”¨ block çš„å·§å¦™æ€è·¯ï¼Œç®€ç›´å¯ä»¥å« Blocksonry äº†ã€‚é€šè¿‡ chainable syntax ç‚¹è¯­æ³•è¿”å›å¯¹è±¡æˆ– blockï¼Œè¿™æ ·å°±ç‚¹ç‚¹ç‚¹å°±å®Œæˆäº†ä¸€ç³»åˆ—å‡½æ•°è°ƒç”¨ï¼Œå®åœ¨å·§å¦™ã€‚ä¸‹é¢æ˜¯ä¸ªä¾‹å­ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="éšæ‰‹ç¬”è®°" scheme="https://github.com/smilingmiao/tags/%E9%9A%8F%E6%89%8B%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Git</title>
    <link href="https://github.com/smilingmiao/2019/03/18/git-newbie/"/>
    <id>https://github.com/smilingmiao/2019/03/18/git-newbie/</id>
    <published>2019-03-17T16:00:00.000Z</published>
    <updated>2020-05-31T15:19:47.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Git-æ¦‚è¿°"><a href="#Git-æ¦‚è¿°" class="headerlink" title=" Git æ¦‚è¿°Â "></a><font color=#32CD32> Git æ¦‚è¿°Â </font></h4><p><strong>Git</strong> æ˜¯ä¸€ä¸ª<strong>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶</strong>ï¼Œæœ€åˆç”±æ—çº³æ–¯Â·æ‰˜ç“¦å…¹åˆ›ä½œï¼Œäº 2005 å¹´ä»¥ GPL å‘å¸ƒã€‚æ—çº³æ–¯Â·æ‰˜ç“¦å…¹è‡ªå˜²åœ°å–äº†è¿™ä¸ªåå­— â€œgitâ€ï¼Œè¯¥è¯æºè‡ªè‹±å›½ä¿šè¯­ï¼Œæ„æ€å¤§çº¦æ˜¯â€œæ··è´¦â€ã€‚å®Œæ•´çš„å­¦ä¹ èµ„æ–™å¯ä»¥åœ¨ <a href="https://git-scm.com/book/zh/v2">è¿™é‡Œ</a> æ‰¾åˆ°ã€‚è½¯ä»¶å¯ä»¥åœ¨ <a href="https://git-scm.com/downloads">è¿™é‡Œ</a> æ‰¾åˆ°ã€‚</p><span id="more"></span><h4 id="Git-é…ç½®"><a href="#Git-é…ç½®" class="headerlink" title="Â Git é…ç½®Â "></a><font color=#32CD32>Â Git é…ç½®Â </font></h4><h6 id="Git-é…ç½®åˆ†ä¸ºä¸‰ç§ï¼šlocal-å’Œ-global-ä»¥åŠ-system"><a href="#Git-é…ç½®åˆ†ä¸ºä¸‰ç§ï¼šlocal-å’Œ-global-ä»¥åŠ-system" class="headerlink" title="Git é…ç½®åˆ†ä¸ºä¸‰ç§ï¼šlocal å’Œ global ä»¥åŠ system"></a>Git é…ç½®åˆ†ä¸ºä¸‰ç§ï¼š<code>local</code> å’Œ <code>global</code> ä»¥åŠ <code>system</code></h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">## æ·»åŠ é…ç½®</span><br><span class="line">git config [--local | --global | --system] user.name &#x27;Your name&#x27;</span><br><span class="line">git config [--local | --global | --system] user.email &#x27;Your email&#x27;</span><br><span class="line"></span><br><span class="line">## æŸ¥çœ‹é…ç½®</span><br><span class="line">git config --list [--local | --global | --system]</span><br><span class="line"></span><br><span class="line">## åŒºåˆ«</span><br><span class="line">local: ä½œç”¨äºæœ¬ä»“åº“</span><br><span class="line">global: ä½œç”¨äºå½“å‰ç”¨æˆ·çš„æ‰€æœ‰ä»“åº“</span><br><span class="line">system: ä½œç”¨äºæœ¬ç³»ç»Ÿçš„æ‰€æœ‰ç”¨æˆ·çš„æ‰€æœ‰ä»“åº“</span><br></pre></td></tr></table></figure><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œ<code>git config</code> éµå¾ªæœ€å°é…ç½®åŸåˆ™ï¼Œä¹Ÿå°±æ˜¯å¦‚æœåŒæ—¶è®¾ç½®äº† <code>local</code> å’Œ <code>global</code> çš„è¯ï¼Œé‚£ä¹ˆåªæœ‰ <code>local</code> ä¼šèµ·ä½œç”¨ã€‚</p><h4 id="åˆ›å»º-Git-ä»“åº“"><a href="#åˆ›å»º-Git-ä»“åº“" class="headerlink" title="Â åˆ›å»º Git ä»“åº“Â "></a><font color=#32CD32>Â åˆ›å»º Git ä»“åº“Â </font></h4><h6 id="å»ºä»“åº“åˆ†ä¸ºä¸¤ç§åœºæ™¯ï¼š"><a href="#å»ºä»“åº“åˆ†ä¸ºä¸¤ç§åœºæ™¯ï¼š" class="headerlink" title="å»ºä»“åº“åˆ†ä¸ºä¸¤ç§åœºæ™¯ï¼š"></a>å»ºä»“åº“åˆ†ä¸ºä¸¤ç§åœºæ™¯ï¼š</h6><ul><li>å°†å·²æœ‰çš„é¡¹ç›®ä½¿ç”¨ Git ç®¡ç†</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd é¡¹ç›®æ‰€åœ¨æ–‡ä»¶å¤¹</span><br><span class="line">git init</span><br></pre></td></tr></table></figure><ul><li>æ–°å»ºé¡¹ç›®å¹¶ç”¨ Git ç®¡ç†</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd å°†è¦å­˜æ”¾é¡¹ç›®çš„æ–‡ä»¶å¤¹</span><br><span class="line">git init project_directory</span><br><span class="line">cd project_directory</span><br></pre></td></tr></table></figure><h4 id="Git-æ–‡ä»¶é‡å‘½å"><a href="#Git-æ–‡ä»¶é‡å‘½å" class="headerlink" title=" Git æ–‡ä»¶é‡å‘½åÂ "></a><font color=#32CD32> Git æ–‡ä»¶é‡å‘½åÂ </font></h4><h6 id="é‡å‘½åæ¯”è¾ƒç®€å•ï¼Œç›´æ¥æ‰§è¡Œ"><a href="#é‡å‘½åæ¯”è¾ƒç®€å•ï¼Œç›´æ¥æ‰§è¡Œ" class="headerlink" title="é‡å‘½åæ¯”è¾ƒç®€å•ï¼Œç›´æ¥æ‰§è¡Œ"></a>é‡å‘½åæ¯”è¾ƒç®€å•ï¼Œç›´æ¥æ‰§è¡Œ</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git mv original_filename new_filename</span><br></pre></td></tr></table></figure><h4 id="Git-åˆ é™¤ä¸æƒ³è¦çš„åˆ†æ”¯"><a href="#Git-åˆ é™¤ä¸æƒ³è¦çš„åˆ†æ”¯" class="headerlink" title="Â Git åˆ é™¤ä¸æƒ³è¦çš„åˆ†æ”¯Â "></a><font color=#32CD32>Â Git åˆ é™¤ä¸æƒ³è¦çš„åˆ†æ”¯Â </font></h4><h6 id="æ‰¾åˆ°åˆ†æ”¯åï¼Œæ‰§è¡Œåˆ é™¤å‘½ä»¤"><a href="#æ‰¾åˆ°åˆ†æ”¯åï¼Œæ‰§è¡Œåˆ é™¤å‘½ä»¤" class="headerlink" title="æ‰¾åˆ°åˆ†æ”¯åï¼Œæ‰§è¡Œåˆ é™¤å‘½ä»¤"></a>æ‰¾åˆ°åˆ†æ”¯åï¼Œæ‰§è¡Œåˆ é™¤å‘½ä»¤</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -av</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D branch_name</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹-commit-message"><a href="#ä¿®æ”¹-commit-message" class="headerlink" title="Â ä¿®æ”¹ commit messageÂ "></a><font color=#32CD32>Â ä¿®æ”¹ commit messageÂ </font></h4><ul><li>ä¿®æ”¹æœ€æ–°çš„ <code>commit message</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend</span><br></pre></td></tr></table></figure><p>â€‹åœ¨äº¤äº’å¼ç•Œé¢ä¸­ä¿®æ”¹å®Œ <code>commit message</code> ä¿å­˜é€€å‡ºæ¥å³å¯ã€‚</p><ul><li>ä¿®æ”¹æ—§çš„ <code>commit message</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i base_commit_id</span><br></pre></td></tr></table></figure><p>â€‹åœ¨äº¤äº’å¼ç•Œé¢ä¸­æ ¹æ® <code>Comment</code> æç¤ºä¿¡æ¯åŸºäº base commit æ‰§è¡Œ reword ä¿®æ”¹ï¼Œä¿å­˜é€€å‡ºã€‚</p><h4 id="æ•´ç†-commit"><a href="#æ•´ç†-commit" class="headerlink" title="Â æ•´ç† commitÂ "></a><font color=#32CD32>Â æ•´ç† commitÂ </font></h4><ul><li>æ•´ç†è¿ç»­çš„å‡ ä¸ª commit</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i base_commit_id</span><br></pre></td></tr></table></figure><p>â€‹åœ¨äº¤äº’å¼ç•Œé¢ä¸­åŸºäº base commit æ‰§è¡Œ squash ä¿®æ”¹ï¼Œä¿å­˜é€€å‡ºã€‚</p><ul><li>æ•´ç†é—´éš”çš„å‡ ä¸ª commit</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i base_commit_id</span><br></pre></td></tr></table></figure><p>â€‹åœ¨äº¤äº’å¼ç•Œé¢ä¸­ï¼Œå°† base_commit_id å¤åˆ¶åˆ°é¦–è¡Œï¼Œå¹¶ä¸”æŠŠéœ€è¦å’Œ base_commit åˆå¹¶çš„ commit_id å‰ªåˆ‡åˆ°é¦–è¡Œä¸‹é¢ã€‚ç„¶åæ‰§è¡Œ squash æ“ä½œï¼Œä¿å­˜é€€å‡ºã€‚</p><h4 id="æ¯”è¾ƒæš‚å­˜åŒºå’Œ-HEAD-æŒ‡å‘æ–‡ä»¶çš„å·®å¼‚"><a href="#æ¯”è¾ƒæš‚å­˜åŒºå’Œ-HEAD-æŒ‡å‘æ–‡ä»¶çš„å·®å¼‚" class="headerlink" title="Â æ¯”è¾ƒæš‚å­˜åŒºå’Œ HEAD æŒ‡å‘æ–‡ä»¶çš„å·®å¼‚Â "></a><font color=#32CD32>Â æ¯”è¾ƒæš‚å­˜åŒºå’Œ HEAD æŒ‡å‘æ–‡ä»¶çš„å·®å¼‚Â </font></h4><p>è¿™é‡Œæ˜¯æ¯”è¾ƒçš„æš‚å­˜åŒºå’Œ HEAD æŒ‡å‘åˆ†æ”¯æœ€æ–° <code>commit</code> çš„åŒºåˆ«</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --cached</span><br></pre></td></tr></table></figure><h4 id="æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚"><a href="#æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚" class="headerlink" title="Â æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚Â "></a><font color=#32CD32>Â æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚Â </font></h4><ul><li>æ¯”è¾ƒå…¨éƒ¨çš„å·®å¼‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff</span><br></pre></td></tr></table></figure><ul><li>æ¯”è¾ƒæŸå‡ ä¸ªæ–‡ä»¶</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff -- fileA fileB fileC fileD</span><br></pre></td></tr></table></figure><h4 id="æš‚å­˜åŒºæ¢å¤æˆå’Œ-HEAD-ä¸€æ ·"><a href="#æš‚å­˜åŒºæ¢å¤æˆå’Œ-HEAD-ä¸€æ ·" class="headerlink" title="Â æš‚å­˜åŒºæ¢å¤æˆå’Œ HEAD ä¸€æ ·Â "></a><font color=#32CD32>Â æš‚å­˜åŒºæ¢å¤æˆå’Œ HEAD ä¸€æ ·Â </font></h4><ul><li>é€šè¿‡é‡ç½® HEAD ä½¿å¾—æš‚å­˜åŒº Stage å†…å®¹æ¢å¤åˆ°å·¥ä½œåŒº</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD</span><br></pre></td></tr></table></figure><ul><li>æ£€æŸ¥æ˜¯å¦æ¢å¤æˆåŠŸ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --cached</span><br></pre></td></tr></table></figure><h4 id="å·¥ä½œåŒºçš„æ–‡ä»¶æ¢å¤ä¸ºä¸æš‚å­˜åŒºä¸€æ ·"><a href="#å·¥ä½œåŒºçš„æ–‡ä»¶æ¢å¤ä¸ºä¸æš‚å­˜åŒºä¸€æ ·" class="headerlink" title="Â å·¥ä½œåŒºçš„æ–‡ä»¶æ¢å¤ä¸ºä¸æš‚å­˜åŒºä¸€æ ·Â "></a><font color=#32CD32>Â å·¥ä½œåŒºçš„æ–‡ä»¶æ¢å¤ä¸ºä¸æš‚å­˜åŒºä¸€æ ·Â </font></h4><ul><li>å…ˆæŸ¥çœ‹çŠ¶æ€</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><ul><li>æ ¹æ®æç¤ºä¸¢å¼ƒæ‰å·¥ä½œåŒºçš„å†…å®¹</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout --filename</span><br></pre></td></tr></table></figure><ul><li>æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æ¢å¤æˆåŠŸ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --filename</span><br></pre></td></tr></table></figure><h4 id="å–æ¶ˆæš‚å­˜åŒºéƒ¨åˆ†æ–‡ä»¶çš„æ›´æ”¹"><a href="#å–æ¶ˆæš‚å­˜åŒºéƒ¨åˆ†æ–‡ä»¶çš„æ›´æ”¹" class="headerlink" title="Â å–æ¶ˆæš‚å­˜åŒºéƒ¨åˆ†æ–‡ä»¶çš„æ›´æ”¹Â "></a><font color=#32CD32>Â å–æ¶ˆæš‚å­˜åŒºéƒ¨åˆ†æ–‡ä»¶çš„æ›´æ”¹Â </font></h4><ul><li>å’Œã€æš‚å­˜åŒºæ¢å¤æˆå’Œ HEAD ä¸€æ ·ã€‘ç•¥æœ‰ä¸åŒ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD --fileA fileB fileC fileD</span><br></pre></td></tr></table></figure><h4 id="æ¶ˆé™¤æœ€è¿‘å‡ æ¬¡æäº¤"><a href="#æ¶ˆé™¤æœ€è¿‘å‡ æ¬¡æäº¤" class="headerlink" title="Â æ¶ˆé™¤æœ€è¿‘å‡ æ¬¡æäº¤Â "></a><font color=#32CD32>Â æ¶ˆé™¤æœ€è¿‘å‡ æ¬¡æäº¤Â </font></h4><ul><li>ä½¿ç”¨ â€”hard å‘½ä»¤</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard specific_commit_id</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ <code>gitk</code> æˆ–è€… <code>git log</code> æŸ¥çœ‹</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitk --all</span><br></pre></td></tr></table></figure><h4 id="æ¯”è¾ƒä¸åŒæäº¤çš„å·®å¼‚"><a href="#æ¯”è¾ƒä¸åŒæäº¤çš„å·®å¼‚" class="headerlink" title="Â æ¯”è¾ƒä¸åŒæäº¤çš„å·®å¼‚Â "></a><font color=#32CD32>Â æ¯”è¾ƒä¸åŒæäº¤çš„å·®å¼‚Â </font></h4><p>æ¯”è¾ƒä¸¤ä¸ªåˆ†æ”¯çš„å·®å¼‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff branch1 branch2</span><br></pre></td></tr></table></figure><p>æ¯”è¾ƒä¸¤ä¸ªåˆ†æ”¯çš„åŒä¸€ä¸ªæ–‡ä»¶çš„å·®å¼‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff branch1 branch2 --filename</span><br></pre></td></tr></table></figure><p>â€‹æˆ–è€…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff åˆ†æ”¯1çš„commit_id åˆ†æ”¯2çš„commit_id</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤æ–‡ä»¶"><a href="#åˆ é™¤æ–‡ä»¶" class="headerlink" title="Â åˆ é™¤æ–‡ä»¶Â "></a><font color=#32CD32>Â åˆ é™¤æ–‡ä»¶Â </font></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm filename</span><br></pre></td></tr></table></figure><p>å¤‡æ³¨ï¼šå¯ä»¥ä½¿ç”¨ <code>git reset â€”hard HEAD</code> å¯ä»¥è®©å·¥ä½œåŒºå’Œæš‚å­˜åŒºæ¢å¤æˆä¸ HEAD ä¸€æ ·ã€‚</p><h4 id="ä¸´æ—¶åŠ å¡ç´§æ€¥ä»»åŠ¡ï¼Œä¿å­˜å¥½å½“å‰çš„çŠ¶æ€"><a href="#ä¸´æ—¶åŠ å¡ç´§æ€¥ä»»åŠ¡ï¼Œä¿å­˜å¥½å½“å‰çš„çŠ¶æ€" class="headerlink" title="Â ä¸´æ—¶åŠ å¡ç´§æ€¥ä»»åŠ¡ï¼Œä¿å­˜å¥½å½“å‰çš„çŠ¶æ€Â "></a><font color=#32CD32>Â ä¸´æ—¶åŠ å¡ç´§æ€¥ä»»åŠ¡ï¼Œä¿å­˜å¥½å½“å‰çš„çŠ¶æ€Â </font></h4><p>å°†å½“å‰æœªå®Œæˆçš„å·¥ä½œåŒºä»¥åŠæš‚å­˜åŒºçš„çŠ¶æ€æš‚æ—¶å­˜å‚¨èµ·æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å½“å‰å­˜å‚¨çš„çŠ¶æ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure><p>ä¸´æ—¶ç´§æ€¥ä»»åŠ¡å®Œæˆåï¼Œå†æŠŠå­˜å‚¨èµ·æ¥çš„çŠ¶æ€æ¢å¤å‡ºæ¥ã€‚è¿™é‡Œæœ‰ <code>apply</code> å’Œ <code>pop</code> ä¸¤ç§æ–¹å¼ï¼ŒåŒºåˆ«æ˜¯ï¼šapply çš„è¯ï¼ŒåŸæ¥ stash çš„çŠ¶æ€è¿˜ä¿ç•™ï¼Œpop çš„è¯å°±ä¼šæŠŠæŠŠçŠ¶æ€ä»åŸæ¥çš„ stash ä¸­åˆ é™¤ã€‚</p><h4 id="æ·»åŠ å¿½ç•¥æ–‡ä»¶"><a href="#æ·»åŠ å¿½ç•¥æ–‡ä»¶" class="headerlink" title="Â æ·»åŠ å¿½ç•¥æ–‡ä»¶Â "></a><font color=#32CD32>Â æ·»åŠ å¿½ç•¥æ–‡ä»¶Â </font></h4><p>ä½¿ç”¨ <code>vim</code> å‘½ä»¤æ–°å»ºå¹¶ç¼–è¾‘ <code>.gitignore</code> æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi .gitignore</span><br></pre></td></tr></table></figure><p>æ·»åŠ éœ€è¦å¿½ç•¥çš„æ–‡ä»¶ï¼Œ<a href="https://github.com/github/gitignore">è¿™é‡Œ</a> æœ‰å„ç§è¯­è¨€çš„æ¨¡æ¿ï¼Œå¤åˆ¶ä¸‹æ¥åŠ åˆ°è‡ªå·±çš„ .gitignore é‡Œé¢å³å¯ã€‚</p><p>eg:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.dSYM</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯å·²ç»æäº¤ä»“åº“çš„æ–‡ä»¶æƒ³è¦æ‰§è¡Œå¿½ç•¥æ“ä½œï¼Œå¯ä»¥å…ˆæŠŠæ–‡ä»¶åæ·»åŠ åˆ° <code>.gitignore</code>ï¼Œç„¶åå†è¿™ä¹ˆåšï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached filename</span><br></pre></td></tr></table></figure><h4 id="æœ¬åœ°å¤‡ä»½"><a href="#æœ¬åœ°å¤‡ä»½" class="headerlink" title="Â æœ¬åœ°å¤‡ä»½Â "></a><font color=#32CD32>Â æœ¬åœ°å¤‡ä»½Â </font></h4><p>è¿›å…¥åˆ°å­˜åœ¨å¤‡ä»½æ–‡ä»¶çš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone --bare file:///path_of_source/.git name_of_backup.git</span><br></pre></td></tr></table></figure><p><code>file:///</code> æ˜¯æ–‡ä»¶åè®®ï¼Œå³ schemeã€‚</p><p><strong>å½“å‰å¼€å‘çš„é¡¹ç›®ä¸è¿œç«¯å…³è”</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add name_of_what_you_like file:///path_of_destination/name_of_backup.git</span><br></pre></td></tr></table></figure><h4 id="åŒæ­¥æœ¬åœ°ä»“åº“åˆ°-GitHub"><a href="#åŒæ­¥æœ¬åœ°ä»“åº“åˆ°-GitHub" class="headerlink" title="Â åŒæ­¥æœ¬åœ°ä»“åº“åˆ° GitHubÂ "></a><font color=#32CD32>Â åŒæ­¥æœ¬åœ°ä»“åº“åˆ° GitHubÂ </font></h4><p>å…ˆé…ç½®ä¸€ä¸‹å…¬ç§é’¥ï¼Œå…·ä½“æ“ä½œå‰å¾€ <a href="https://help.github.com/en">GitHub Help</a> æœç´¢ <code>ssh</code> æ¥å¯»æ‰¾éœ€è¦çš„ç­”æ¡ˆ</p><p>åœ¨ GitHub å»ºä¸€ä¸ªç©ºä»“åº“ï¼Œå¹¶å¤åˆ¶ä»“åº“çš„ ssh åœ°å€ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æŠŠæœ¬åœ°å’Œ GitHub çš„ä»“åº“å…³è”èµ·æ¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add github git@github.com:smilingmiao/Python.git</span><br></pre></td></tr></table></figure><p>å†æ‰§è¡Œ <code>push</code> æ“ä½œï¼ŒæŠŠæœ¬åœ°çš„æ–‡ä»¶æ¨åˆ° GitHub</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push github --all</span><br></pre></td></tr></table></figure><p>ä¸å‡ºæ„å¤–çš„è¯ï¼Œè¿™ä¸ªæ—¶å€™ä¼šå‡ºç° <code>master</code> åˆ†æ”¯ <code>push</code> å¤±è´¥çš„é”™è¯¯æç¤ºï¼Œè¿™ä¸ªæ—¶å€™ç…§ç€æç¤ºæ“ä½œ <code>fetch</code> ä¸€ä¸‹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch github master</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge --allow-unrelated-histories github/master</span><br></pre></td></tr></table></figure><p>è¿›å…¥äº¤äº’ç•Œé¢å¯ä»¥æ”¹ä¹Ÿå¯ä»¥ä¸æ”¹ï¼Œä¿å­˜é€€å‡ºã€‚</p><p>ç„¶åå†æ‰§è¡Œ <code>push</code> æ“ä½œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push github master</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h3><h4 id="Git-æ‹‰å–è¿œç¨‹åˆ†æ”¯åˆ°æœ¬åœ°"><a href="#Git-æ‹‰å–è¿œç¨‹åˆ†æ”¯åˆ°æœ¬åœ°" class="headerlink" title=" Git æ‹‰å–è¿œç¨‹åˆ†æ”¯åˆ°æœ¬åœ° "></a><font color=#32CD32> Git æ‹‰å–è¿œç¨‹åˆ†æ”¯åˆ°æœ¬åœ° </font></h4><p>åˆå§‹åŒ–ä»“åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯ local é…ç½®çš„è¯ï¼Œå…ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config â€”local user.name  = &#x27;yourname&#x27;</span><br></pre></td></tr></table></figure><p>å†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config â€”local user.email = &#x27;youremail&#x27;</span><br></pre></td></tr></table></figure><p>æ·»åŠ  <code>remote</code> ä»“åº“åœ°å€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add &lt;local_repo_name&gt; &#x27;ä»“åº“åœ°å€&#x27;</span><br></pre></td></tr></table></figure><p><code>Fetch</code> è¿œç¨‹åˆ†æ”¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch &lt;remote_repo_name&gt; è¿œç¨‹åˆ†æ”¯å</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯ï¼Œè¯¥æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å¯¹åº”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b æœ¬åœ°åˆ†æ”¯å &lt;remote_repo_name&gt;/è¿œç¨‹åˆ†æ”¯å</span><br></pre></td></tr></table></figure><p>Pull è¿œç¨‹åˆ†æ”¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin è¿œç¨‹åˆ†æ”¯å</span><br></pre></td></tr></table></figure><h4 id="æœ¬åœ°ä¸è¿œç¨‹åˆ†æ”¯ä¸åŒæ­¥"><a href="#æœ¬åœ°ä¸è¿œç¨‹åˆ†æ”¯ä¸åŒæ­¥" class="headerlink" title="Â æœ¬åœ°ä¸è¿œç¨‹åˆ†æ”¯ä¸åŒæ­¥Â "></a><font color=#32CD32>Â æœ¬åœ°ä¸è¿œç¨‹åˆ†æ”¯ä¸åŒæ­¥Â </font></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote update origin --prune</span><br><span class="line">æˆ–è€…</span><br><span class="line">git pull -p å†æ‰‹åŠ¨åˆ æœ¬åœ°åˆ†æ”¯</span><br></pre></td></tr></table></figure><h4 id="Addition"><a href="#Addition" class="headerlink" title="Addition"></a>Addition</h4><h4 id="Command-line-instructions"><a href="#Command-line-instructions" class="headerlink" title="Command line instructions"></a>Command line instructions</h4><p>You can also upload existing files from your computer using the instructions below.</p><h5 id="Git-global-setup"><a href="#Git-global-setup" class="headerlink" title="Git global setup"></a>Git global setup</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;zhangsan&quot;</span><br><span class="line">git config --global user.email &quot;zhangsan@test.com&quot;</span><br></pre></td></tr></table></figure><h5 id="Create-a-new-repository"><a href="#Create-a-new-repository" class="headerlink" title="Create a new repository"></a>Create a new repository</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git clone git@192.168.20.223:zhangsan/demo.git</span><br><span class="line">cd demo</span><br><span class="line">touch README.md</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;add README&quot;</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><h5 id="Push-an-existing-folder"><a href="#Push-an-existing-folder" class="headerlink" title="Push an existing folder"></a>Push an existing folder</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd existing_folder</span><br><span class="line">git init</span><br><span class="line">git remote add origin git@192.168.20.223:zhangsan/demo.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;Initial commit&quot;</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><h5 id="Push-an-existing-Git-repository"><a href="#Push-an-existing-Git-repository" class="headerlink" title="Push an existing Git repository"></a>Push an existing Git repository</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd existing_repo</span><br><span class="line">git remote rename origin old-origin</span><br><span class="line">git remote add origin git@192.168.20.223:zhangsan/demo.git</span><br><span class="line">git push -u origin --all</span><br><span class="line">git push -u origin --tags</span><br></pre></td></tr></table></figure><p>â€“ EOF â€“</p>]]></content>
    
    
    <summary type="html">&lt;h4 id=&quot;Git-æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#Git-æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot; Git æ¦‚è¿°Â &quot;&gt;&lt;/a&gt;&lt;font color=#32CD32&gt; Git æ¦‚è¿°Â &lt;/font&gt;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;Git&lt;/strong&gt; æ˜¯ä¸€ä¸ª&lt;strong&gt;åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶&lt;/strong&gt;ï¼Œæœ€åˆç”±æ—çº³æ–¯Â·æ‰˜ç“¦å…¹åˆ›ä½œï¼Œäº 2005 å¹´ä»¥ GPL å‘å¸ƒã€‚æ—çº³æ–¯Â·æ‰˜ç“¦å…¹è‡ªå˜²åœ°å–äº†è¿™ä¸ªåå­— â€œgitâ€ï¼Œè¯¥è¯æºè‡ªè‹±å›½ä¿šè¯­ï¼Œæ„æ€å¤§çº¦æ˜¯â€œæ··è´¦â€ã€‚å®Œæ•´çš„å­¦ä¹ èµ„æ–™å¯ä»¥åœ¨ &lt;a href=&quot;https://git-scm.com/book/zh/v2&quot;&gt;è¿™é‡Œ&lt;/a&gt; æ‰¾åˆ°ã€‚è½¯ä»¶å¯ä»¥åœ¨ &lt;a href=&quot;https://git-scm.com/downloads&quot;&gt;è¿™é‡Œ&lt;/a&gt; æ‰¾åˆ°ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Git" scheme="https://github.com/smilingmiao/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Mac Tips é›†åˆ</title>
    <link href="https://github.com/smilingmiao/2019/03/16/mac-tips-set/"/>
    <id>https://github.com/smilingmiao/2019/03/16/mac-tips-set/</id>
    <published>2019-03-15T16:00:00.000Z</published>
    <updated>2020-05-17T16:21:39.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><b><font size=5 color=#F00056>Â è§£å†³ gitk åœ¨ Mac Retina å±å¹•æ¨¡ç³Šçš„é—®é¢˜Â </font></b></p></blockquote><h5 id="å…ˆç»™-Mac-å¼€å¯ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤ï¼ˆSystem-Integrity-Protection-SIPï¼‰"><a href="#å…ˆç»™-Mac-å¼€å¯ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤ï¼ˆSystem-Integrity-Protection-SIPï¼‰" class="headerlink" title="å…ˆç»™ Mac å¼€å¯ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤ï¼ˆSystem Integrity Protection, SIPï¼‰"></a>å…ˆç»™ Mac å¼€å¯ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤ï¼ˆSystem Integrity Protection, SIPï¼‰</h5><ol><li>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ <code>csrutil status</code> å¹¶å›è½¦ï¼Œæ£€æŸ¥å½“å‰çŠ¶æ€æ˜¯æ˜¯ <code>enabled</code> è¿˜æ˜¯ <code>disabled</code>ã€‚</li><li>å¦‚æœæ˜¯ <code>enabled</code> çš„è¯ï¼Œé‡å¯ Macï¼ŒæŒ‰ä½ command+R è¿›å…¥æ¢å¤æ¨¡å¼</li><li>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ <code>csrutil disable å›è½¦</code></li><li>é‡å¯ Mac åé‡å¤æ­¥éª¤1éªŒè¯ä¸€ä¸‹å¦‚æœå¼€å¯ç»§ç»­æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤</li></ol><span id="more"></span><h5 id="ä¿®æ”¹-Wish-app-çš„-Info-plist"><a href="#ä¿®æ”¹-Wish-app-çš„-Info-plist" class="headerlink" title="ä¿®æ”¹ Wish.app çš„ Info.plist"></a>ä¿®æ”¹ Wish.app çš„ Info.plist</h5><ol><li><p>è¿›å…¥ <code>/System/Library/Frameworks/Tk.framework/Version/8.5/Resources/</code> ä¸‹é¢ï¼ˆç›´æ¥é”®å…¥è¿™æ¡å®Œæ•´å‘½ä»¤ï¼Œè€Œä¸æ˜¯å‰é¢åŠ  <code>cd</code>ï¼‰ï¼Œåœ¨ info.plist ä¸­æ·»åŠ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;NSHighResolutionCapable&lt;/key&gt;</span><br><span class="line">&lt;true/&gt;</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯ Mac è¿›å…¥æ¢å¤æ¨¡å¼å†æ”¹å› <code>csrutil enabled</code> çŠ¶æ€ï¼Œç„¶åå†é‡å¯å°± OK å•¦ã€‚</p></li></ol><p>*<font size=4 color=orange>æ›´æ–°</font></p><p>ç…§ç€ä¸Šé¢çš„æ­¥éª¤ä¸€é¡¿æ“ä½œè¿˜æ˜¯ä¸èµ·ä½œç”¨ã€‚ç„¶åä½  ã€gitk Mac æ¨¡ç³Šã€‘çš„æ—¶å€™æ»¡å±å‡ºæ¥çš„éƒ½æ˜¯ä¸Šé¢çš„è§£å†³æ–¹æ¡ˆã€‚å¤§æ¦‚æ˜¯è¿‡æ—¶äº†å§ï¼Œç°åœ¨çš„ macOS Mojave å·²ç»ä¸å†æ”¯æŒäº†ã€‚</p><p>æ‰€ä»¥æ–°çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><ol><li>ä¸‹è½½ <strong><a href="http://retinizer.mikelpr.com/">Retinizer</a></strong> ï¼Œè§£å‹åæ‰“å¼€è½¯ä»¶</li><li>å°† &#x2F;System&#x2F;Library&#x2F;Frameworks&#x2F;Tk.framework&#x2F;Version&#x2F;8.5&#x2F;Resources&#x2F; ä¸‹é¢çš„ Wish.app æ‹–å…¥ <strong>Retinizer</strong> è½¯ä»¶ä¸­ï¼ŒIt worksï¼ŒOver</li></ol><p>â€“ EOF â€“</p><h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><p><a href="https://superuser.com/questions/620824/is-it-possible-to-have-git-gui-gitk-look-good-on-a-retina-macbook-pro">Is-it-possible-to-have-git-gui-gitk-look-good-on-a-retina-macbook-pro</a><br><a href="http://www.voidcn.com/article/p-omsfkaew-bkd.html">Mac Retinaè§£å†³gitkæ¨¡ç³Šçš„é—®é¢˜</a><br><a href="https://www.jianshu.com/p/fe78d2036192">Macå¼€å¯å…³é—­SIPï¼ˆç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤ï¼‰</a></p><p>*æ›´æ–°<br><a href="https://zyfdegh.github.io/post/201806-gitk-retina/">è®© macOS ä¸­çš„ gitk æ”¯æŒé«˜æ¸…æ˜¾ç¤º</a><br><a href="http://retinizer.mikelpr.com/">http://retinizer.mikelpr.com/</a></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;b&gt;&lt;font size=5 color=#F00056&gt;Â è§£å†³ gitk åœ¨ Mac Retina å±å¹•æ¨¡ç³Šçš„é—®é¢˜Â &lt;/font&gt;&lt;/b&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h5 id=&quot;å…ˆç»™-Mac-å¼€å¯ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤ï¼ˆSystem-Integrity-Protection-SIPï¼‰&quot;&gt;&lt;a href=&quot;#å…ˆç»™-Mac-å¼€å¯ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤ï¼ˆSystem-Integrity-Protection-SIPï¼‰&quot; class=&quot;headerlink&quot; title=&quot;å…ˆç»™ Mac å¼€å¯ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤ï¼ˆSystem Integrity Protection, SIPï¼‰&quot;&gt;&lt;/a&gt;å…ˆç»™ Mac å¼€å¯ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤ï¼ˆSystem Integrity Protection, SIPï¼‰&lt;/h5&gt;&lt;ol&gt;
&lt;li&gt;åœ¨ç»ˆç«¯ä¸­è¾“å…¥ &lt;code&gt;csrutil status&lt;/code&gt; å¹¶å›è½¦ï¼Œæ£€æŸ¥å½“å‰çŠ¶æ€æ˜¯æ˜¯ &lt;code&gt;enabled&lt;/code&gt; è¿˜æ˜¯ &lt;code&gt;disabled&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯ &lt;code&gt;enabled&lt;/code&gt; çš„è¯ï¼Œé‡å¯ Macï¼ŒæŒ‰ä½ command+R è¿›å…¥æ¢å¤æ¨¡å¼&lt;/li&gt;
&lt;li&gt;æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ &lt;code&gt;csrutil disable å›è½¦&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é‡å¯ Mac åé‡å¤æ­¥éª¤1éªŒè¯ä¸€ä¸‹å¦‚æœå¼€å¯ç»§ç»­æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    
    <category term="Git" scheme="https://github.com/smilingmiao/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>iOS å¼€å‘ Tips é›†åˆ</title>
    <link href="https://github.com/smilingmiao/2019/03/01/iOS-Tips-in-Development/"/>
    <id>https://github.com/smilingmiao/2019/03/01/iOS-Tips-in-Development/</id>
    <published>2019-02-28T16:00:00.000Z</published>
    <updated>2020-05-17T16:21:07.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><b><font size=5 color=#F00056> ä¸»è¦è®°å½•ä¸€äº›å¼€å‘ä¸­é‡åˆ°çš„å°çŸ¥è¯†Â </font></b></p></blockquote><h5 id="HTTPS-è¯ä¹¦é…ç½®ç›¸å…³"><a href="#HTTPS-è¯ä¹¦é…ç½®ç›¸å…³" class="headerlink" title="HTTPS è¯ä¹¦é…ç½®ç›¸å…³"></a>HTTPS è¯ä¹¦é…ç½®ç›¸å…³</h5><p>æœåŠ¡ç«¯ç»™çš„ .pem æ ¼å¼çš„è¯ä¹¦ï¼ˆxxx.pemï¼‰ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤è½¬æ¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -inform PEM -in xxx.pem -outform DER -out certificate.cer</span><br></pre></td></tr></table></figure><span id="more"></span><p>ç®€å•é…ç½® AFSecurityPolicy</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">NSString *cerPath = [[NSBundle mainBundle] pathForResource:@&quot;certificateName&quot;</span><br><span class="line">                                                        ofType:@&quot;cer&quot;];</span><br><span class="line">NSError * __autoreleasing *error = nil;</span><br><span class="line">NSData *cerData = [NSData dataWithContentsOfFile:cerPath</span><br><span class="line">                                         options:NSDataReadingMappedIfSafe</span><br><span class="line">                                           error:error];</span><br><span class="line">if (error) &#123;</span><br><span class="line">    [NSException exceptionWithName:NSObjectInaccessibleException</span><br><span class="line">                            reason:@&quot;è¯»å–æ–‡ä»¶å¼‚å¸¸&quot;</span><br><span class="line">                          userInfo:nil];    </span><br><span class="line">&#125;</span><br><span class="line">AFSecurityPolicy *policy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeCertificate withPinnedCertificates:[NSSet setWithObject:cerData]];</span><br><span class="line">policy.allowInvalidCertificates = NO;</span><br><span class="line">policy.validatesDomainName = YES;</span><br></pre></td></tr></table></figure><h5 id="iOS-è®¡ç®—é€šè¯æ—¶é•¿ï¼ˆä¸è¶³1å°æ—¶ï¼‰ï¼Œå•ä½ä¸ºç§’"><a href="#iOS-è®¡ç®—é€šè¯æ—¶é•¿ï¼ˆä¸è¶³1å°æ—¶ï¼‰ï¼Œå•ä½ä¸ºç§’" class="headerlink" title="iOS è®¡ç®—é€šè¯æ—¶é•¿ï¼ˆä¸è¶³1å°æ—¶ï¼‰ï¼Œå•ä½ä¸ºç§’"></a>iOS è®¡ç®—é€šè¯æ—¶é•¿ï¼ˆä¸è¶³1å°æ—¶ï¼‰ï¼Œå•ä½ä¸ºç§’</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSDate *beginDate = [NSDate date];</span><br><span class="line">// è‹¥å¹²ç§’å...</span><br><span class="line">NSTimeInterval delta = -[beginDate timeIntervalSinceNow];</span><br><span class="line">NSUInteger seconds = ((NSUInteger)delta) % (3600*24) % 3600;</span><br></pre></td></tr></table></figure><p>â€“ EOF â€“</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;b&gt;&lt;font size=5 color=#F00056&gt; ä¸»è¦è®°å½•ä¸€äº›å¼€å‘ä¸­é‡åˆ°çš„å°çŸ¥è¯†Â &lt;/font&gt;&lt;/b&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h5 id=&quot;HTTPS-è¯ä¹¦é…ç½®ç›¸å…³&quot;&gt;&lt;a href=&quot;#HTTPS-è¯ä¹¦é…ç½®ç›¸å…³&quot; class=&quot;headerlink&quot; title=&quot;HTTPS è¯ä¹¦é…ç½®ç›¸å…³&quot;&gt;&lt;/a&gt;HTTPS è¯ä¹¦é…ç½®ç›¸å…³&lt;/h5&gt;&lt;p&gt;æœåŠ¡ç«¯ç»™çš„ .pem æ ¼å¼çš„è¯ä¹¦ï¼ˆxxx.pemï¼‰ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤è½¬æ¢&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;openssl x509 -inform PEM -in xxx.pem -outform DER -out certificate.cer&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="éšæ‰‹ç¬”è®°" scheme="https://github.com/smilingmiao/tags/%E9%9A%8F%E6%89%8B%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>å¾®ä¿¡ä¸€æ¬¡æ€§è®¢é˜…æ¶ˆæ¯</title>
    <link href="https://github.com/smilingmiao/2019/02/24/wei-xin-yi-ci-xing-ding-yue-xiao-xi/"/>
    <id>https://github.com/smilingmiao/2019/02/24/wei-xin-yi-ci-xing-ding-yue-xiao-xi/</id>
    <published>2019-02-23T16:00:00.000Z</published>
    <updated>2020-05-17T16:17:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨åšä¸€ä¸ªç±»ä¼¼æ²ªæ±Ÿè‹±è¯­çš„å¼•å¯¼ç”¨æˆ·å…³æ³¨å…¬å¸å…¬ä¼—å·çš„éœ€æ±‚ã€‚åšçš„è¿‡ç¨‹ä¸­è¿˜æ˜¯é‡åˆ°äº†ä¸€äº›å°é—®é¢˜ï¼Œäºæ˜¯å°±æœ‰äº†è¿™ç¯‡çŸ­æ°´æ–‡ã€‚</p><span id="more"></span><h4 id="â€¢-å¼€æ”¾å¹³å°"><a href="#â€¢-å¼€æ”¾å¹³å°" class="headerlink" title="â€¢ å¼€æ”¾å¹³å°"></a>â€¢ å¼€æ”¾å¹³å°</h4><ol><li><p>åœ¨å¾®ä¿¡â€¢å¼€æ”¾å¹³å°æ³¨å†Œè´¦å·ï¼Œç”³è¯·å¼€å‘è€…èµ„è´¨è®¤è¯</p><img src="/2019/02/24/wei-xin-yi-ci-xing-ding-yue-xiao-xi/wx-identify-dev.png" class=""></li><li><p>åœ¨å¼€æ”¾å¹³å°ç®¡ç†ä¸­å¿ƒåˆ›å»ºåº”ç”¨</p><img src="/2019/02/24/wei-xin-yi-ci-xing-ding-yue-xiao-xi/create-app.png" class=""></li><li><p>ç‚¹å‡»ğŸ‘†æ­¥éª¤ 2 å›¾ä¸­çš„æŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹å›¾ä¸­è·å¾—çš„æ‰€æœ‰æ¥å…¥å¾®ä¿¡çš„èƒ½åŠ›</p><img src="/2019/02/24/wei-xin-yi-ci-xing-ding-yue-xiao-xi/all-power.png" class=""></li><li><p>ç‚¹å‡» æŸ¥çœ‹æ¨¡æ¿id å¾—åˆ°å¾®ä¿¡ä¸€æ¬¡æ€§è®¢é˜…æ¶ˆæ¯çš„ id</p><img src="/2019/02/24/wei-xin-yi-ci-xing-ding-yue-xiao-xi/once-subscribe-id.jpg" class=""></li><li><p>åˆ° å¼€å‘èµ„æº çš„ èµ„æºä¸‹è½½ æ‰¾åˆ°å¯¹åº”çš„ SDK æŒ‰ç…§æ–‡æ¡£é›†æˆåˆ°ä½ çš„é¡¹ç›®ï¼Œä»¥ iOS ä¸ºä¾‹ï¼Œå¦‚ä¸‹ï¼š</p><img src="/2019/02/24/wei-xin-yi-ci-xing-ding-yue-xiao-xi/intergrate-wx-sdk.jpg" class=""></li></ol><h4 id="â€¢-å·¥ç¨‹é…ç½®åŠä»£ç "><a href="#â€¢-å·¥ç¨‹é…ç½®åŠä»£ç " class="headerlink" title="â€¢ å·¥ç¨‹é…ç½®åŠä»£ç "></a>â€¢ å·¥ç¨‹é…ç½®åŠä»£ç </h4><h5 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h5><p>åœ¨ Targets - Info - URL Types ä¸­è¿›è¡Œ URL Scheme é…ç½®ï¼Œè¿™ä¸€æ­¥å¾ˆå…³é”®ï¼Œåªæœ‰é…ç½®äº†è¿™ä¸€æ­¥å¾®ä¿¡æ‰èƒ½æ‰“å¼€ä½ çš„ Appã€‚Identifier å¡« <code>weixin</code>ï¼ŒURL Schemes å¡«å¾®ä¿¡å¹³å°è·å¾—çš„ AppIdã€‚</p><img src="/2019/02/24/wei-xin-yi-ci-xing-ding-yue-xiao-xi/setup-url-scheme.png" class=""><h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><p>åœ¨ AppDelegate ä¸­ä½¿ç”¨ä»å¾®ä¿¡å¼€æ”¾å¹³å°è·å¾—çš„ <strong>AppID</strong> å‘å¾®ä¿¡æ³¨å†Œï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</span><br><span class="line">    self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];</span><br><span class="line">    [self.window makeKeyAndVisible];</span><br><span class="line">    // å‘å¾®ä¿¡æ³¨å†Œ</span><br><span class="line">    [WXApi registerApp:kWXAppId];</span><br><span class="line">    </span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå†è®¾ç½®å¤„ç†å›è°ƒçš„ä»£ç†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;UIApplicationOpenURLOptionsKey,id&gt; *)options &#123;</span><br><span class="line">    return [WXApi handleOpenURL:url delegate:[WXApiManager sharedManager]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ ¹æ®å¾®ä¿¡å¼€æ”¾å¹³å°çš„æ–‡æ¡£-ç§»åŠ¨åº”ç”¨ä¸€æ¬¡æ€§è®¢é˜…æ¶ˆæ¯å¼€å‘æŒ‡å—"><a href="#æ ¹æ®å¾®ä¿¡å¼€æ”¾å¹³å°çš„æ–‡æ¡£-ç§»åŠ¨åº”ç”¨ä¸€æ¬¡æ€§è®¢é˜…æ¶ˆæ¯å¼€å‘æŒ‡å—" class="headerlink" title="æ ¹æ®å¾®ä¿¡å¼€æ”¾å¹³å°çš„æ–‡æ¡£ - ç§»åŠ¨åº”ç”¨ä¸€æ¬¡æ€§è®¢é˜…æ¶ˆæ¯å¼€å‘æŒ‡å—"></a>æ ¹æ®å¾®ä¿¡å¼€æ”¾å¹³å°çš„æ–‡æ¡£ - <a href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1500434436_aWfqW&token=70912b36bbfd5b4a29db91aabfa57c8a69a65e73&lang=zh_CN">ç§»åŠ¨åº”ç”¨ä¸€æ¬¡æ€§è®¢é˜…æ¶ˆæ¯å¼€å‘æŒ‡å—</a></h5><ol><li><p>å‘å¾®ä¿¡å‘èµ·ä¸€æ¬¡æ€§è®¢é˜…æˆæƒè¯·æ±‚ï¼Œåœ¨å¾®ä¿¡ä¸­ç‚¹å‡»ã€ç¡®è®¤æ¥æ”¶ã€‘åï¼Œå¾®ä¿¡ä¼šæ‹‰èµ·æˆ‘ä»¬è‡ªå·±çš„åº”ç”¨ï¼Œå¹¶åœ¨æˆ‘ä»¬è‡ªå·±çš„åº”ç”¨å†…æ”¶åˆ°å¾®ä¿¡çš„å›è°ƒæ¶ˆæ¯ï¼Œæœ€é‡è¦çš„æ˜¯æˆæƒç”¨æˆ·çš„ openidï¼Œè¿™ä¸ªåé¢åœ¨ç»™å¾®ä¿¡ä¸‹å‘æ¨¡æ¿æ¶ˆæ¯æ—¶å€™éœ€è¦ã€‚</p></li><li><p>è·å– access_tokenï¼Œåœ¨æ–‡æ¡£ <a href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1500434436_aWfqW&token=70912b36bbfd5b4a29db91aabfa57c8a69a65e73&lang=zh_CN">ç§»åŠ¨åº”ç”¨ä¸€æ¬¡æ€§è®¢é˜…æ¶ˆæ¯å¼€å‘æŒ‡å—</a> æœ€åçš„éƒ¨åˆ†æœ‰è¯¦ç»†ä»‹ç»ã€‚åªæ˜¯ä¸€ä¸ªæ™®é€šçš„ GET è¯·æ±‚ã€‚</p></li><li><p>å‘å¾®ä¿¡ä¸‹å‘æ¨¡æ¿ä¿¡æ¯ï¼Œè¿™ä¸€æ­¥éœ€è¦æ³¨æ„çš„æ˜¯éœ€è¦å‘ JSON è¯·æ±‚ï¼Œä¸è¿‡å¦‚æœä½¿ç”¨ AFNetworking çš„è¯å°±ç®€å•å¤šäº†ã€‚</p><img src="/2019/02/24/wei-xin-yi-ci-xing-ding-yue-xiao-xi/AFJSONRequestSerializer.png" class=""><p>(1) æŒ‡å®šä¸€ä¸‹ requestSerializer ä¸º AFJSONRequestSerializer çš„å®ä¾‹ </p><p>(2) è®¾ç½® HTTPHeaderField ä¸­çš„ <code>Content-Type</code> ä¸º <code>application/json</code></p><img src="/2019/02/24/wei-xin-yi-ci-xing-ding-yue-xiao-xi/setup-requestSerializer.png" class=""></li></ol><p>â€“ EOF â€“</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘åœ¨åšä¸€ä¸ªç±»ä¼¼æ²ªæ±Ÿè‹±è¯­çš„å¼•å¯¼ç”¨æˆ·å…³æ³¨å…¬å¸å…¬ä¼—å·çš„éœ€æ±‚ã€‚åšçš„è¿‡ç¨‹ä¸­è¿˜æ˜¯é‡åˆ°äº†ä¸€äº›å°é—®é¢˜ï¼Œäºæ˜¯å°±æœ‰äº†è¿™ç¯‡çŸ­æ°´æ–‡ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="å¾®ä¿¡" scheme="https://github.com/smilingmiao/tags/%E5%BE%AE%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>ä»å†…åˆ°å¤–æ¢ç©¶ Git</title>
    <link href="https://github.com/smilingmiao/2019/01/31/translate-git-from-the-inside-out/"/>
    <id>https://github.com/smilingmiao/2019/01/31/translate-git-from-the-inside-out/</id>
    <published>2019-01-30T16:00:00.000Z</published>
    <updated>2020-05-17T16:20:40.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ³¨æ„ï¼šæ­¤æ–‡æ˜¯å¯¹ <a href="https://maryrosecook.com/blog/post/git-from-the-inside-out">Git from the inside out</a> çš„ç¿»è¯‘ï¼Œä¸ªåˆ«åœ°æ–¹æ·»åŠ äº†è‡ªå·±çš„å®è·µç»“æœï¼Œä»…ä½œç†è§£å­¦ä¹ ä¹‹ç”¨ã€‚</p></blockquote><p>è¿™ç¯‡æ–‡ç« å°†è§£é‡Š Git æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ç›¸åŒçš„å†…å®¹ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ª <a href="https://www.youtube.com/watch?v=fCtZWGhQBvo">è§†é¢‘</a> ä¸­çœ‹åˆ°ã€‚</p><span id="more"></span><p>æœ¬æ–‡å‡å®šä½ å·²ç»å¯¹ Git æœ‰ä¸€å®šçš„ç†è§£å¹¶ä½¿ç”¨å®ƒæ¥å¯¹ä½ çš„é¡¹ç›®è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚æ–‡ç« å†…å®¹ä¸“æ³¨äºæ”¯æ’‘ Git çš„å›¾è¡¨ç»“æ„å’Œå›¾è¡¨ç»“æ„å±æ€§æ‰€å†³å®šçš„è¡Œä¸ºã€‚ç†è§£åŸºç¡€åŸç†ï¼Œä½ å¯ä»¥åŸºäºäº‹å®æ„å»ºå‡ºçŸ¥è¯†æ¨¡å‹ï¼Œè€Œä¸æ˜¯æ ¹æ® API çš„å®éªŒç°è±¡è¿›è¡Œå‡è®¾å¹¶å †ç ŒçŸ¥è¯†ã€‚è¿™ä¸ªçœŸå®çš„æ¨¡å‹è®©ä½ æ›´å¥½çš„ç†è§£ Git åšäº†ä»€ä¹ˆï¼Œæ­£åœ¨åšä»€ä¹ˆå’Œå°†è¦åšä»€ä¹ˆã€‚</p><p>æ–‡æœ¬ç»“æ„ä¸ºè¿è¡Œåœ¨å•ä¸ªé¡¹ç›®ä¸Šçš„ä¸€ç³»åˆ— Git å‘½ä»¤ã€‚æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œå°±ä¼šè§‚å¯Ÿåˆ°Gitæ‰€æ„å»ºçš„å›¾å½¢æ•°æ®ç»“æ„ã€‚è¿™äº›è§‚å¯Ÿè¯´æ˜äº†å›¾çš„ä¸€ä¸ªå±æ€§ä»¥åŠè¯¥å±æ€§äº§ç”Ÿçš„è¡Œä¸ºã€‚</p><p>é˜…è¯»åï¼Œå¦‚æœä½ æœŸæœ›å¯¹ Git æœ‰æ›´æ·±çš„ç†è§£ï¼Œå¯ä»¥çœ‹ä½œè€…ç”¨ JavaScript å®ç°çš„ Git <a href="http://gitlet.maryrosecook.com/docs/gitlet.html">ä»£ç </a>ã€‚</p><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  mkdir alpha</span><br><span class="line">âœ  cd alpha</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…åˆ›å»ºäº† alphaï¼Œç”¨æ¥å­˜æ”¾é¡¹ç›®çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha mkdir data</span><br><span class="line">âœ  alpha printf &#x27;a&#x27; &gt; data/letter.txt</span><br></pre></td></tr></table></figure><p>è¿›å…¥ alpha ç›®æ ‡å¹¶åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ dataã€‚åœ¨ data é‡Œé¢åˆåˆ›å»ºäº†å†…å®¹ä¸º<code>a</code> çš„ letter.txt æ–‡ä»¶ã€‚alpha æ–‡ä»¶å¤¹çœ‹èµ·æ¥æ˜¯è¿™æ ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alpha</span><br><span class="line">â””â”€â”€ data</span><br><span class="line">    â””â”€â”€ letter.txt</span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–ä»“åº“"><a href="#åˆå§‹åŒ–ä»“åº“" class="headerlink" title="åˆå§‹åŒ–ä»“åº“"></a>åˆå§‹åŒ–ä»“åº“</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git init</span><br><span class="line">Initialized empty Git repository</span><br></pre></td></tr></table></figure><p><code>git init</code> è®©å½“å‰æ–‡ä»¶å¤¹æˆä¸ºä¸€ä¸ª Git ä»“åº“ã€‚å®ƒåˆ›å»ºäº†ä¸€ä¸ª .git æ–‡ä»¶å¤¹å¹¶å†™å…¥è¿›å»äº†ä¸€äº›æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶åªæ˜¯æ²¡ä»€ä¹ˆç¥ç§˜çš„æ™®é€šæ–‡ä»¶ï¼Œå®ƒä»¬å®šä¹‰äº†å…³äº Git é…ç½®çš„ä¸€åˆ‡ä»¥åŠé¡¹ç›®çš„å†å²è®°å½•ã€‚ä½¿ç”¨è€…å¯ä»¥é€šè¿‡æ–‡æœ¬ç¼–è¾‘å™¨æˆ– shell é˜…è¯»å’Œç¼–è¾‘ä»–ä»¬ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šä½¿ç”¨è€…å¯ä»¥åƒè¯»å†™é¡¹ç›®æ–‡ä»¶ä¸€æ ·å®¹æ˜“åœ°è¯»å†™é¡¹ç›®çš„å†å²è®°å½•ã€‚</p><p>alpha æ–‡ä»¶å¤¹ç°åœ¨çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">alpha</span><br><span class="line">â”œâ”€â”€ .git</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ HEAD</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ branches</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ config</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ description</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ hooks</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ applypatch-msg.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ commit-msg.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fsmonitor-watchman.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ post-update.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pre-applypatch.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pre-commit.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pre-push.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pre-rebase.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pre-receive.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ prepare-commit-msg.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ update.sample</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ info</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ exclude</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ objects</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ info</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ pack</span><br><span class="line">â”‚Â Â  â””â”€â”€ refs</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ heads</span><br><span class="line">â”‚Â Â      â””â”€â”€ tags</span><br><span class="line">â””â”€â”€ data</span><br><span class="line">    â””â”€â”€ letter.txt</span><br></pre></td></tr></table></figure><p>.git æ–‡ä»¶å¤¹å’Œé‡Œé¢çš„å†…å®¹æ˜¯ Git çš„ã€‚å…¶å®ƒçš„æ–‡ä»¶ç»Ÿç§°ä¸ºå·¥ä½œå‰¯æœ¬ï¼Œä»–ä»¬æ˜¯ä½¿ç”¨è€…çš„ã€‚</p><h3 id="æ·»åŠ ä¸€äº›æ–‡ä»¶"><a href="#æ·»åŠ ä¸€äº›æ–‡ä»¶" class="headerlink" title="æ·»åŠ ä¸€äº›æ–‡ä»¶"></a>æ·»åŠ ä¸€äº›æ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— git add data/letter.txt</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ .git</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ HEAD</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ branches</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ config</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ description</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ hooks</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ applypatch-msg.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ commit-msg.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fsmonitor-watchman.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ post-update.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pre-applypatch.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pre-commit.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pre-push.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pre-rebase.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pre-receive.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ prepare-commit-msg.sample</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ update.sample</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ info</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ exclude</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ objects</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 2e</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ 65efe2a145dda7ee51d1741299f848e5bf752e</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ info</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ pack</span><br><span class="line">â”‚Â Â  â””â”€â”€ refs</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ heads</span><br><span class="line">â”‚Â Â      â””â”€â”€ tags</span><br><span class="line">â””â”€â”€ data</span><br><span class="line">    â””â”€â”€ letter.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…åŸºäº <code>data/letter.txt</code> æ‰§è¡Œäº† <code>git add</code> å‘½ä»¤ï¼Œè¿™æœ‰ä¸¤ä¸ªæ•ˆæœã€‚</p><p>é¦–å…ˆï¼Œå®ƒåœ¨ .git&#x2F;objects&#x2F; æ–‡ä»¶å¤¹ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ blob æ–‡ä»¶ã€‚è¿™ä¸ª blob æ–‡ä»¶åŒ…å«äº† <code>data/letter.txt</code> çš„å‹ç¼©å†…å®¹ã€‚å“ˆå¸ŒåŒ–ä¸€äº›æ–‡æœ¬æ„æ€æ˜¯é€šè¿‡ä¸€ä¸ªç¨‹åºè®©å®ƒå˜æˆå¯ä»¥ç¡®å®šåŸå§‹æ–‡ä»¶çš„ç‹¬ä¸€æ— äºŒçš„æ›´å°çš„æ–‡æœ¬ã€‚ä¾‹å¦‚ï¼ŒGit å°† <code>a</code> å“ˆå¸ŒåŒ–æˆ <code>2e65efe2a145dda7ee51d1741299f848e5bf752e</code> ã€‚å‰ä¸¤ä¸ªå­—ç¬¦è¢«ç”¨ä½œ objects database å†…éƒ¨çš„æ–‡ä»¶å: <code>.git/objects/2e/</code>ã€‚å‰©ä½™çš„å“ˆå¸Œå€¼è¢«ç”¨ä½œ blob æ–‡ä»¶: <code>.git/objects/2e/65efe2a145dda7ee51d1741299f848e5bf752e</code>ï¼ˆä¿å­˜æ·»åŠ æ–‡ä»¶å†…å®¹ï¼‰çš„åå­—ã€‚</p><p>æ³¨æ„å¦‚ä½•æ·»åŠ ä¸€ä¸ªæ–‡ä»¶åˆ° Git å¹¶æŠŠå®ƒçš„å†…å®¹ä¿å­˜åˆ° objects æ–‡ä»¶å¤¹ã€‚å³ä½¿ä½¿ç”¨è€…ä»å·¥ä½œåŒºåˆ é™¤äº† data&#x2F;letter.txtï¼Œå®ƒåœ¨ Git ä¸­çš„å†…å®¹ä»ç„¶æ˜¯å®‰å…¨çš„ã€‚</p><p>å…¶æ¬¡ï¼Œ<code>git add</code> æŠŠæ–‡ä»¶æ·»åŠ åˆ° index(ç´¢å¼•) ä¸­ã€‚index æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå®ƒä½œä¸ºä¸€ä¸ªæ–‡ä»¶å­˜å‚¨åœ¨ <code>.git/index</code>ï¼ŒåŒ…å«äº† Git éœ€è¦è·Ÿè¸ªçš„æ‰€æœ‰æ–‡ä»¶ã€‚æ–‡ä»¶çš„æ¯ä¸€è¡Œéƒ½å°†è·Ÿè¸ªçš„æ–‡ä»¶æ˜ å°„åˆ°å…¶å†…å®¹åœ¨æ·»åŠ æ—¶çš„å“ˆå¸Œå€¼ã€‚è¿™æ˜¯åœ¨æ‰§è¡Œå‘½ä»¤ <code>git add</code> åç”Ÿæˆçš„ indexï¼Œå¯ä»¥é€šè¿‡ <code>git ls-files -s</code> æŸ¥çœ‹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— git cat-file -p 2e65</span><br><span class="line">a%</span><br><span class="line"></span><br><span class="line">âœ  alpha git:(master) âœ— git ls-files -t</span><br><span class="line">H data/letter.txt</span><br><span class="line"></span><br><span class="line">âœ  alpha git:(master) âœ— git ls-files -s</span><br><span class="line">100644 2e65efe2a145dda7ee51d1741299f848e5bf752e 0data/letter.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…åˆ›å»ºäº†ä¸€ä¸ªå«åš <code>data/number.txt</code> çš„æ–‡ä»¶ï¼Œå†…å®¹æ˜¯ <code>1234</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— printf &#x27;1234&#x27; &gt; data/number.txt</span><br></pre></td></tr></table></figure><p>å·¥ä½œåŒºçœ‹èµ·æ¥æ˜¯è¿™æ ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alpha</span><br><span class="line">â””â”€â”€ data</span><br><span class="line">    â””â”€â”€ letter.txt</span><br><span class="line">    â””â”€â”€ number.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…æ·»åŠ äº†æ–‡ä»¶åˆ° Git</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— git add data</span><br></pre></td></tr></table></figure><p><code>git add</code> å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªåŒ…å« <code>data/number.txt</code> å†…å®¹çš„ blob objectã€‚å®ƒæ·»åŠ äº†ä¸€æ¡ <code>data/number.txt</code> æŒ‡å‘ blob çš„ index entryã€‚ä¸‹é¢æ˜¯ <code>git add</code> æ‰§è¡Œäº†ä¸¤æ¬¡çš„ indexï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— git ls-files -s</span><br><span class="line">100644 2e65efe2a145dda7ee51d1741299f848e5bf752e 0data/letter.txt</span><br><span class="line">100644 274c0052dd5408f8ae2bc8440029ff67d79bc5c3 0data/number.txt</span><br><span class="line"></span><br><span class="line">âœ  alpha git:(master) âœ— git cat-file -p 274c</span><br><span class="line">1234%</span><br></pre></td></tr></table></figure><p>æ³¨æ„åªæœ‰ <code>data</code> æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶è¢«åˆ—åœ¨ index ä¸­ï¼Œå°½ç®¡ä½¿ç”¨è€…æ‰§è¡Œ <code>git add data</code>ï¼Œ<code>data</code> æ–‡ä»¶å¤¹å¹¶ä¸ä¼šè¢«åˆ†å¼€åˆ—å…¥ index ä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— printf &#x27;1&#x27; &gt; data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git ls-files -s</span><br><span class="line">100644 2e65efe2a145dda7ee51d1741299f848e5bf752e 0data/letter.txt</span><br><span class="line">100644 274c0052dd5408f8ae2bc8440029ff67d79bc5c3 0data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git cat-file -p 274c</span><br><span class="line">1234%</span><br><span class="line"></span><br><span class="line">âœ  alpha git:(master) âœ— git add data</span><br><span class="line">âœ  alpha git:(master) âœ— git ls-files -s</span><br><span class="line">100644 2e65efe2a145dda7ee51d1741299f848e5bf752e 0data/letter.txt</span><br><span class="line">100644 56a6051ca2b02b04ef92d5150c9ef600403cb1de 0data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git cat-file -p 56a6</span><br><span class="line">1%                                                                              âœ  alpha git:(master) âœ— git cat-file -p 274c</span><br><span class="line">1234%</span><br></pre></td></tr></table></figure><p>å½“ä½¿ç”¨è€…èµ·åˆåˆ›å»º <code>data/number.txt</code>ï¼Œå®ƒè¡¨ç¤ºè¾“å…¥äº† <code>1</code> è€Œä¸æ˜¯ <code>1234</code>ã€‚å®ƒåšäº†çº æ­£å¹¶åˆä¸€æ¬¡å°†æ–‡ä»¶æ·»åŠ åˆ° indexã€‚è¿™ä¸ªå‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ blob åŠç›¸åº”çš„å†…å®¹ã€‚å®ƒæ›´æ–°äº† index entryï¼Œä½¿ <code>data/number.txt</code> æŒ‡å‘æ–°çš„ blobã€‚</p><h3 id="åšä¸€æ¬¡æäº¤"><a href="#åšä¸€æ¬¡æäº¤" class="headerlink" title="åšä¸€æ¬¡æäº¤"></a>åšä¸€æ¬¡æäº¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— git commit -m &#x27;a1&#x27;</span><br><span class="line">[master (root-commit) dcee3eb] a1</span><br><span class="line"> 2 files changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 data/letter.txt</span><br><span class="line"> create mode 100644 data/number.txt</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git cat-file -p dcee</span><br><span class="line">tree ffe298c3ce8bb07326f888907996eaa48d266db4</span><br><span class="line">author smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548853784 +0800</span><br><span class="line">committer smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548853784 +0800</span><br><span class="line"></span><br><span class="line">a1</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git cat-file -p ffe2</span><br><span class="line">040000 tree 0eed1217a2947f4930583229987d90fe5e8e0b74data</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git cat-file -p 0eed</span><br><span class="line">100644 blob 2e65efe2a145dda7ee51d1741299f848e5bf752eletter.txt</span><br><span class="line">100644 blob 56a6051ca2b02b04ef92d5150c9ef600403cb1denumber.txt</span><br></pre></td></tr></table></figure><p>ä» <code>master</code> åˆ†æ”¯çš„ root-commit å¼€å§‹ï¼Œè¿™ä¸ª commit object æŒ‡å‘ root-treeï¼Œå³ ffe2ã€‚root-tree åˆæŒ‡å‘äº† data-treeï¼Œdata-tree æŒ‡å‘äº† <code>a</code> å’Œ <code>1</code> çš„ blobã€‚</p><p>ä½¿ç”¨è€…åšäº† <code>a1</code> æäº¤ã€‚Git æ‰“å°äº†ä¸€äº›å…³äºæäº¤çš„æ•°æ®ã€‚è¿™äº›æ•°æ®å°†å¾ˆå¿«æœ‰æ„ä¹‰ã€‚</p><p>æäº¤å‘½ä»¤æœ‰ä¸‰æ­¥ã€‚å®ƒåˆ›å»ºäº†ä¸€ä¸ª tree graph è¡¨ç¤ºé¡¹ç›®ç‰ˆæœ¬å†…å®¹ commitï¼Œåˆåˆ›å»ºäº†ä¸€ä¸ª commit object å¹¶å°†å½“å‰åˆ†æ”¯æŒ‡å‘æ–°çš„ commit objectã€‚</p><h3 id="åˆ›å»ºä¸€ä¸ªæ ‘å‹å›¾"><a href="#åˆ›å»ºä¸€ä¸ªæ ‘å‹å›¾" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ ‘å‹å›¾"></a>åˆ›å»ºä¸€ä¸ªæ ‘å‹å›¾</h3><p>Git é€šè¿‡ä»ç´¢å¼•åˆ›å»ºä¸€ä¸ªæ ‘å‹å›¾æ¥è®°å½•å½“å‰é¡¹ç›®çš„çŠ¶æ€ã€‚è¿™ä¸ªæ ‘å‹å›¾è®°å½•äº†é¡¹ç›®ä¸­æ¯ä¸ªæ–‡ä»¶çš„ä½ç½®å’Œå†…å®¹ã€‚å›¾ç”±ä¸¤éƒ¨åˆ†å¯¹è±¡ç»„æˆï¼šblobs å’Œ treesã€‚</p><p>ä¸‹é¢æ˜¯æ ‘å¯¹è±¡ï¼Œå®ƒè®°å½•äº†æ–°æäº¤å <code>data</code> ç›®å½•ä¸‹çš„å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git cat-file -p 0eed</span><br><span class="line">100644 blob 2e65efe2a145dda7ee51d1741299f848e5bf752eletter.txt</span><br><span class="line">100644 blob 56a6051ca2b02b04ef92d5150c9ef600403cb1denumber.txt</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡Œè®°å½•äº†èƒ½ä½¿ <code>data/letter.txt</code> æ¢å¤æˆ–é‡ç°æ‰€å¿…é¡»çš„ä¸€åˆ‡ã€‚ç¬¬ä¸€éƒ¨åˆ†è¡¨ç¤ºæ–‡ä»¶çš„æƒé™ã€‚ç¬¬äºŒéƒ¨åˆ†è¡¨ç¤ºè¿™ä¸ªæ¡ç›®çš„å†…å®¹ç”¨ blob è¡¨ç¤ºï¼Œè€Œä¸æ˜¯æ ‘ã€‚ç¬¬ä¸‰éƒ¨åˆ†è¡¨ç¤º blob çš„å“ˆå¸Œå€¼ã€‚ç¬¬å››éƒ¨åˆ†è¡¨ç¤ºæ–‡ä»¶åã€‚</p><p>ç¬¬äºŒè¡Œè®°å½•äº† <code>data/number.txt</code> åŒæ ·çš„å†…å®¹ã€‚</p><p>ä¸‹é¢æ˜¯é¡¹ç›®çš„æ ¹ç›®å½• <code>alpha</code> çš„ tree objectã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git cat-file -p ffe2</span><br><span class="line">040000 tree 0eed1217a2947f4930583229987d90fe5e8e0b74data</span><br></pre></td></tr></table></figure><img src="/2019/01/31/translate-git-from-the-inside-out/1-a1-tree-graph.png" class=""><center><font size=2>`a1` commit çš„æ ‘å›¾</font></center><p>åœ¨ä¸Šé¢çš„æ ‘å›¾ä¸­ï¼Œ<code>root</code> æ ‘æŒ‡å‘ <code>data</code> æ ‘ã€‚<code>data</code> æ ‘æŒ‡å‘ <code>data/letter.txt</code> å’Œ <code>data/number.txt</code>ã€‚</p><h3 id="åˆ›å»ºä¸€ä¸ª-commit-object"><a href="#åˆ›å»ºä¸€ä¸ª-commit-object" class="headerlink" title="åˆ›å»ºä¸€ä¸ª commit object"></a>åˆ›å»ºä¸€ä¸ª commit object</h3><p><code>git commit</code> åœ¨åˆ›å»ºäº† tree graph ååˆåˆ›å»ºäº†ä¸€ä¸ª commit objectã€‚commit object åªæ˜¯ .git&#x2F;objects ä¸­çš„å¦ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tree ffe298c3ce8bb07326f888907996eaa48d266db4</span><br><span class="line">author smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548853784 +0800</span><br><span class="line">committer smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548853784 +0800</span><br><span class="line"></span><br><span class="line">a1</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡ŒæŒ‡å‘ tree graphï¼Œtree object çš„å“ˆå¸Œå€¼ä»£è¡¨äº†å·¥ä½œå‰¯æœ¬ã€‚å®ƒå°±æ˜¯ <code>alpha</code> ç›®å½•ã€‚æœ€åä¸€è¡Œæ˜¯ commit ä¿¡æ¯ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/2-a1-commit.png" class=""><center><font size=2>`a1` commit object æŒ‡å‘å®ƒçš„æ ‘å›¾</font></center><h5 id="å½“å‰åˆ†æ”¯æŒ‡å‘æ–°çš„-commit"><a href="#å½“å‰åˆ†æ”¯æŒ‡å‘æ–°çš„-commit" class="headerlink" title="å½“å‰åˆ†æ”¯æŒ‡å‘æ–°çš„ commit"></a>å½“å‰åˆ†æ”¯æŒ‡å‘æ–°çš„ commit</h5><p>æœ€ç»ˆï¼Œcommit å‘½ä»¤å°†å½“å‰åˆ†æ”¯æŒ‡å‘æ–°çš„ commit objectã€‚å“ªä¸€ä¸ªæ˜¯å½“å‰åˆ†æ”¯ï¼Ÿåˆ° <code>.git/HEAD</code> ä¸‹é¢å‘ç°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) cat .git/HEAD</span><br><span class="line">ref: refs/heads/master</span><br></pre></td></tr></table></figure><p>è¿™ä¹Ÿå°±æ˜¯è¯´ <code>HEAD</code> æ˜¯æŒ‡å‘ <code>master</code> çš„ã€‚<code>master</code> æ˜¯å½“å‰åˆ†æ”¯ã€‚</p><p><code>HEAD</code> å’Œ <code>master</code> éƒ½æ˜¯å¼•ç”¨ã€‚å¼•ç”¨æ˜¯ Git æˆ–æ˜¯ä½¿ç”¨è€…ç”¨æ¥ç¡®è®¤æŒ‡å®š commit çš„ä¸€ä¸ªæ ‡ç­¾ã€‚</p><p>ä»£è¡¨ <code>master</code> å¼•ç”¨çš„æ–‡ä»¶æ˜¯ä¸å­˜åœ¨çš„ï¼Œå› ä¸ºè¿™æ˜¯ç¬¬ä¸€æ¬¡ commit åˆ° repoã€‚Git åœ¨ <code>.git/refs/heads/master</code> ä¸‹åˆ›å»ºæ–‡ä»¶å¹¶å°†å…¶å†…å®¹è®¾ç½®ä¸º commit objectï¼ˆç›®å‰æ¥è¯´å°±æ˜¯ [master (root-commit) dcee3eb] a1ï¼‰çš„å“ˆå¸Œå€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) cat .git/refs/heads/master</span><br><span class="line">dcee3ebc209d617beeb120ccb0f08beae454b1ab</span><br></pre></td></tr></table></figure><p>ï¼ˆå¦‚æœä½ è¾“å…¥äº†è¿™äº›ä½ é˜…è¯»åˆ°çš„ Git å‘½ä»¤ï¼Œä½ çš„ <code>a1</code> commit ä¼šä¸æˆ‘çš„ä¸åŒã€‚blobs å’Œ trees object é€šå¸¸æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œcommits ä¸æ˜¯ï¼Œå› ä¸ºä»–ä»¬åŒ…å«äº†æ—¥æœŸå’Œåˆ›å»ºè€…çš„åå­—ã€‚ï¼‰</p><p>æˆ‘ä»¬æŠŠ <code>HEAD</code> å’Œ <code>master</code> æ·»åŠ åˆ° Git å›¾ä¸­ï¼š</p><img src="/2019/01/31/translate-git-from-the-inside-out/3-a1-refs.png" class=""><center><font size=2>`HEAD` æŒ‡å‘ `master`ï¼Œ`master` æŒ‡å‘ `a1` commit</font></center><p><code>HEAD</code> æŒ‡å‘ <code>master</code>ï¼Œå’Œ commit ä¹‹å‰ä¸€æ ·ã€‚ä½†æ˜¯ <code>master</code> ç°åœ¨å­˜åœ¨å¹¶æŒ‡å‘æ–°çš„ commit objectï¼ˆ<code>a1</code>ï¼‰ã€‚</p><h3 id="å†åšä¸€æ¬¡-commitï¼ˆä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼‰"><a href="#å†åšä¸€æ¬¡-commitï¼ˆä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼‰" class="headerlink" title="å†åšä¸€æ¬¡ commitï¼ˆä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼‰"></a>å†åšä¸€æ¬¡ commitï¼ˆä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼‰</h3><p>ä¸‹é¢æ˜¯ <code>a1</code> commit åçš„ Git å›¾ï¼ŒåŒ…å«å·¥ä½œå‰¯æœ¬å’Œ indexã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/4-a1-wc-and-index.png" class=""><center><font size=2>æ˜¾ç¤º `a1` commit çš„å·¥ä½œå‰¯æœ¬å’Œç´¢å¼•</font></center><p>æ³¨æ„åˆ°ç°åœ¨å·¥ä½œå‰¯æœ¬ï¼Œindex å’Œ <code>a1</code> commit éƒ½æœ‰å…³äº <code>data/letter.txt</code> å’Œ <code>data/number.txt</code> ç›¸åŒçš„å†…å®¹ã€‚index å’Œ <code>HEAD</code> commit éƒ½ä½¿ç”¨å“ˆå¸Œå»å¼•ç”¨ blob objectï¼Œä½†æ˜¯å·¥ä½œå‰¯æœ¬å†…å®¹ä»¥æ–‡æœ¬çš„æ–¹å¼å­˜æ”¾åœ¨ä¸åŒçš„ä½ç½®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) printf &#x27;2&#x27; &gt; data/number.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…å°† <code>data/number.txt</code> çš„å†…å®¹è®¾ç½®æˆ <code>2</code>ã€‚è¿™æ›´æ–°äº†å·¥ä½œå‰¯æœ¬ï¼Œä½†æ˜¯å¿½ç•¥äº†ç´¢å¼•å’Œ <code>HEAD</code> commitã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/5-a1-wc-number-set-to-2.png" class=""><center><font size=2>å·¥ä½œå‰¯æœ¬çš„ `data/number.txt` å†…å®¹è®¾ç½®ä¸º `2`</font></center><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— git add data/number.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…æ·»åŠ äº†æ–‡ä»¶åˆ° Gitã€‚è¿™æ·»åŠ äº†ä¸€ä¸ªåŒ…å« <code>2</code> çš„ blob åˆ° <code>objects</code> ç›®å½•ã€‚å®ƒå°† <code>data/number.txt</code> çš„ç´¢å¼•æ¡ç›®æŒ‡å‘äº†æ–°çš„ blobã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/6-a1-wc-and-index-number-set-to-2.png" class=""><center><font size=2>å·¥ä½œå‰¯æœ¬å’Œç´¢å¼•çš„ `data/number/txt` è®¾ç½®ä¸º `2`</font></center><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— git commit -m &#x27;a2&#x27;</span><br><span class="line">[master 1a3d504] a2</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€… commitsã€‚commit çš„æ­¥éª¤å’Œä¹‹å‰çš„ç›¸åŒã€‚</p><p>é¦–å…ˆï¼Œä¸€ä¸ªæ–°çš„ tree graph è¢«åˆ›å»ºæ¥è¡¨ç¤º index çš„å†…å®¹ã€‚</p><p>å…³äº <code>data/number.txt</code> çš„ index entry å·²ç»æ”¹å˜ã€‚æ—§çš„ <code>data</code> tree ä¸å†åæ˜ æ•°æ®ç›®å½•çš„ index çŠ¶æ€ã€‚å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®æ ‘å¯¹è±¡:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git cat-file -p 1a3d504</span><br><span class="line">tree ce72afb5ff229a39f6cce47b00d1b0ed60fe3556</span><br><span class="line">parent dcee3ebc209d617beeb120ccb0f08beae454b1ab</span><br><span class="line">author smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548862844 +0800</span><br><span class="line">committer smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548862844 +0800</span><br><span class="line"></span><br><span class="line">a2</span><br><span class="line"></span><br><span class="line">âœ  alpha git:(master) git cat-file -p ce72</span><br><span class="line">040000 tree 40b0318811470aaacc577485777d7a6780e51f0bdata</span><br><span class="line"></span><br><span class="line">âœ  alpha git:(master) git cat-file -p 40b0</span><br><span class="line">100644 blob 2e65efe2a145dda7ee51d1741299f848e5bf752eletter.txt</span><br><span class="line">100644 blob d8263ee9860594d2806b0dfd1bfd17528b0ba2a4number.txt</span><br><span class="line"></span><br><span class="line">âœ  alpha git:(master) git cat-file -p d826</span><br><span class="line">2%</span><br></pre></td></tr></table></figure><p>æ–°çš„ <code>data</code> tree å“ˆå¸Œå‡ºä¸€ä¸ªä¸æ—§ <code>data</code> tree ä¸åŒçš„å€¼ï¼ˆ0eed -&gt; 40b0ï¼‰ã€‚å¿…é¡»åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„ <code>root</code> tree æ¥è®°å½•è¿™ä¸ªå“ˆå¸Œå€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git cat-file -p ce72</span><br><span class="line">040000 tree 40b0318811470aaacc577485777d7a6780e51f0bdata</span><br></pre></td></tr></table></figure><p>å…¶æ¬¡ï¼Œä¸€ä¸ªæ–°çš„ commit object åˆ›å»ºå‡ºæ¥äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git cat-file -p 1a3d504</span><br><span class="line">tree ce72afb5ff229a39f6cce47b00d1b0ed60fe3556</span><br><span class="line">parent dcee3ebc209d617beeb120ccb0f08beae454b1ab</span><br><span class="line">author smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548862844 +0800</span><br><span class="line">committer smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548862844 +0800</span><br><span class="line"></span><br><span class="line">a2</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœçš„ç¬¬ä¸€è¡Œè¡¨ç¤º commit object æŒ‡å‘äº†æ–°çš„ <code>root</code> tree objectã€‚ç¬¬äºŒè¡ŒæŒ‡å‘ <code>a1</code>: the commitâ€™s parentã€‚ä¸ºäº†æ‰¾åˆ° parent commitï¼ŒGit è½¬åˆ° <code>HEAD</code>ï¼Œè·Ÿéšå®ƒåˆ° <code>master</code> å¹¶æ‰¾åˆ° <code>a1</code> çš„æäº¤å“ˆå¸Œå€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) cat .git/refs/heads/master</span><br><span class="line">1a3d504bd9d202b546728568b6c09db26b5138a0</span><br><span class="line">âœ  alpha git:(master) git cat-file -p 1a3d</span><br><span class="line">tree ce72afb5ff229a39f6cce47b00d1b0ed60fe3556</span><br><span class="line">parent dcee3ebc209d617beeb120ccb0f08beae454b1ab</span><br><span class="line">author smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548862844 +0800</span><br><span class="line">committer smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548862844 +0800</span><br><span class="line"></span><br><span class="line">a2</span><br><span class="line">âœ  alpha git:(master) git cat-file -p dcee</span><br><span class="line">tree ffe298c3ce8bb07326f888907996eaa48d266db4</span><br><span class="line">author smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548853784 +0800</span><br><span class="line">committer smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548853784 +0800</span><br><span class="line"></span><br><span class="line">a1</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰è¡Œï¼Œå°† <code>master</code> åˆ†æ”¯æ–‡ä»¶çš„å†…å®¹è®¾ç½®ä¸ºæ–° commit çš„å“ˆå¸Œå€¼ï¼ˆdcee3eb -&gt; 1a3d504ï¼‰ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/7-a2.png" class=""><center><font size=2>`a2` commit</font></center><img src="/2019/01/31/translate-git-from-the-inside-out/8-a2-just-objects-commits-and-refs.png" class=""><center><font size=2>é™¤å·¥ä½œå‰¯æœ¬å’Œ index çš„ Git å›¾</font></center><p><strong>å›¾å±æ€§</strong>ï¼šobjects çš„å†…å®¹ä»¥æ ‘çš„æ–¹å¼å­˜å‚¨ã€‚è¿™æ„å‘³ç€ objects database åªå­˜å‚¨å·®å¼‚ã€‚çœ‹ä¸Šé¢çš„æ ‘ã€‚<code>a2</code> commit é‡ç”¨äº†ä¹‹å‰ <code>a1</code> commit çš„ <code>a</code> blobã€‚ç±»ä¼¼çš„ï¼Œå¦‚æœä¸€æ•´ä¸ªç›®å½•éƒ½æ²¡æœ‰å˜åŒ–ï¼Œé‚£å®ƒä¸‹é¢çš„ tree å’Œ blobs éƒ½èƒ½é‡ç”¨ã€‚é€šå¸¸åœ¨ä¸¤æ¬¡ commit ä¹‹é—´åªæœ‰å¾ˆå°‘çš„å†…å®¹å˜åŒ–ã€‚è¿™æ„å‘³ç€ Git èƒ½å ç”¨å°‘é‡çš„ç©ºé—´æ¥å­˜å‚¨å¤§çš„ commit å†å²è®°å½•ã€‚</p><p><strong>å›¾å±æ€§</strong>ï¼šæ¯ä¸ª commit éƒ½æœ‰ä¸€ä¸ª parentã€‚è¿™æ„å‘³ç€ä¸€ä¸ª repo èƒ½å­˜å‚¨ä¸€ä¸ªé¡¹ç›®çš„å†å²è®°å½•ã€‚</p><p><strong>å›¾å±æ€§</strong>ï¼šå¼•ç”¨æ˜¯ commit history çš„ä¸€éƒ¨åˆ†æˆ–å¦ä¸€éƒ¨åˆ†çš„å…¥å£ç‚¹ã€‚è¿™æ„å‘³ç€ commits èƒ½è¢«èµ‹äºˆæœ‰æ„ä¹‰çš„åå­—ã€‚ä½¿ç”¨è€…ç®¡ç†ä»–ä»¬çš„é¡¹ç›®å·¥ä½œå¯ä»¥ä½¿ç”¨å¯Œæœ‰æ„ä¹‰çš„å®ä½“å¼•ç”¨ï¼Œæ¯”å¦‚ <code>fix-for-bug-376</code> ã€‚Git ä½¿ç”¨è±¡å¾æ€§çš„å¼•ç”¨ä¾‹å¦‚ï¼š<code>HEAD</code>ï¼Œ<code>MERGE_HEAD</code> å’Œ <code>FETCH_HEAD</code> æ¥æ”¯æŒå‘½ä»¤æ“ä½œ commit historyã€‚</p><p><strong>å›¾å±æ€§</strong>ï¼šåœ¨ <code>objects/</code> ç›®å½•ä¸‹çš„èŠ‚ç‚¹æ˜¯ä¸å¯å˜çš„ã€‚è¿™è¡¨ç¤ºç€å†…å®¹èƒ½å¤Ÿè¢«ç¼–è¾‘ï¼Œè€Œä¸èƒ½è¢«åˆ é™¤ã€‚<code>objects</code> ç›®å½•ä¸‹å­˜å‚¨ç€æ¯ä¸€æ¬¡ <code>git add</code> å’Œ <code>git commit</code> çš„å†…å®¹ã€‚</p><p><strong>å›¾å±æ€§</strong>ï¼šå¼•ç”¨æ˜¯å¯å˜çš„ã€‚å› æ­¤ï¼Œä¸€ä¸ªå¼•ç”¨æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚<code>master</code> æŒ‡å‘çš„ commit ä¹Ÿè®¸æ˜¯ä¸€ä¸ªé¡¹ç›®ä¸­æœ€å¥½çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯å¾ˆå¿«å®ƒå°±ä¼šè¢«ä¸€ä¸ªæ›´æ–°æ›´å¥½çš„ commit å–ä»£ã€‚</p><p><strong>å›¾å±æ€§</strong>ï¼šé€šè¿‡æŒ‡å‘çš„å¼•ç”¨èƒ½å¤Ÿå¾ˆå®¹æ˜“è·å¾—å·¥ä½œå‰¯æœ¬å’Œ commitï¼Œä½†æ˜¯å…¶å®ƒçš„ commits ä¸è¡Œã€‚è¿™æ„å‘³ç€æœ€è¿‘çš„ history å¾ˆå®¹æ˜“å›å¿†èµ·ï¼Œä¹Ÿæœ€å¸¸æŸ¥çœ‹ã€‚</p><p>å·¥ä½œåŒºæ˜¯æœ€å®¹æ˜“é‡æ–°æŸ¥çœ‹çš„ç‚¹ï¼Œå› ä¸ºå®ƒåœ¨æ ¹ç›®å½•ã€‚æŸ¥çœ‹å®ƒç”šè‡³éƒ½ä¸éœ€è¦ä»€ä¹ˆ Git å‘½ä»¤ã€‚åŒæ—¶å®ƒä¹Ÿæ˜¯ history ä¸­æœ€ä¸ç¨³å®šçš„ç‚¹ã€‚ä½¿ç”¨è€…å¯ä»¥æ— é™åœ°ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ä½† Git ä¸ä¼šè®°å½•ï¼Œé™¤éä»–ä»¬è¢«æ‰§è¡Œäº† <code>git add</code>ã€‚</p><p><code>HEAD</code> æŒ‡å‘çš„ commit å¾ˆå®¹æ˜“æ‰¾å›ã€‚å®ƒåœ¨æ ‘æçš„é¡¶ç«¯è¢«æ£€å‡ºã€‚æƒ³çœ‹å®ƒçš„å†…å®¹ï¼Œä½¿ç”¨è€…å¯ä»¥å…ˆå­˜å¿«ç…§ç„¶åæ£€æŸ¥å·¥ä½œå‰¯æœ¬ã€‚ä¸æ­¤åŒæ—¶ï¼Œ<code>HEAD</code> æ˜¯æœ€å¸¸æ”¹å˜çš„å¼•ç”¨ã€‚</p><p>å®ä½“å¼•ç”¨æŒ‡å‘çš„ commit å¾ˆå®¹æ˜“æ‰¾å›ã€‚ä½¿ç”¨è€…å¯ä»¥å¾ˆç®€å•åœ°æ£€å‡ºé‚£ä¸ªåˆ†æ”¯ã€‚ä¸ <code>HEAD</code> ç›¸æ¯”ï¼Œæ ‘æé¡¶ç«¯ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“æ”¹å˜ï¼Œä½†åˆ†æ”¯åç§°çš„å«ä¹‰é€šå¸¸æ˜¯ä¼šæ”¹å˜çš„ã€‚</p><p>æ‰¾å›ä¸€ä¸ªæ²¡æœ‰è¢«ä»»ä½•å¼•ç”¨æŒ‡å‘çš„ commit æ˜¯å¾ˆéš¾çš„ã€‚ä½¿ç”¨è€…ç¦»å¼•ç”¨è¶Šè¿œï¼Œè¶Šéš¾ä»¥æ„å»ºå‡ºä¸€ä¸ªæœ‰æ„ä¹‰çš„ commitã€‚ä½†æ˜¯ï¼Œä»–ä»¬è¿½æº¯å¾—è¶Šä¹…è¿œï¼Œå°±è¶Šä¸å¯èƒ½æœ‰äººæ”¹å˜äº†ä»–ä»¬ä¸Šæ¬¡çœ‹åˆ°çš„å†å²ã€‚</p><h3 id="æ£€å‡ºä¸€ä¸ª-commit"><a href="#æ£€å‡ºä¸€ä¸ª-commit" class="headerlink" title="æ£€å‡ºä¸€ä¸ª commit"></a>æ£€å‡ºä¸€ä¸ª commit</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git checkout 1a3d504</span><br><span class="line">Note: checking out &#x27;1a3d504&#x27;.</span><br><span class="line"></span><br><span class="line">You are in &#x27;detached HEAD&#x27; state. You can look around, make experimental</span><br><span class="line">changes and commit them, and you can discard any commits you make in this</span><br><span class="line">state without impacting any branches by performing another checkout.</span><br><span class="line"></span><br><span class="line">If you want to create a new branch to retain commits you create, you may</span><br><span class="line">do so (now or later) by using -b with the checkout command again. Example:</span><br><span class="line"></span><br><span class="line">  git checkout -b &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line">HEAD is now at 1a3d504 a2</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…ä½¿ç”¨å“ˆå¸Œå€¼æ£€å‡ºäº† <code>a2</code> commitã€‚ï¼ˆå¦‚æœä½ è¿è¡Œè¿™äº› Git å‘½ä»¤ï¼Œè¿™å°†ä¸èƒ½å·¥ä½œã€‚ä½¿ç”¨ <code>git log</code> æ‰¾åˆ° <code>a2</code> commit çš„å“ˆå¸Œå€¼ã€‚ï¼‰</p><p>æ£€å‡ºåˆ†ä¸ºå››æ­¥ï¼š</p><p>ç¬¬ä¸€ï¼ŒGit å¾—åˆ° <code>a2</code> commit å’Œ å®ƒæŒ‡å‘çš„ tree graphã€‚</p><p>ç¬¬äºŒï¼Œå®ƒå°† tree graph ä¸­çš„æ–‡ä»¶å†™å…¥å·¥ä½œå‰¯æœ¬ã€‚è¿™ä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œå·¥ä½œå‰¯æœ¬å·²ç»å­˜åœ¨å†™å…¥ tree graph çš„å†…å®¹ï¼Œå¹¶ä¸” <code>HEAD</code> æ—©å·²é€šè¿‡ <code>master</code> æŒ‡å‘ <code>a2</code> commitã€‚</p><p>ç¬¬ä¸‰ï¼Œå°† tree graph ä¸­çš„æ–‡ä»¶æ¡ç›®å†™å…¥ indexã€‚è¿™ä¹Ÿä¸ä¼šå¼•èµ·ä»»ä½•å˜åŒ–ï¼Œå› ä¸º index æ—©å·²æœ‰äº† <code>a2</code> commit çš„å†…å®¹ã€‚</p><p>ç¬¬å››ï¼Œ<code>HEAD</code> çš„å†…å®¹è®¾ç½®ä¸º <code>a2</code> commit çš„å“ˆå¸Œå€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(1a3d504) cat .git/refs/heads/master</span><br><span class="line">1a3d504bd9d202b546728568b6c09db26b5138a0</span><br><span class="line"></span><br><span class="line">âœ  alpha git:(1a3d504) cat .git/HEAD</span><br><span class="line">1a3d504bd9d202b546728568b6c09db26b5138a0</span><br><span class="line"></span><br><span class="line">âœ  alpha git:(1a3d504) git cat-file -p 1a3d</span><br><span class="line">tree ce72afb5ff229a39f6cce47b00d1b0ed60fe3556</span><br><span class="line">parent dcee3ebc209d617beeb120ccb0f08beae454b1ab</span><br><span class="line">author smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548862844 +0800</span><br><span class="line">committer smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1548862844 +0800</span><br><span class="line"></span><br><span class="line">a2</span><br></pre></td></tr></table></figure><blockquote><p>å¯è§ï¼Œ<code>master</code> å’Œ <code>HEAD</code> çš„å†…å®¹éƒ½æ˜¯ <code>a2</code> commit äº†ã€‚<code>HEAD</code> æœ¬èº«æŒ‡å‘çš„ <code>master</code>ï¼Œç°åœ¨æŒ‡å‘äº† <code>a2</code>ã€‚æ‰€ä»¥å¤´æŒ‡é’ˆå’Œä¹‹å‰æŒ‡å‘çš„ <code>master</code> åˆ†æ”¯åˆ†ç¦»å¼€äº†ï¼Œè¿™å°±å«åˆ†ç¦»å¤´æŒ‡é’ˆã€‚</p></blockquote><p>ç»™ <code>HEAD</code> çš„å†…å®¹è®¾ç½®äº†å“ˆå¸Œå€¼ä½¿ repo æˆä¸ºäº†åˆ†ç¦»å¤´æŒ‡é’ˆçŠ¶æ€ã€‚æ³¨æ„ä¸‹é¢çš„å›¾ä¸­ <code>HEAD</code> ç›´æ¥æŒ‡å‘äº† <code>a2</code> commitï¼Œè€Œä¸æ˜¯æŒ‡å‘ <code>master</code>ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/9-a2-detached-head.png" class=""><center><font size=2>åˆ†ç¦»å¤´æŒ‡é’ˆæŒ‡å‘ `a2` commit</font></center><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(1a3d504) printf &#x27;3&#x27; &gt; data/number.txt</span><br><span class="line">âœ  alpha git:(1a3d504) âœ— cat .git/HEAD</span><br><span class="line">1a3d504bd9d202b546728568b6c09db26b5138a0</span><br><span class="line">âœ  alpha git:(1a3d504) âœ— git add data/number.txt</span><br><span class="line">âœ  alpha git:(1a3d504) âœ— cat .git/HEAD</span><br><span class="line">1a3d504bd9d202b546728568b6c09db26b5138a0</span><br><span class="line">âœ  alpha git:(1a3d504) âœ— git commit -m &#x27;a3&#x27;</span><br><span class="line">[detached HEAD 2860e63] a3</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br><span class="line">âœ  alpha git:(2860e63) cat .git/HEAD</span><br><span class="line">2860e6350b7bc9a8d472ff48970f47ed711e642f</span><br></pre></td></tr></table></figure><blockquote><p>å¤´æŒ‡é’ˆåˆæŒ‡å‘äº†æ–°çš„ commitï¼Œå³ <code>a3</code></p></blockquote><img src="/2019/01/31/translate-git-from-the-inside-out/10-a3-detached-head.png" class=""><center><font size=2>`a3`Â commit ä¸åœ¨åˆ†æ”¯ä¸Š</font></center><h3 id="åˆ›å»ºä¸€ä¸ªåˆ†æ”¯"><a href="#åˆ›å»ºä¸€ä¸ªåˆ†æ”¯" class="headerlink" title="åˆ›å»ºä¸€ä¸ªåˆ†æ”¯"></a>åˆ›å»ºä¸€ä¸ªåˆ†æ”¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(2860e63) git branch deputy</span><br><span class="line">âœ  alpha git:(2860e63) git branch</span><br><span class="line">* (HEAD detached from 1a3d504)</span><br><span class="line">  deputy</span><br><span class="line">  master</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…åˆ›å»ºäº†ä¸€ä¸ªå«åš <code>deputy</code> çš„æ–°åˆ†æ”¯ã€‚è¿™åªæ˜¯åœ¨ <code>.git/refs/heads/deputy</code> åˆ›å»ºäº†ä¸€ä¸ªåŒ…å« <code>HEAD</code> æŒ‡å‘ <code>a3</code> commit å“ˆå¸Œå€¼çš„æ–°çš„æ–‡ä»¶ã€‚</p><p><strong>å›¾å±æ€§</strong>ï¼šåˆ†æ”¯åªæ˜¯å¼•ç”¨ï¼Œå¼•ç”¨åªæ˜¯æ–‡ä»¶ã€‚è¿™æ„å‘³ç€ Git åˆ†æ”¯æ˜¯è½»é‡çš„ã€‚</p><p><code>deputy</code> åˆ†æ”¯çš„åˆ›å»ºè®© <code>a3</code> commit å®‰å…¨çš„æ”¾åœ¨ä¸€ä¸ªåˆ†æ”¯ä¸Šã€‚<code>HEAD</code> ä»ç„¶æ˜¯ä¸ <code>master</code> åˆ†ç¦»çš„ï¼Œå› ä¸ºå®ƒç›´æ¥æŒ‡å‘äº† commitã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/11-a3-on-deputy.png" class=""><center><font size=2>`a3` commit ç°åœ¨åœ¨ `deputy` åˆ†æ”¯ä¸Š</font></center><h3 id="åˆ‡æ¢åˆ†æ”¯"><a href="#åˆ‡æ¢åˆ†æ”¯" class="headerlink" title="åˆ‡æ¢åˆ†æ”¯"></a>åˆ‡æ¢åˆ†æ”¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(2860e63) git checkout master</span><br><span class="line">Previous HEAD position was 2860e63 a3</span><br><span class="line">Switched to branch &#x27;master&#x27;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…æ£€å‡º <code>master</code> åˆ†æ”¯ã€‚</p><p>ç¬¬ä¸€ï¼ŒGit æ‰¾åˆ° <code>master</code> æŒ‡å‘çš„ <code>a2</code> commitï¼Œå†æ‰¾åˆ° <code>a2</code> commit æŒ‡å‘çš„ tree graphã€‚</p><p>ç¬¬äºŒï¼ŒGit å°† tree graph ä¸­çš„æ–‡ä»¶æ¡ç›®å†™å…¥å·¥ä½œå‰¯æœ¬çš„æ–‡ä»¶ã€‚</p><p>ç¬¬ä¸‰ï¼ŒGit å°† tree graph ä¸­çš„æ–‡ä»¶æ¡ç›®å†™å…¥ indexã€‚è¿™ä¼šæ›´æ–° <code>data/number.txt</code> çš„æ¡ç›®ä¸ºå“ˆå¸Œ <code>2</code> åçš„ blobã€‚</p><p>ç¬¬å››ï¼ŒGit é€šè¿‡å°† <code>HEAD</code> çš„å†…å®¹ä»å“ˆå¸Œå€¼å˜ä¸ºå¼•ç”¨æ¥ä½¿ <code>HEAD</code> æŒ‡å‘ <code>master</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(2860e63) cat .git/HEAD</span><br><span class="line">2860e6350b7bc9a8d472ff48970f47ed711e642f</span><br><span class="line"></span><br><span class="line">âœ  alpha git:(master) cat .git/HEAD</span><br><span class="line">ref: refs/heads/master</span><br></pre></td></tr></table></figure><img src="/2019/01/31/translate-git-from-the-inside-out/12-a3-on-master-on-a2.png" class=""><center><font size=2>åˆ‡æ¢å›æŒ‡å‘ `a2`Â commit çš„Â `master`</font></center><h3 id="åˆ‡æ¢å›ä¸å·¥ä½œå‰¯æœ¬å­˜åœ¨å†²çªçš„åˆ†æ”¯ï¼ˆdeputyï¼‰"><a href="#åˆ‡æ¢å›ä¸å·¥ä½œå‰¯æœ¬å­˜åœ¨å†²çªçš„åˆ†æ”¯ï¼ˆdeputyï¼‰" class="headerlink" title="åˆ‡æ¢å›ä¸å·¥ä½œå‰¯æœ¬å­˜åœ¨å†²çªçš„åˆ†æ”¯ï¼ˆdeputyï¼‰"></a>åˆ‡æ¢å›ä¸å·¥ä½œå‰¯æœ¬å­˜åœ¨å†²çªçš„åˆ†æ”¯ï¼ˆdeputyï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) printf &#x27;789&#x27; &gt; data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git checkout deputy</span><br><span class="line">error: Your local changes to the following files would be overwritten by checkout:</span><br><span class="line">data/number.txt</span><br><span class="line">Please commit your changes or stash them before you switch branches.</span><br><span class="line">Aborting</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…çªç„¶å°† <code>data/number.txt</code> çš„å†…å®¹è®¾ç½®ä¸º <code>789</code>ã€‚ç„¶åè¯•å›¾åˆ‡æ¢åˆ†æ”¯åˆ° <code>deputy</code> æ—¶è¢« Git é˜»æ­¢äº†ã€‚</p><p><code>HEAD</code> æŒ‡å‘ <code>master</code>ï¼Œ<code>master</code> åˆæŒ‡å‘ <code>data/number.txt</code> å†…å®¹ä¸º <code>2</code> çš„ <code>a2</code> commitã€‚<code>deputy</code> æŒ‡å‘<code>data/number.txt</code> å†…å®¹ä¸º <code>3</code> çš„ <code>a3</code>ã€‚å·¥ä½œå‰¯æœ¬çš„ <code>data/number</code> å†…å®¹ä¸º <code>789</code>ã€‚æ‰€æœ‰è¿™äº›ç‰ˆæœ¬éƒ½æ˜¯ä¸åŒçš„ï¼Œè€Œè¿™äº›ä¸åŒå¿…é¡»è¦å»è§£å†³ã€‚</p><p>Git èƒ½ç”¨è¢«æ£€å‡º commit ç‰ˆæœ¬é‡Œçš„ <code>data/number.txt</code> æ›¿æ¢å·¥ä½œå‰¯æœ¬çš„ <code>data/number.txt</code>ã€‚ä½†æ˜¯å®ƒä¼šä¸æƒœä¸€åˆ‡ä»£ä»·é˜»æ­¢æ•°æ®ä¸¢å¤±ã€‚</p><p>Git èƒ½åˆå¹¶å·¥ä½œå‰¯æœ¬ä¸æ£€å‡ºçš„ç‰ˆæœ¬ã€‚ä½†è¿™æ˜¯æ¯”è¾ƒå¤æ‚çš„ã€‚</p><p>å› æ­¤ï¼ŒGit ç»ˆæ­¢äº†åˆ‡æ¢åˆ†æ”¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— printf &#x27;2&#x27; &gt; data/number.txt</span><br><span class="line">âœ  alpha git:(master) git checkout deputy</span><br><span class="line">Switched to branch &#x27;deputy&#x27;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¼–è¾‘ <code>data/number.txt</code> å¹¶å°†å…¶å†…å®¹è®¾ç½®å› <code>2</code>ã€‚ç°åœ¨å¯ä»¥æˆåŠŸåˆ‡æ¢åˆ° <code>deputy</code>ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/13-a3ondeputy.png" class=""><center><font size=2>åˆ‡æ¢åˆ°äº†Â `deputy`</font></center><h3 id="Merge-an-ancestor"><a href="#Merge-an-ancestor" class="headerlink" title="Merge an ancestor"></a>Merge an ancestor</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(deputy) git merge master</span><br><span class="line">Already up to date.</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åˆå¹¶ <code>master</code> åˆ° <code>deputy</code>ã€‚åˆå¹¶ä¸¤ä¸ªåˆ†æ”¯ä¹Ÿå°±æ˜¯ä¸¤ä¸ª commitsã€‚ç¬¬ä¸€ä¸ª commit æ˜¯ <code>deputy</code> æŒ‡å‘çš„ï¼šæ¥æ”¶è€…ã€‚ç¬¬äºŒä¸ª commit æ˜¯ <code>master</code> æŒ‡å‘çš„ï¼šç»™äºˆè€…ã€‚å¯¹äºè¿™ä¸ªåˆå¹¶ï¼ŒGit ä»€ä¹ˆä¹Ÿä¸ä¼šåšã€‚å®ƒæç¤º <code>å·²ç»æ˜¯æœ€æ–°çš„äº†</code>ã€‚</p><p><strong>å›¾å±æ€§</strong>ï¼šå›¾ä¸­çš„ä¸€ç³»åˆ—æäº¤è¢«è§£é‡Šä¸ºå¯¹å­˜å‚¨åº“å†…å®¹æ‰€åšçš„ä¸€ç³»åˆ—æ›´æ”¹ã€‚è¿™æ„å‘³ç€åœ¨ä¸€ä¸ªåˆå¹¶ï¼Œå¦‚æœç»™äºˆè€… commit æ˜¯æ¥æ”¶è€… commit çš„ä¸€ä¸ªå…ˆè¾ˆï¼ŒGit å°†ä»€ä¹ˆéƒ½ä¸ä¼šåšã€‚å› ä¸ºé‚£äº›æ”¹å˜æ—©å·²ç»åˆå¹¶è¿‡äº†ã€‚</p><h3 id="Merge-a-descendent"><a href="#Merge-a-descendent" class="headerlink" title="Merge a descendent"></a>Merge a descendent</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(deputy) git checkout master</span><br><span class="line">Switched to branch &#x27;master&#x27;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åˆ‡æ¢åˆ°äº† <code>master</code> åˆ†æ”¯ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/14-a3-on-master-on-a2.png" class=""><center><font size=2>åˆ‡æ¢åˆ°æŒ‡å‘ `a2` çš„ `master` åˆ†æ”¯</font></center><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git merge deputy</span><br><span class="line">Updating 1a3d504..2860e63</span><br><span class="line">Fast-forward</span><br><span class="line"> data/number.txt | 2 +-</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>æŠŠ <code>deputy</code> åˆå…¥ <code>master</code>ã€‚Git å‘ç°æ¥æ”¶è€… commit <code>a2</code> æ˜¯ç»™äºˆè€… commit <code>a3</code> çš„å…ˆè¾ˆï¼Œå®ƒå¯ä»¥æ‰§è¡Œå¿«è¡Œåˆå…¥ã€‚</p><p>æ‰¾åˆ°ç»™äºˆè€…çš„ commit å’Œå®ƒæŒ‡å‘çš„ <code>tree graph</code>ã€‚å°† <code>tree graph</code> ä¸­çš„æ–‡ä»¶æ¡ç›®å†™å…¥å·¥ä½œå‰¯æœ¬å’Œ <code>index</code>ã€‚ä¹Ÿå°±æ˜¯ â€œfast-forwardsâ€ <code>master</code> æŒ‡å‘ <code>a3</code>ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/15-a3-on-master.png" class=""><center><font size=2>`a3` commit ä» `deputy` å¿«è¡Œåˆå…¥ `master`</center></font><p><strong>å›¾å±æ€§</strong>ï¼šå›¾ä¸­çš„ä¸€ç³»åˆ— commit è¢«è§£é‡Šä¸ºå¯¹å­˜å‚¨åº“å†…å®¹æ‰€åšçš„ä¸€ç³»åˆ—æ›´æ”¹ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨åˆå¹¶ä¸­ï¼Œå¦‚æœç»™äºˆè€…æ˜¯æ¥æ”¶è€…çš„åä»£ï¼Œå†å²ä¸ä¼šæ”¹å˜ã€‚å·²ç»æœ‰ä¸€ä¸ªæäº¤åºåˆ—æ¥æè¿°è¦è¿›è¡Œçš„æ›´æ”¹ï¼šæ¥æ”¶æ–¹å’Œå‘é€æ–¹ä¹‹é—´çš„æäº¤åºåˆ—ã€‚ä½†æ˜¯ï¼Œå°½ç®¡ Git çš„å†å²æ²¡æœ‰æ”¹å˜ï¼Œä½†æ˜¯ Git çš„å›¾è¡¨å´æ”¹å˜äº†ã€‚HEAD æŒ‡å‘çš„å…·ä½“ref è¢«æ›´æ–°ä¸ºæŒ‡å‘æäº¤è€…æäº¤ã€‚</p><h3 id="ä»ä¸¤ä¸ª-commit-åˆå¹¶ç¥–ç³»"><a href="#ä»ä¸¤ä¸ª-commit-åˆå¹¶ç¥–ç³»" class="headerlink" title="ä»ä¸¤ä¸ª commit åˆå¹¶ç¥–ç³»"></a>ä»ä¸¤ä¸ª commit åˆå¹¶ç¥–ç³»</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) printf &#x27;4&#x27; &gt; data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git add data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git commit -m &#x27;a4&#x27;</span><br><span class="line">[master 310733e] a4</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…è®¾ç½® <code>number.txt</code> çš„å†…å®¹ä¸º <code>4</code>ï¼Œç„¶å commits æ”¹å˜åˆ° <code>master</code>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git checkout deputy</span><br><span class="line">Switched to branch &#x27;deputy&#x27;</span><br><span class="line">âœ  alpha git:(deputy) printf &#x27;b&#x27; &gt; data/letter.txt</span><br><span class="line">âœ  alpha git:(deputy) âœ— git add data/letter.txt</span><br><span class="line">âœ  alpha git:(deputy) âœ— git commit -m &#x27;b3&#x27;</span><br><span class="line">[deputy cee5a72] b3</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…åˆ‡æ¢åˆ° <code>deputy</code>ã€‚ç„¶åè®¾ç½® <code>data/letter.txt</code> å†…å®¹ä¸º <code>b</code>ï¼Œå¹¶æäº¤æ”¹å˜åˆ° <code>deputy</code>ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/16-a4-b3-on-deputy.png" class=""><center><font size=2>`a4` æäº¤åˆ° `master`ï¼Œ`b3` æäº¤åˆ° `deputy`ï¼Œåˆ‡æ¢åˆ°åˆ†æ”¯ `deputy`</font></center><p>å›¾å±æ€§ï¼šcommits èƒ½å¤Ÿå…±äº«çˆ¶ commitã€‚è¿™è¡¨ç¤ºæ–°çš„ç¥–ç³»å¯ä»¥åœ¨ commit history ä¸­å»ºç«‹ã€‚</p><p>å›¾å±æ€§ï¼šcommit èƒ½æ‹¥æœ‰å¤šä¸ªçˆ¶ commitã€‚è¿™è¡¨ç¤ºå¯ä»¥ç”±å…·æœ‰ä¸¤ä¸ªçˆ¶ä»£çš„ commit å°†åˆ†ç¦»çš„ç¥–ç³»è¿æ¥ï¼šåˆå¹¶æäº¤ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(deputy) git merge master -m &#x27;b4&#x27;</span><br><span class="line">Merge made by the &#x27;recursive&#x27; strategy.</span><br><span class="line"> data/number.txt | 2 +-</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…æŠŠ <code>master</code> åˆå¹¶åˆ° <code>deputy</code>ã€‚</p><p>Git å‘ç° receiver <code>b3</code> å’Œ giver <code>a4</code> æ˜¯ä¸åŒçš„ç¥–ç³»ã€‚å®ƒè¿›è¡Œäº†åˆå¹¶æ“ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹æœ‰ 8 æ­¥ã€‚</p><p>ç¬¬ä¸€ï¼ŒGit å°† giver commit çš„å“ˆå¸Œå€¼å†™å…¥ <code>alpha/.git/MERGE_HEAD</code> æ–‡ä»¶ä¸­ã€‚è¿™ä¸ªæ–‡ä»¶çš„å‡ºç°ä½¿å¾— Git æ˜ç™½æ­£åœ¨åˆå¹¶ã€‚</p><p>ç¬¬äºŒï¼ŒGit æ‰¾åˆ° base commit:  receiver commit å’Œ giver commit å…±åŒæ‹¥æœ‰çš„æœ€è¿‘çš„ç¥–å…ˆã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/17-a4-b3-on-deputy.png" class=""><center><font size=2>`a3` æ˜¯ `a4` å’Œ `b3` çš„ base commit</font></center><p>å›¾å±æ€§ï¼šcommits have parentsã€‚è¿™æ„å‘³ç€å‘ç°æŸä¸ªç‚¹ä¸Šå­˜åœ¨ä¸¤ä¸ªåˆ†å‰çš„ç¥–ç³»æ˜¯å¯èƒ½çš„ã€‚Git åˆ†åˆ«ä» <code>b3</code> å’Œ <code>a4</code> å‘åå›æº¯å¯»æ‰¾å…±åŒçš„ç¥–å…ˆï¼Œæœ€åæ‰¾åˆ°æœ€è¿‘çš„å…±åŒç¥–å…ˆã€‚è¿™ä¸ªå…±åŒçš„ç¥–å…ˆå°±æ˜¯ base commitã€‚</p><p>ç¬¬ä¸‰ï¼ŒGit ä»ä»–ä»¬çš„ tree graph ç”Ÿæˆ baseï¼Œreceiver å’Œ giver commits çš„ indicesã€‚</p><p>ç¬¬å››ï¼ŒGit ç”Ÿæˆäº†ä¸€ä¸ª diffï¼Œå®ƒç»“åˆäº† receiver commit å’Œ giver commit å¯¹ base åšå‡ºçš„æ”¹å˜ã€‚è¿™ä¸ª diff æ˜¯ä¸€ç³»åˆ—æŒ‡å‘æ–‡ä»¶çš„è·¯å¾„ï¼Œè¿™äº›è·¯å¾„æŒ‡å‘ä¸€ä¸ªåŒ…å« add, remove, modify æˆ– conflict çš„æ”¹å˜ã€‚</p><p>Git æ‰¾åˆ°å‡ºç°åœ¨ base ä¸­çš„ä¸€ç³»åˆ—æ–‡ä»¶ï¼Œreceiver æˆ– giver indicesã€‚å¯¹æ¯ä¸€ä¸ªæ–‡ä»¶æ¥è¯´ï¼ŒGit ä¼šæ¯”è¾ƒ index entries æ¥å†³å®šåº”è¯¥å¯¹æ–‡ä»¶åšå‡ºçš„æ”¹å˜ã€‚</p><p>ç¬¬ä¸€ä¸ª entry æ˜¯ä¸º <code>data/letter.txt</code> çš„ã€‚base ä¸­æ–‡ä»¶çš„å†…å®¹æ˜¯ <code>a</code>ï¼Œreceiver ä¸­æ˜¯ <code>b</code>ï¼Œgiver ä¸­æ˜¯ <code>a</code>ã€‚base å’Œ receiver ä¸­çš„å†…å®¹æ˜¯ä¸åŒçš„ï¼Œä½†å’Œ giver ä¸­çš„å†…å®¹æ˜¯ç›¸åŒçš„ã€‚Git çŸ¥é“å†…å®¹è¢« receiver ä¿®æ”¹äº†ï¼Œè€Œä¸æ˜¯ giverã€‚å¯¹äº <code>data/letter.txt</code> æ¥è¯´ diff entry æ˜¯ä¸€ä¸ªä¿®æ”¹ï¼Œè€Œä¸æ˜¯å†²çªã€‚</p><p>diff ä¸­çš„ç¬¬äºŒä¸ª entry æ˜¯å…³äº <code>data/number.txt</code> çš„ã€‚è¿™ä¸ª case ä¸‹ï¼Œbase å’Œ receiver çš„å†…å®¹æ˜¯ç›¸åŒçš„ï¼Œgiver çš„å†…å®¹æ˜¯ä¸åŒçš„ã€‚å…³äº <code>data/letter.txt</code> çš„ diff entry ä¹Ÿæ˜¯ä¿®æ”¹ã€‚</p><p>å›¾å±æ€§ï¼šå‘ç° merge commit çš„ base æ˜¯å¯èƒ½çš„ã€‚è¿™æ„å‘³ç€å¦‚æœ receiver æˆ– giver ä¸­çš„ä¸€ä¸ªæ–‡ä»¶ä» base æ”¹å˜äº†ï¼ŒGit èƒ½è‡ªåŠ¨è§£å†³è¿™ä¸ªæ–‡ä»¶çš„åˆå¹¶ã€‚è¿™å‡å°‘äº†ä½¿ç”¨è€…å¿…è¡Œåšçš„äº‹æƒ…ã€‚</p><p>ç¬¬äº”ï¼Œdiff ä¸­çš„æ¡ç›®æ‰€æŒ‡ç¤ºçš„æ›´æ”¹å°†åº”ç”¨äºå·¥ä½œå‰¯æœ¬ï¼Œ<code>data/letter.txt</code> çš„å†…å®¹è®¾ç½®ä¸º <code>b</code> å¹¶ä¸” <code>data/number.txt</code> çš„å†…å®¹è®¾ç½®ä¸º <code>4</code>ã€‚</p><p>ç¬¬å…­ï¼Œdiff ä¸­çš„æ¡ç›®æ‰€æŒ‡ç¤ºçš„æ›´æ”¹è¢«åº”ç”¨åˆ° index ä¸Šã€‚<code>data/letter.txt</code> çš„æ¡ç›®æŒ‡å‘ <code>b</code> blobï¼Œ<code>data/number.txt</code> çš„æ¡ç›®æŒ‡å‘ <code>4</code> blobã€‚</p><p>ç¬¬ä¸ƒï¼Œcommit ä¹‹åæ›´æ–°çš„ indexã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(deputy) git log --graph --pretty=oneline --abbrev-commit</span><br><span class="line">*   59e2749 (HEAD -&gt; deputy) b4</span><br><span class="line">|\</span><br><span class="line">| * 310733e (master) a4</span><br><span class="line">* | cee5a72 b3</span><br><span class="line">|/</span><br><span class="line">* 2860e63 a3</span><br><span class="line">* 1a3d504 a2</span><br><span class="line">* dcee3eb a1</span><br><span class="line"></span><br><span class="line">âœ  alpha git:(deputy) git cat-file -p 59e2</span><br><span class="line">tree 20294508aea3fb6f05fcc49adaecc2e6d60f7e7d</span><br><span class="line">parent cee5a721085281f3af73cf282106bfa0de9898ea</span><br><span class="line">parent 310733e3db6affdf9bcdef47a752acea61a7d481</span><br><span class="line">author smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1549016230 +0800</span><br><span class="line">committer smilingmiao &lt;miaoyongxiang@gmail.com&gt; 1549016230 +0800</span><br><span class="line"></span><br><span class="line">b4</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™ä¸ª commit æœ‰ä¸¤ä¸ªçˆ¶èŠ‚ç‚¹ã€‚</p><p>ç¬¬å…«ï¼ŒGit çš„ <code>HEAD</code> æŒ‡é’ˆæŒ‡å‘å½“å‰åˆ†æ”¯ï¼ˆ<code>deputy</code>ï¼‰ï¼Œå½“å‰åˆ†æ”¯åˆæŒ‡å‘æ–°çš„ <code>b4</code> commitã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/18-b4-on-deputy.png" class=""><center><font size=2>ä» `a4` é€’å½’åˆå¹¶åˆ° `b3` çš„ç»“æœ `b4` merge commit</center></font><h3 id="åˆå¹¶ä¸¤ä¸ªï¼ˆä¸åŒç¥–ç³»å´ä¿®æ”¹äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼‰çš„-commits"><a href="#åˆå¹¶ä¸¤ä¸ªï¼ˆä¸åŒç¥–ç³»å´ä¿®æ”¹äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼‰çš„-commits" class="headerlink" title="åˆå¹¶ä¸¤ä¸ªï¼ˆä¸åŒç¥–ç³»å´ä¿®æ”¹äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼‰çš„ commits"></a>åˆå¹¶ä¸¤ä¸ªï¼ˆä¸åŒç¥–ç³»å´ä¿®æ”¹äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼‰çš„ commits</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(deputy) git checkout master</span><br><span class="line">Switched to branch &#x27;master&#x27;</span><br><span class="line">âœ  alpha git:(master) git merge deputy</span><br><span class="line">Updating 310733e..59e2749</span><br><span class="line">Fast-forward</span><br><span class="line"> data/letter.txt | 2 +-</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…åˆ‡æ¢åˆ°äº† <code>master</code> åˆ†æ”¯ï¼Œå¹¶æŠŠ <code>deputy</code> åˆå¹¶åˆ° <code>master</code>ã€‚è¿™å°† <code>master</code> å¿«è¿›åˆ° <code>b4</code> commitã€‚ç°åœ¨ <code>master</code> å’Œ <code>deputy</code> æŒ‡å‘ç›¸åŒçš„ commitã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/19-b4-master-deputy-on-b4.png" class=""><center><font size=2>`deputy`Â åˆå¹¶åˆ° `master`Â å¹¶å°† `master`Â æåˆ°æœ€æ–°çš„ commit `b4`</font></center><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git checkout deputy</span><br><span class="line">Switched to branch &#x27;deputy&#x27;</span><br><span class="line">âœ  alpha git:(deputy) printf &#x27;5&#x27; &gt; data/number.txt</span><br><span class="line">âœ  alpha git:(deputy) âœ— git add data/number.txt</span><br><span class="line">âœ  alpha git:(deputy) âœ— git commit -m &#x27;b5&#x27;</span><br><span class="line">[deputy 97339cf] b5</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…åˆ‡æ¢åˆ° <code>deputy</code> å¹¶å°† <code>data/number.txt</code> çš„å†…å®¹è®¾ç½®ä¸º <code>5</code> ç„¶åå°†æ”¹å˜ commit åˆ° <code>deputy</code>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(deputy) git checkout master</span><br><span class="line">Switched to branch &#x27;master&#x27;</span><br><span class="line">âœ  alpha git:(master) printf &#x27;6&#x27; &gt; data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git add data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git commit -m &#x27;b6&#x27;</span><br><span class="line">[master 3e36c14] b6</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…åˆ‡æ¢åˆ° <code>master</code> å¹¶å°† <code>data/number.txt</code> çš„å†…å®¹è®¾ç½®ä¸º <code>6</code> ç„¶åå°†æ”¹å˜ commit åˆ° <code>master</code>ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/20-b5-on-deputy-b6-on-master.png" class=""><center><font size=2>`b5` commit åœ¨ `deputy` ä¸Šï¼Œ`b6` commit åœ¨ `master` ä¸Š</font></center><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git merge deputy</span><br><span class="line">Auto-merging data/number.txt</span><br><span class="line">CONFLICT (content): Merge conflict in data/number.txt</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…åˆå¹¶ <code>deputy</code> åˆ° <code>master</code> æ—¶å€™å‡ºç°äº†ä¸€ä¸ªå†²çªï¼Œäºæ˜¯åˆå¹¶ä¸­æ–­äº†ã€‚å¤„ç†ä¸€ä¸ªå†²çªçš„åˆå¹¶ä¸å¤„ç†ä¸€ä¸ªæ²¡æœ‰å†²çªçš„åˆå¹¶çš„å‰å…­æ­¥ä¸€æ ·ï¼šè®¾ç½® <code>.git/MERGE_HEAD</code>ï¼Œæ‰¾åˆ° base commitï¼Œç”Ÿæˆ base çš„ indicesï¼Œæ¥æ”¶æ–¹å’Œå‘é€å‘ commitsï¼Œåˆ›å»ºä¸€ä¸ª diffï¼Œæ›´æ–°å·¥ä½œå‰¯æœ¬å’Œ indicesã€‚ç”±äºå†²çªï¼Œç¬¬ä¸ƒä¸ª commit æ­¥éª¤å’Œç¬¬å…«ä¸ª ref update æ­¥éª¤ä»æœªæ‰§è¡Œã€‚è®©æˆ‘ä»¬å†æ¬¡ä»”ç»†æ£€æŸ¥æ­¥éª¤çœ‹çœ‹åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p><p>ç¬¬ä¸€ï¼ŒGit å°†å‘é€æ–¹çš„ commit å“ˆå¸Œå€¼å†™å…¥ <code>.git/MERGE_HEAD</code> æ–‡ä»¶ä¸­ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/21-b6-on-master-with-merge-head.png" class=""><center><font size=2>åˆå¹¶ `b5`Â åˆ° `b6`Â æ—¶å†™å…¥ `MERGE_HEAD`</font></center><p>ç¬¬äºŒï¼ŒGit æ‰¾åˆ° base commit <code>b4</code>ã€‚</p><p>ç¬¬ä¸‰ï¼ŒGit ç”Ÿæˆ baseï¼Œæ¥æ”¶æ–¹ï¼Œå‘é€å‘ commits çš„ indicesã€‚</p><p>ç¬¬å››ï¼ŒGit ç”Ÿæˆä¸€ä¸ªç»“åˆæ¥æ”¶æ–¹ commit å’Œå‘é€æ–¹ commit æ”¹å˜çš„ diffã€‚è¿™ä¸ª diff æ˜¯ä¸€ç³»åˆ—æŒ‡å‘æ”¹å˜çš„æ–‡ä»¶è·¯å¾„ï¼šaddï¼Œremoveï¼Œmodifyï¼Œconflictã€‚</p><p>åœ¨è¿™ä¸ªæƒ…å†µä¸‹ï¼Œdiff åªåŒ…å«ä¸€ä¸ª entryï¼š<code>data/number.txt</code>ã€‚Entry è¢«æ ‡è®°ä¸ºä¸€ä¸ªå†²çªï¼Œå› ä¸ºåœ¨æ¥æ”¶æ–¹ï¼Œå‘é€æ–¹ï¼Œbase ä¸­ <code>data/number.txt</code> çš„å†…å®¹æ˜¯ä¸åŒçš„ã€‚</p><p>ç¬¬äº”ï¼Œåœ¨ diff ä¸­è¢« entries æ ‡ç¤ºçš„æ”¹å˜åº”ç”¨åˆ°å·¥ä½œå‰¯æœ¬ã€‚å¯¹äºå†²çªçš„åœ°æ–¹ï¼ŒGit åŒæ—¶å†™å…¥å·¥ä½œå‰¯æœ¬ä¸­çš„æ–‡ä»¶ã€‚<code>data/number.txt</code> çš„å†…å®¹è®¾ç½®ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">6</span><br><span class="line">=======</span><br><span class="line">5</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; deputy</span><br></pre></td></tr></table></figure><p>ç¬¬å…­ï¼Œåœ¨ diff ä¸­è¢« entry æ ‡ç¤ºçš„æ”¹å˜åº”ç”¨åˆ° indexã€‚åœ¨ index ä¸­çš„ Entries æ˜¯ç¬¬ä¸€æ— äºŒçš„ï¼Œå®ƒæ˜¯ç»“åˆæ–‡ä»¶è·¯å¾„å’ŒçŠ¶æ€è¢«è®¤å®šçš„ã€‚æœªå†²çªçš„æ–‡ä»¶çš„ entry çŠ¶æ€ä¸º <code>0</code>ã€‚è¿™ä¸ªåˆå¹¶å‰ï¼Œindex çœ‹èµ·æ¥åƒè¿™æ ·ï¼Œ<code>0</code> æ˜¯çŠ¶æ€å€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data/letter.txt 0   63d8dbd40c23542e740659a7168a0ce3138ea748</span><br><span class="line">data/number.txt 0   62f9457511f879886bb7728c986fe10b0ece6bcb</span><br></pre></td></tr></table></figure><p>åˆå¹¶å diff å†™å…¥ indexï¼Œindex çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">63d8dbd40c23542e740659a7168a0ce3138ea748 0   data/letter.txt</span><br><span class="line">bf0d87ab1b2b0ec1a11a3973d2845b42413d9767 1   data/number.txt</span><br><span class="line">62f9457511f879886bb7728c986fe10b0ece6bcb 2   data/number.txt</span><br><span class="line">7813681f5b41c028345ca62a2be376bae70b7f61 3   data/number.txt</span><br></pre></td></tr></table></figure><p><code>data/letter.txt</code> çš„ entry åœ¨çŠ¶æ€ <code>0</code> ä¸å®ƒåˆå¹¶ä¹‹å‰ä¸€æ ·ã€‚entry çŠ¶æ€ä¸º <code>0</code> çš„ <code>data/number.txt</code> ä¸åœ¨äº†ã€‚æœ‰ä¸‰ä¸ªæ–°çš„ entries åœ¨å®ƒçš„ä½ç½®ã€‚çŠ¶æ€ä¸º <code>1</code> çš„ entry æœ‰ base çš„ <code>data/number.txt</code> çš„å†…å®¹çš„å“ˆå¸Œå€¼ã€‚çŠ¶æ€ä¸º <code>1</code> çš„ entry æœ‰ base çš„ <code>data/number.txt</code> çš„å†…å®¹çš„å“ˆå¸Œå€¼ã€‚çŠ¶æ€ä¸º <code>2</code> çš„ entry æœ‰ receiver çš„ <code>data/number.txt</code> çš„å†…å®¹çš„å“ˆå¸Œå€¼ã€‚çŠ¶æ€ä¸º <code>3</code> çš„ entry æœ‰ giver çš„ <code>data/number.txt</code> çš„å†…å®¹çš„å“ˆå¸Œå€¼ã€‚ç›®å‰è¿™ä¸‰ä¸ª entries å‘Šè¯‰ Git <code>data/numbert.txt</code> æœ‰å†²çªã€‚</p><p>åˆå¹¶æš‚åœã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— printf &#x27;11&#x27; &gt; data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git add data/number.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…é€šè¿‡è®¾ç½® <code>data/number.txt</code> çš„å†…å®¹ä¸º <code>11</code> ä½¿ä¸¤ä¸ªå†²çªçš„æ–‡ä»¶å†…æˆä¸ºä¸€ä½“ã€‚ä»–ä»¬æ·»åŠ æ–‡ä»¶åˆ° indexã€‚Git æ·»åŠ ä¸€ä¸ªå†…å®¹ä¸º <code>11</code> çš„ blobã€‚æ·»åŠ ä¸€ä¸ªå†²çªçš„æ–‡ä»¶å‘Šè¯‰ Git é‚£ä¸ªå†²çªè§£å†³äº†ã€‚Git ä» index taç§»é™¤äº† entries çŠ¶æ€ä¸º <code>1</code>ï¼Œ<code>2</code> å’Œ <code>3</code> çš„ <code>data/number.txt</code>ã€‚å®ƒæ·»åŠ äº†ä¸€ä¸ª <code>data/number.txt</code> çš„ entry çŠ¶æ€ä¸º <code>0</code> çš„æ–° blob æ–‡ä»¶ã€‚index ç°åœ¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— git ls-files -s</span><br><span class="line">63d8dbd40c23542e740659a7168a0ce3138ea748 0  data/letter.txt</span><br><span class="line">9d607966b721abde8931ddd052181fae905db503 0  data/number.txt</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— git commit -m &#x27;b11&#x27;</span><br><span class="line">[master 74c3c2e] b11</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸ƒï¼Œä½¿ç”¨è€… commitã€‚Git å‘ç° <code>.git/MERGE_HEAD</code> åœ¨ä»“åº“ï¼Œå®ƒè¡¨ç¤ºæœ‰ä¸€ä¸ªåˆå¹¶æ­£åœ¨è¿›è¡Œã€‚å®ƒæ£€æŸ¥äº† index ç„¶åå‘ç°è¿™å„¿æ²¡æœ‰å†²çªã€‚å®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ commit <code>b11</code> å»è®°å½•è§£å†³äº†å†²çªçš„åˆå¹¶å†…å®¹ã€‚å®ƒåˆ é™¤äº†åœ¨ <code>.git/MERGE_HEAD</code> çš„æ–‡ä»¶ã€‚è¿™å®Œæˆäº†åˆå¹¶ã€‚</p><p>ç¬¬å…«ï¼ŒGit æŒ‡å‘å½“å‰çš„åˆ†æ”¯ <code>master</code>ï¼Œåœ¨æ–°çš„ commitã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/22-b11-on-master.png" class=""><center><font size=2>`b11` åˆå¹¶ commit å†²çªçš„ç»“æœï¼Œé€’å½’åˆå¹¶ `b5` åˆ° `b6`</font></center><h3 id="ç§»é™¤ä¸€ä¸ªæ–‡ä»¶"><a href="#ç§»é™¤ä¸€ä¸ªæ–‡ä»¶" class="headerlink" title="ç§»é™¤ä¸€ä¸ªæ–‡ä»¶"></a>ç§»é™¤ä¸€ä¸ªæ–‡ä»¶</h3><p>è¿™ä¸ª Git ç¤ºæ„å›¾åŒ…æ‹¬äº† commit historyï¼Œå…³äºæœ€è¿‘ commit çš„ trees å’Œ blobsï¼Œä»¥åŠå·¥ä½œå‰¯æœ¬å’Œ indexã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/23-b11-with-objects-wc-and-index.png" class=""><center><font size=2>å·¥ä½œå‰¯æœ¬ï¼Œindexï¼Œ`b11` commit å’Œå®ƒçš„ tree graph</font></center><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git rm data/letter.txt</span><br><span class="line">rm &#x27;data/letter.txt&#x27;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…å‘Šè¯‰ Git å»ç§»é™¤ <code>data/letter.txt</code>ã€‚æ–‡ä»¶è¢«ä»å·¥ä½œå‰¯æœ¬åˆ é™¤ã€‚entry è¢«ä» index åˆ é™¤ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/24-b11-letter-removed-from-wc-and-index.png" class=""><center><font size=2>`data/letter.txt` è¢«ä»å·¥ä½œå‰¯æœ¬å’Œ index ç§»é™¤å</font></center><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) âœ— git commit -m &#x27;11&#x27;</span><br><span class="line">[master f8f7cec] 11</span><br><span class="line"> 1 file changed, 1 deletion(-)</span><br><span class="line"> delete mode 100644 data/letter.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€… commitsã€‚ä½œä¸ºä¸€éƒ¨åˆ† commitï¼Œä¸€å¦‚æ—¢å¾€ï¼ŒGit æ„å»ºäº†ä¸€é¢— tree graph ä»£è¡¨ index çš„å†…å®¹ã€‚<code>data/letter.txt</code> ä¸åŒ…æ‹¬åœ¨ tree graphï¼Œå› ä¸ºå®ƒä¸åœ¨ index ä¸­ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/25-11.png" class=""><center><font size=2>`11` commit made after `data/letter.txt` `rm`ed</font></center><h3 id="å¤åˆ¶ä¸€ä¸ªä»“åº“"><a href="#å¤åˆ¶ä¸€ä¸ªä»“åº“" class="headerlink" title="å¤åˆ¶ä¸€ä¸ªä»“åº“"></a>å¤åˆ¶ä¸€ä¸ªä»“åº“</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) cd ..</span><br><span class="line">âœ  Git cp -R alpha bravo</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…å¤åˆ¶ <code>alpha/</code> ä»“åº“çš„å†…å®¹å¤åˆ¶åˆ° <code>bravo./</code> ç›®å½•ä¸‹ã€‚</p><p>è¿™äº§ç”Ÿäº†ä¸‹é¢çš„ç›®å½•ç»“æ„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ alpha</span><br><span class="line">â”‚Â Â  â””â”€â”€ data</span><br><span class="line">â”‚Â Â      â””â”€â”€ number.txt</span><br><span class="line">â””â”€â”€ bravo</span><br><span class="line">    â””â”€â”€ data</span><br><span class="line">        â””â”€â”€ number.txt</span><br></pre></td></tr></table></figure><p>ç°åœ¨åœ¨ <code>bravo</code> ç›®å½•æœ‰å¦ä¸€ä¸ª Git graph</p><img src="/2019/01/31/translate-git-from-the-inside-out/26-11-cp-alpha-to-bravo.png" class=""><center><font size=2>New graph created when `alpha` `cp`ed to `bravo`</font></center><h3 id="é“¾æ¥ä¸€ä¸ªä»“åº“åˆ°å¦ä¸€ä¸ªä»“åº“"><a href="#é“¾æ¥ä¸€ä¸ªä»“åº“åˆ°å¦ä¸€ä¸ªä»“åº“" class="headerlink" title="é“¾æ¥ä¸€ä¸ªä»“åº“åˆ°å¦ä¸€ä¸ªä»“åº“"></a>é“¾æ¥ä¸€ä¸ªä»“åº“åˆ°å¦ä¸€ä¸ªä»“åº“</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  Git cd alpha</span><br><span class="line">âœ  alpha git:(master) git remote add bravo ../bravo</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…ç§»åŠ¨å› <code>alpha</code> ä»“åº“ã€‚ä»–ä»¬è®¾ç½® <code>bravo</code> ä½œä¸ºä¸€ä¸ªè¿œç¨‹ä»“åº“ <code>alpha</code>ã€‚è¿™æ·»åŠ å‡ è¡Œå†…å®¹åˆ° <code>alpha/.git/config</code> æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[remote &quot;bravo&quot;]</span><br><span class="line">url = ../bravo</span><br><span class="line">fetch = +refs/heads/*:refs/remotes/bravo/*</span><br></pre></td></tr></table></figure><p>è¿™å‡ è¡Œå†…å®¹æŒ‡å®šäº†åœ¨ç›®å½• <code>../bravo</code> æœ‰ä¸€ä¸ªå«åš <code>bravo</code> çš„è¿œç¨‹ä»“åº“ã€‚</p><h3 id="ä»è¿œç¨‹å–æ¥ä¸€ä¸ªåˆ†æ”¯"><a href="#ä»è¿œç¨‹å–æ¥ä¸€ä¸ªåˆ†æ”¯" class="headerlink" title="ä»è¿œç¨‹å–æ¥ä¸€ä¸ªåˆ†æ”¯"></a>ä»è¿œç¨‹å–æ¥ä¸€ä¸ªåˆ†æ”¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) cd ../bravo</span><br><span class="line">âœ  bravo git:(master) printf &#x27;12&#x27; &gt; data/number.txt</span><br><span class="line">âœ  bravo git:(master) âœ— git add data/number.txt</span><br><span class="line">âœ  bravo git:(master) âœ— git commit -m &#x27;12&#x27;</span><br><span class="line">[master 000f37d] 12</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…è¿›å…¥åˆ° <code>bravo</code> ä»“åº“ã€‚ä»–ä»¬è®¾ç½® <code>data/number.txt</code> çš„å†…å®¹ä¸º <code>12</code> å¹¶ä¸”åœ¨ <code>bravo</code> commit change åˆ° <code>master</code>ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/27-12-bravo.png" class=""><center><font size=2>`12` commit on `bravo` repository</font></center><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">âœ  bravo git:(master) cd ../alpha</span><br><span class="line">âœ  alpha git:(master) git fetch bravo master</span><br><span class="line">remote: Enumerating objects: 7, done.</span><br><span class="line">remote: Counting objects: 100% (7/7), done.</span><br><span class="line">remote: Total 4 (delta 0), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (4/4), done.</span><br><span class="line">From ../bravo</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line"> * [new branch]      master     -&gt; bravo/master</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…è¿›å…¥ <code>alpha</code> ä»“åº“ã€‚å®ƒä»¬æ‹‰å– <code>master</code> ä» <code>bravo</code> åˆ° <code>alpha</code>ã€‚è¿™ä¸ªå¤„ç†æœ‰å››ä¸ªæ­¥éª¤ã€‚</p><p>ç¬¬ä¸€ï¼ŒGit å¾—åˆ°åœ¨ <code>bravo</code> master æŒ‡å‘çš„ commit çš„å“ˆå¸Œå€¼ï¼Œè¿™æ˜¯ commit <code>12</code> çš„å“ˆå¸Œã€‚</p><p>ç¬¬äºŒï¼ŒGit åˆ¶é€ äº† commit <code>12</code> ä¾èµ–çš„ä¸€ç³»åˆ— objectsï¼šcommit objectï¼Œåœ¨ tree graph ä¸­çš„ objectsï¼Œcommit <code>12</code> çš„ç¥–å…ˆ commits ä»¥åŠåœ¨ä»–ä»¬çš„ tree graphs ä¸­çš„ objectsã€‚å®ƒä»è¿™ä¸ªåˆ—è¡¨ç§»é™¤äº† <code>alpha</code> object æ•°æ®åº“å·²æœ‰çš„æ‰€æœ‰ objectsã€‚å®ƒæ‹·è´å‰©ä½™çš„åˆ° <code>alpha/.git/objects/</code>ã€‚</p><p>ç¬¬ä¸‰ï¼Œåœ¨ <code>alpha/.git/refs/remotes/bravo/master</code> çš„å®ä½“å¼•ç”¨æ–‡ä»¶å†…å®¹è®¾ç½®åˆ° <code>12</code> commit çš„å“ˆå¸Œã€‚</p><p>ç¬¬å››ï¼Œ<code>alpha/.git/FETCH_HEAD</code> çš„å†…å®¹è®¾ç½®ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">000f37d3b87a64e97b5de86aec5c54d8257638dd    branch &#x27;master&#x27; of ../bravo</span><br></pre></td></tr></table></figure><p>è¿™æ ‡ç¤ºæœ€è¿‘çš„ fetch å‘½ä»¤ä» <code>bravo</code> æ‹‰å–äº† <code>12</code> commit çš„ <code>master</code>ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/28-12-fetched-to-alpha.png" class=""><center><font size=2>`alpha` after `bravo/master` fetched</font></center><p><strong>å›¾å±æ€§</strong>ï¼šobjects å¯ä»¥è¢«æ‹·è´ã€‚è¿™æ„å‘³ç€é‚£äº› history å¯ä»¥åœ¨ä»“åº“ç›´æ¥è¢«åˆ†äº«ã€‚</p><p><strong>å›¾å±æ€§</strong>ï¼šä¸€ä¸ªä»“åº“å¯ä»¥å­˜å‚¨è¿œç¨‹åˆ†æ”¯å¼•ç”¨ï¼Œæ¯”å¦‚ï¼š<code>alpha/.git/refs/remotes/bravo/master</code>ã€‚è¿™æ„å‘³ç€é‚£ä¸ªä»“åº“èƒ½åœ¨æœ¬åœ°è®°å½•è¿œç¨‹ä»“åº“åˆ†æ”¯çš„çŠ¶æ€ã€‚å®ƒåœ¨è·å–æ—¶æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯å¦‚æœè¿œç¨‹åˆ†æ”¯å‘ç”Ÿå˜åŒ–ï¼Œå®ƒå°†è¿‡æ—¶ã€‚</p><h3 id="Merge-FETCH-HEAD"><a href="#Merge-FETCH-HEAD" class="headerlink" title="Merge FETCH_HEAD"></a>Merge FETCH_HEAD</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git merge FETCH_HEAD</span><br><span class="line">Updating f8f7cec..000f37d</span><br><span class="line">Fast-forward</span><br><span class="line"> data/number.txt | 2 +-</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…åˆå¹¶ <code>FETCH_HEAD</code>ã€‚<code>FETCH_HEAD</code> ä»…ä»…æ˜¯å¦ä¸€ä¸ªå¼•ç”¨ã€‚å®ƒè§£å†³äº† commit <code>12</code>ï¼Œå‘é€æ–¹ã€‚<code>HEAD</code> æŒ‡å‘äº† commit <code>11</code>ï¼Œæ¥æ”¶æ–¹ã€‚Git åšäº†ä¸€æ¬¡å¿«è¡Œåˆå¹¶ç„¶å <code>master</code> æŒ‡å‘äº† commit <code>12</code>ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/29-12-merged-to-alpha.png" class=""><center><font size=2>`alpha` after `FETCH_HEAD` merged</font></center><h3 id="ä»è¿œç¨‹æ‹‰å–ä¸€ä¸ªåˆ†æ”¯"><a href="#ä»è¿œç¨‹æ‹‰å–ä¸€ä¸ªåˆ†æ”¯" class="headerlink" title="ä»è¿œç¨‹æ‹‰å–ä¸€ä¸ªåˆ†æ”¯"></a>ä»è¿œç¨‹æ‹‰å–ä¸€ä¸ªåˆ†æ”¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git pull bravo master</span><br><span class="line">From ../bravo</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line">Already up to date.</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…ä» <code>bravo</code> æ‹‰å– <code>master</code> åˆ° <code>alpha</code>ã€‚Pull æ˜¯ â€œfetch and merge FETCH_HEADâ€ çš„ç¼©å†™ã€‚Git æ‰§è¡Œè¿™ä¸¤ä¸ªå‘½ä»¤å¹¶æŠ¥å‘Š <code>master</code> å·²ç»æ˜¯æœ€æ–°çš„ã€‚</p><h3 id="å…‹éš†ä¸€ä¸ªä»“åº“"><a href="#å…‹éš†ä¸€ä¸ªä»“åº“" class="headerlink" title="å…‹éš†ä¸€ä¸ªä»“åº“"></a>å…‹éš†ä¸€ä¸ªä»“åº“</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) cd ..</span><br><span class="line">âœ  Git git clone alpha charlie</span><br><span class="line">Cloning into &#x27;charlie&#x27;...</span><br><span class="line">done.</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…ç§»åŠ¨åˆ°ä¸Šé¢çš„ç›®å½•ä¸­ã€‚ä»–ä»¬æŠŠ alpha å…‹éš†ç»™ charlieã€‚å¤åˆ¶åˆ° charlie çš„ç»“æœä¸ä½¿ç”¨è€…ç”Ÿæˆ bravo å­˜å‚¨åº“çš„ cp ç±»ä¼¼ã€‚Git åˆ›å»ºäº†ä¸€ä¸ªåä¸º charlie çš„æ–°ç›®å½•ã€‚å®ƒå°† charlie ä½œä¸º Git repo è¾“å…¥ï¼Œå°† alpha ä½œä¸ºä¸€ä¸ªåä¸º origin çš„è¿œç¨‹æ·»åŠ ï¼Œè·å– origin å¹¶åˆå¹¶ FETCH_HEADã€‚</p><h3 id="å°†åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä¸Šçš„ç­¾å‡ºåˆ†æ”¯"><a href="#å°†åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä¸Šçš„ç­¾å‡ºåˆ†æ”¯" class="headerlink" title="å°†åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä¸Šçš„ç­¾å‡ºåˆ†æ”¯"></a>å°†åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä¸Šçš„ç­¾å‡ºåˆ†æ”¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">âœ  Git cd alpha</span><br><span class="line">âœ  alpha git:(master) printf &#x27;13&#x27; &gt; data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git add data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git commit -m &#x27;13&#x27;</span><br><span class="line">[master d5cd098] 13</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…è¿”å› alpha å­˜å‚¨åº“ã€‚ä»–ä»¬è®¾ç½®æ•°æ®&#x2F;æ•°å­—çš„å†…å®¹ã€‚å°† txt è®¾ç½®ä¸º 13ï¼Œå¹¶å°†æ›´æ”¹æäº¤ç»™ alpha ä¸Šçš„ masterã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git remote add charlie ../charlie</span><br></pre></td></tr></table></figure><p>ä»–ä»¬å°† charlie è®¾ç½®ä¸º alpha ä¸Šçš„è¿œç¨‹å­˜å‚¨åº“ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git push charlie master</span><br><span class="line">Enumerating objects: 7, done.</span><br><span class="line">Counting objects: 100% (7/7), done.</span><br><span class="line">Writing objects: 100% (4/4), 282 bytes | 282.00 KiB/s, done.</span><br><span class="line">Total 4 (delta 0), reused 0 (delta 0)</span><br><span class="line">remote: error: refusing to update checked out branch: refs/heads/master</span><br><span class="line">remote: error: By default, updating the current branch in a non-bare repository</span><br><span class="line">remote: is denied, because it will make the index and work tree inconsistent</span><br><span class="line">remote: with what you pushed, and will require &#x27;git reset --hard&#x27; to match</span><br><span class="line">remote: the work tree to HEAD.</span><br><span class="line">remote:</span><br><span class="line">remote: You can set the &#x27;receive.denyCurrentBranch&#x27; configuration variable</span><br><span class="line">remote: to &#x27;ignore&#x27; or &#x27;warn&#x27; in the remote repository to allow pushing into</span><br><span class="line">remote: its current branch; however, this is not recommended unless you</span><br><span class="line">remote: arranged to update its work tree to match what you pushed in some</span><br><span class="line">remote: other way.</span><br><span class="line">remote:</span><br><span class="line">remote: To squelch this message and still keep the default behaviour, set</span><br><span class="line">remote: &#x27;receive.denyCurrentBranch&#x27; configuration variable to &#x27;refuse&#x27;.</span><br><span class="line">To ../charlie</span><br><span class="line"> ! [remote rejected] master -&gt; master (branch is currently checked out)</span><br><span class="line">error: failed to push some refs to &#x27;../charlie&#x27;</span><br></pre></td></tr></table></figure><p>ä»–ä»¬æŠŠ <code>master</code> æ¨é€åˆ° charlieã€‚</p><p>commit <code>13</code> æ‰€éœ€çš„æ‰€æœ‰å¯¹è±¡éƒ½å¤åˆ¶åˆ° charlieã€‚</p><p>æ­¤æ—¶ï¼Œpush è¿‡ç¨‹åœæ­¢ã€‚Git ä¸€å¦‚æ—¢å¾€åœ°å‘Šè¯‰ç”¨æˆ·å“ªé‡Œå‡ºé”™äº†ã€‚å®ƒæ‹’ç»æ¨é€åˆ°è¿œç¨‹ç­¾å‡ºçš„åˆ†æ”¯ã€‚è¿™æ˜¯æœ‰æ„ä¹‰çš„ã€‚æ¨é€å°†æ›´æ–°è¿œç¨‹ç´¢å¼•å’Œå¤´éƒ¨ã€‚å¦‚æœæœ‰äººåœ¨è¿œç¨‹ç¼–è¾‘å·¥ä½œå‰¯æœ¬ï¼Œè¿™å°†å¯¼è‡´æ··æ·†ã€‚</p><p>æ­¤æ—¶ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œå°† commit <code>13</code> åˆå¹¶åˆ°å…¶ä¸­ï¼Œå¹¶å°†è¯¥åˆ†æ”¯æ¨ç»™ charlieã€‚ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œä»–ä»¬æƒ³è¦ä¸€ä¸ªå¯ä»¥éšæ—¶æ¨é€çš„å­˜å‚¨åº“ã€‚ä»–ä»¬æƒ³è¦ä¸€ä¸ªå¯ä»¥æ¨å…¥å’Œæ‹‰å‡ºçš„ä¸­å¤®å­˜å‚¨åº“ï¼Œä½†æ˜¯æ²¡æœ‰äººç›´æ¥æäº¤ã€‚ä»–ä»¬æƒ³è¦ä¸€ä¸ª GitHub é¥æ§å™¨ã€‚ä»–ä»¬æƒ³è¦ä¸€ä¸ªè£¸å­˜å‚¨åº“ã€‚</p><h3 id="å…‹éš†ä¸€ä¸ªè£¸ä»“åº“"><a href="#å…‹éš†ä¸€ä¸ªè£¸ä»“åº“" class="headerlink" title="å…‹éš†ä¸€ä¸ªè£¸ä»“åº“"></a>å…‹éš†ä¸€ä¸ªè£¸ä»“åº“</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  Git git clone alpha delta --bare</span><br><span class="line">Cloning into bare repository &#x27;delta&#x27;...</span><br><span class="line">done.</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…ç§»åŠ¨åˆ°ä¸Šè¿°çš„ç›®å½•ã€‚ä»–ä»¬å…‹éš† <code>delta</code> ä½œä¸ºä¸€ä¸ªè£¸ä»“åº“ã€‚è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„å…‹éš†ï¼Œæœ‰ä¸¤ä¸ªä¸åŒä¹‹å¤„ã€‚<code>config</code> æ–‡ä»¶æ ‡ç¤ºä»“åº“æ˜¯è£¸çš„ã€‚ç„¶åæ–‡ä»¶æ˜¯æ™®é€šçš„å­˜å‚¨åœ¨ <code>.git</code> ç›®å½•æ˜¯å­˜å‚¨åœ¨ä»“åº“çš„æ ¹ç›®å½•çš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">delta</span><br><span class="line">    â”œâ”€â”€ HEAD</span><br><span class="line">    â”œâ”€â”€ branches</span><br><span class="line">    â”œâ”€â”€ config</span><br><span class="line">    â”œâ”€â”€ description</span><br><span class="line">    â”œâ”€â”€ hooks</span><br><span class="line">    â”œâ”€â”€ info</span><br><span class="line">    â”œâ”€â”€ objects</span><br><span class="line">    â”œâ”€â”€ packed-refs</span><br><span class="line">    â””â”€â”€ refs</span><br></pre></td></tr></table></figure><img src="/2019/01/31/translate-git-from-the-inside-out/30-13-alpha-cloned-to-delta-bare.png" class=""><center><font size=2>`alpha` and `delta` graphs after `alpha` cloned to `delta`</font></center><h3 id="æ¨é€ä¸€ä¸ªåˆ†æ”¯åˆ°è£¸ä»“åº“"><a href="#æ¨é€ä¸€ä¸ªåˆ†æ”¯åˆ°è£¸ä»“åº“" class="headerlink" title="æ¨é€ä¸€ä¸ªåˆ†æ”¯åˆ°è£¸ä»“åº“"></a>æ¨é€ä¸€ä¸ªåˆ†æ”¯åˆ°è£¸ä»“åº“</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  Git cd alpha</span><br><span class="line">âœ  alpha git:(master) git remote add delta ../delta</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è€…å›åˆ° <code>alpha</code> ä»“åº“ã€‚ä»–ä»¬åœ¨ <code>alpha</code> ä¸Šè®¾ç½® <code>delta</code> ä½œä¸ºä¸€ä¸ªè¿œç¨‹ä»“åº“ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) printf &#x27;14&#x27; &gt; data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git add data/number.txt</span><br><span class="line">âœ  alpha git:(master) âœ— git commit -m &#x27;14&#x27;</span><br><span class="line">[master 4aeb92b] 14</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>å®ƒä»¬è®¾ç½® <code>data/number.txt</code> çš„å†…å®¹ä¸º <code>14</code> ç„¶å commit change åˆ° <code>alpha</code> ä¸Šçš„ <code>master</code>ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/31-14-alpha.png" class=""><center><font size=2>`14` commit on `alpha`</font></center><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  alpha git:(master) git push delta master</span><br><span class="line">Enumerating objects: 7, done.</span><br><span class="line">Counting objects: 100% (7/7), done.</span><br><span class="line">Writing objects: 100% (4/4), 282 bytes | 282.00 KiB/s, done.</span><br><span class="line">Total 4 (delta 0), reused 0 (delta 0)</span><br><span class="line">To ../delta</span><br><span class="line">   d5cd098..4aeb92b  master -&gt; master</span><br></pre></td></tr></table></figure><p>å®ƒä»¬æ¨é€ <code>master</code> åˆ° <code>delta</code>ã€‚æ¨é€æœ‰ä¸‰ä¸ªæ­¥éª¤ã€‚</p><p>ç¬¬ä¸€ï¼Œæ‰€æœ‰åœ¨ <code>master</code> åˆ†æ”¯ä¸Š commit <code>14</code> æ‰€å¿…éœ€çš„ objects è¢«ä» <code>alpha/.git/objects</code> æ‹·è´åˆ° <code>delta/objects/</code>ã€‚</p><p>ç¬¬äºŒï¼Œ<code>delta/refs/heads/master</code> æ›´æ–°æŒ‡å‘äº† commit <code>14</code>ã€‚</p><p>ç¬¬ä¸‰ï¼Œ<code>alpha/.git/refs/remotes/delta/master</code> è®¾ç½®å¹¶æŒ‡å‘ commit <code>14</code>ã€‚<code>alpha</code> æœ‰ <code>delta</code> çŠ¶æ€çš„æœ€æ–°è®°å½•ã€‚</p><img src="/2019/01/31/translate-git-from-the-inside-out/32-14-pushed-to-delta.png" class=""><center><font size=2>`14` commit pushed from `alpha` to `delta`</font></center><p>â€“ EOF â€“</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://maryrosecook.com/blog/post/git-from-the-inside-out">https://maryrosecook.com/blog/post/git-from-the-inside-out</a><br><a href="http://gitbook.liuhui998.com/8_2.html">http://gitbook.liuhui998.com/8_2.html</a></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šæ­¤æ–‡æ˜¯å¯¹ &lt;a href=&quot;https://maryrosecook.com/blog/post/git-from-the-inside-out&quot;&gt;Git from the inside out&lt;/a&gt; çš„ç¿»è¯‘ï¼Œä¸ªåˆ«åœ°æ–¹æ·»åŠ äº†è‡ªå·±çš„å®è·µç»“æœï¼Œä»…ä½œç†è§£å­¦ä¹ ä¹‹ç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« å°†è§£é‡Š Git æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ç›¸åŒçš„å†…å®¹ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ª &lt;a href=&quot;https://www.youtube.com/watch?v=fCtZWGhQBvo&quot;&gt;è§†é¢‘&lt;/a&gt; ä¸­çœ‹åˆ°ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Git" scheme="https://github.com/smilingmiao/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>éƒ¨åˆ†å¸¸è§ç®—æ³•çš„æ€è·¯</title>
    <link href="https://github.com/smilingmiao/2018/12/25/thought-of-algorithm/"/>
    <id>https://github.com/smilingmiao/2018/12/25/thought-of-algorithm/</id>
    <published>2018-12-24T16:00:00.000Z</published>
    <updated>2020-05-17T16:19:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h1><p>ç‰¹ç‚¹ï¼šç®€å•ç²—æš´ï¼Œä¸Šæ¥ç›´æ¥æ¯”ã€‚ä¸¤å±‚<code>for</code>å¾ªç¯åµŒå¥—ï¼Œå¤–å±‚å…±æ‰§è¡Œ<code>n</code>æ¬¡ï¼Œå†…å±‚éšå¤–å±‚æ‰§è¡Œçš„æ¬¡æ•°é€æ¸é€’å‡ï¼Œæ€»æ¬¡æ•°å°±æ˜¯<code>n</code>å¹³æ–¹æ•°é‡çº§ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)ã€‚</p><span id="more"></span><p>æ­¥éª¤ï¼š</p><ol><li>å–åˆ°å¤–å±‚å¾ªç¯å½“å‰çš„å…ƒç´  Ei &#x3D; array[i]</li><li>å†…å±‚ä» i+1 å¼€å§‹é€’å¢éå†æ‰€æœ‰å…ƒç´ ä¸ Ei æ¯”è¾ƒå¹¶äº¤æ¢</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">sort</span>(<span class="keyword">_</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>]) &#123;</span><br><span class="line">    <span class="keyword">var</span> temp <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span> <span class="operator">..&lt;</span> array.count &#123;</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> i <span class="operator">+</span> <span class="number">1</span> <span class="operator">..&lt;</span> array.count &#123;</span><br><span class="line">            <span class="keyword">if</span> array[i] <span class="operator">&gt;</span> array[j] &#123;</span><br><span class="line">                temp <span class="operator">=</span> array[i]</span><br><span class="line">                array[i] <span class="operator">=</span> array[j]</span><br><span class="line">                array[j] <span class="operator">=</span> temp</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h1><p>ç‰¹ç‚¹ï¼šä¹Ÿæ¯”è¾ƒç®€å•ç›´æ¥ï¼Œä¸¤å±‚<code>for</code>å¾ªç¯åµŒå¥—ï¼Œå†…å±‚éå†æ•°ç»„å†…å‰©ä½™å…ƒç´ å¹¶æ‰¾å‡ºæœ€å°çš„ï¼Œå¹¶è£…è¿›å¦å¤–ä¸€ä¸ªæ•°ç»„ä¸­ï¼ŒåŒæ—¶ä»åŸæ¥çš„æ•°ç»„ä¸­ç§»é™¤ã€‚æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ O(n2)ï¼Œç©ºé—´å¤æ‚åº¦ O(n)ã€‚</p><p>æ­¥éª¤ï¼š</p><ol><li>æ¯æ¬¡å–å¾—æœ€å°çš„å…ƒç´ ï¼Œè£…è¿›å¦å¤–ä¸€ä¸ªæ•°ç»„ï¼Œä»åŸæ¥çš„æ•°ç»„ç§»é™¤ï¼Œæœ€åå¦å¤–ä¸€ä¸ªæ•°ç»„æŒ‰ä¸‹æ ‡å–å°±æ˜¯æ’å¥½åºçš„ã€‚</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">selectionSort</span>(<span class="params">unsorted</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>]) &#123;</span><br><span class="line">        <span class="keyword">guard</span> array.count <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> sortedArray <span class="operator">=</span> [<span class="type">Int</span>]()</span><br><span class="line">        <span class="keyword">let</span> count <span class="operator">=</span> array.count</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span> <span class="operator">...</span> count <span class="operator">-</span> <span class="number">1</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> (index, min) <span class="operator">=</span> (<span class="number">0</span>, array[<span class="number">0</span>])</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">1</span> <span class="operator">...</span> count <span class="operator">-</span> i &#123;</span><br><span class="line">                <span class="keyword">if</span> array[j] <span class="operator">&gt;=</span> min &#123;</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                &#125;</span><br><span class="line">                (index, min) <span class="operator">=</span> (j, array[j])</span><br><span class="line">            &#125;</span><br><span class="line">            array.remove(at: index)</span><br><span class="line">            sortedArray.append(min)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        array <span class="operator">=</span> sortedArray</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h1><p>ç‰¹ç‚¹ï¼šéå†å–æ¯ä¸€ä¸ªå…ƒç´ å¹¶å’Œå‰ä¸€ä¸ªå…ƒç´ æ¯”è¾ƒï¼Œå¦‚æœéœ€è¦äº¤æ¢åˆ™æ‰§è¡Œäº¤æ¢ï¼Œå¹¶ä¸”é€’å½’è°ƒç”¨äº¤æ¢æ–¹æ³•æ£€æŸ¥å‰é¢çš„å…ƒç´ æ˜¯å¦éœ€è¦äº¤æ¢ã€‚æœ€åçš„æƒ…å†µæ˜¯ï¼Œä¸€ä¸ªé™åºçš„æ•°ç»„è¦æ’åˆ—å‡åºçš„ï¼Œè¿™æ—¶å€™æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(n2)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ã€‚</p><p>æ­¥éª¤ï¼š</p><ol><li>éå†æ¯æ¬¡å–å¾—å½“å‰å…ƒç´ å’Œå‰ä¸€ä¸ªæ¯”</li><li>éœ€è¦äº¤æ¢å°±äº¤æ¢ï¼Œå¹¶ä¸”é€’å½’éå†äº¤æ¢å‰é¢éœ€è¦äº¤æ¢çš„å…ƒç´ </li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">sort</span>(<span class="keyword">_</span> <span class="params">array</span>: [<span class="type">Int</span>]) -&gt; [<span class="type">Int</span>] &#123;</span><br><span class="line">        <span class="keyword">guard</span> array.count <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> array</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> previous <span class="operator">=</span> array[<span class="number">0</span>], array <span class="operator">=</span> array</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span> <span class="operator">..&lt;</span> array.count &#123;</span><br><span class="line">            <span class="keyword">if</span> array[i] <span class="operator">&lt;</span> previous &#123;</span><br><span class="line">                <span class="built_in">swap</span>(<span class="operator">&amp;</span>array, i <span class="operator">-</span> <span class="number">1</span>, i)</span><br><span class="line">            &#125;</span><br><span class="line">            previous <span class="operator">=</span> array[i]</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> array</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// [4, 3, 2, 1]</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">swap</span>(<span class="keyword">_</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">left</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">right</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> left <span class="operator">=</span> left, right <span class="operator">=</span> right, temp <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> left <span class="operator">&gt;=</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> array[left] <span class="operator">&gt;</span> array[right]  &#123;</span><br><span class="line">            temp <span class="operator">=</span> array[left]</span><br><span class="line">            array[left] <span class="operator">=</span> array[right]</span><br><span class="line">            array[right] <span class="operator">=</span> temp</span><br><span class="line">            left <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">            right <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h1><p>ç‰¹ç‚¹ï¼šåˆ†è€Œæ²»ä¹‹ã€‚é€‰å®šç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºåŸºå‡†å€¼ Pï¼Œå¤´æŒ‡é’ˆ L æŒ‡å‘ç¬¬äºŒä¸ªå…ƒç´ ï¼Œå°¾æŒ‡é’ˆ R æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ ï¼Œåªè¦ L &lt;&#x3D; R çš„æƒ…å†µä¸‹ï¼Œé€’å½’éå†æ‰¾å‡º L æŒ‡å‘å¤§äº P çš„å€¼ï¼ŒR æŒ‡å‘å°äº P çš„å€¼å¹¶è¿›è¡Œäº¤æ¢ï¼Œè¿™å°±æŠŠ P å½“æˆä¸€ä¸ªåˆ†æ°´å²­ï¼ŒP å·¦è¾¹çš„æ˜¯å°äº P çš„ï¼Œå³è¾¹çš„æ˜¯å¤§äº P çš„ï¼ˆå‡åºæƒ…å†µä¸‹ï¼‰ã€‚æœ€åå†æŠŠæ¯ä¸€éƒ¨åˆ†æ‹†æˆæ›´å°çš„ä¸¤éƒ¨åˆ†è¿›è¡Œå¤„ç†ã€‚</p><p>æ­¥éª¤ï¼š</p><ol><li>é€‰å®šåŸºå‡†å€¼ Pivot</li><li>åè¡ŒæŒ‡é’ˆå’Œå‰è¡ŒæŒ‡é’ˆåŒæ—¶ç§»åŠ¨</li><li>åˆ†åˆ«æ‰¾å‡ºå¤§äºåŸºå‡†å€¼çš„å’Œå°äºåŸºå‡†å€¼çš„å¹¶äº¤æ¢</li><li>å°†äº¤æ¢åŸºå‡†å€¼å·¦å³ä¸¤è¾¹çš„å…ƒç´ æ‹†åˆ†ä¸ºæ›´å°å­é—®é¢˜é€’å½’è§£å†³</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">quickSort</span>(<span class="keyword">_</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">low</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">high</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">guard</span> low <span class="operator">&lt;</span> high <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> pivot <span class="operator">=</span> array[low]</span><br><span class="line">        <span class="keyword">var</span> <span class="type">L</span> <span class="operator">=</span> low <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">var</span> <span class="type">R</span> <span class="operator">=</span> high</span><br><span class="line">        <span class="keyword">var</span> temp <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> <span class="type">L</span> <span class="operator">&lt;=</span> <span class="type">R</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> <span class="type">L</span> <span class="operator">&lt;=</span> high <span class="operator">&amp;&amp;</span> array[<span class="type">L</span>] <span class="operator">&lt;</span> pivot &#123;</span><br><span class="line">                <span class="type">L</span> <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> <span class="type">L</span> <span class="operator">&lt;=</span> <span class="type">R</span> <span class="operator">&amp;&amp;</span> array[<span class="type">R</span>] <span class="operator">&gt;=</span> pivot &#123;</span><br><span class="line">                <span class="type">R</span> <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> <span class="type">L</span> <span class="operator">&gt;</span> <span class="type">R</span> &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">            temp <span class="operator">=</span> array[<span class="type">L</span>]</span><br><span class="line">            array[<span class="type">L</span>] <span class="operator">=</span> array[<span class="type">R</span>]</span><br><span class="line">            array[<span class="type">R</span>] <span class="operator">=</span> temp</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/// æ‰§è¡Œåˆ°è¿™é‡Œæ—¶å› ä¸º L &gt; R äº†ï¼Œæ­¤æ—¶ R ä¸€å®šå°äº Pivot</span></span><br><span class="line">        temp <span class="operator">=</span> array[<span class="type">R</span>]</span><br><span class="line">        array[<span class="type">R</span>] <span class="operator">=</span> array[low]</span><br><span class="line">        array[low] <span class="operator">=</span> temp</span><br><span class="line">        </span><br><span class="line">        quickSort(<span class="operator">&amp;</span>array, low, <span class="type">R</span> <span class="operator">-</span> <span class="number">1</span>)</span><br><span class="line">        quickSort(<span class="operator">&amp;</span>array, <span class="type">R</span> <span class="operator">+</span> <span class="number">1</span>, high)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h1><p>ç‰¹ç‚¹ï¼šåˆ†è€Œæ²»ä¹‹ã€‚ä¸åœåœ°å°†ä¸€ç»„æ•°æ®åˆ†ä¸ºä¸¤ä»½æ•°æ®ï¼Œå†å°†ä¸¤ä»½æ•°æ®åˆ†ä¸ºå››ä»½ï¼Œå†åˆ†ä¸ºå…«ä»½â€¦ç›´åˆ°åˆ†ä¸ºä¸èƒ½å†åˆ†å¼€çš„æœ€å°å•ä½ï¼Œç„¶åå†é€†å‘åœ°ä¸æ–­å°†ä¸¤éƒ¨åˆ†æ’åºå¹¶åˆå¹¶ä½¿ä¹‹æœ‰åºï¼Œç›´åˆ°æ•´ä¸ªæ•°ç»„é‡Œçš„æ•°æ®éƒ½æˆä¸ºæœ‰åºçš„ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">mergeSort</span>(<span class="keyword">_</span> <span class="params">array</span>: [<span class="type">Int</span>]) -&gt; [<span class="type">Int</span>] &#123;</span><br><span class="line">        <span class="keyword">var</span> helper <span class="operator">=</span> <span class="type">Array</span>(repeating: <span class="number">0</span>, count: array.count), array <span class="operator">=</span> array</span><br><span class="line">        mergeSort(<span class="operator">&amp;</span>array, <span class="operator">&amp;</span>helper, <span class="number">0</span>, array.count <span class="operator">-</span> <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> array</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">mergeSort</span>(<span class="keyword">_</span> <span class="params">original</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">helper</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">low</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">high</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">guard</span> low <span class="operator">&lt;</span> high <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> mid <span class="operator">=</span> low <span class="operator">+</span> (high <span class="operator">-</span> low) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">        mergeSort(<span class="operator">&amp;</span>original, <span class="operator">&amp;</span>helper, low, mid)</span><br><span class="line">        mergeSort(<span class="operator">&amp;</span>original, <span class="operator">&amp;</span>helper, mid <span class="operator">+</span> <span class="number">1</span>, high)</span><br><span class="line">        merge(<span class="operator">&amp;</span>original, <span class="operator">&amp;</span>helper, low, mid, high)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">merge</span>(<span class="keyword">_</span> <span class="params">original</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">helper</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">low</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">mid</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">high</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> low <span class="operator">...</span> high &#123;</span><br><span class="line">            helper[i] <span class="operator">=</span> original[i]</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">var</span> helperLeft <span class="operator">=</span> low, helperRight <span class="operator">=</span> mid <span class="operator">+</span> <span class="number">1</span>, current <span class="operator">=</span> low</span><br><span class="line">        <span class="keyword">while</span> helperLeft <span class="operator">&lt;=</span> mid <span class="operator">&amp;&amp;</span> helperRight <span class="operator">&lt;=</span> high &#123;</span><br><span class="line">            <span class="keyword">if</span> helper[helperLeft] <span class="operator">&lt;</span> helper[helperRight] &#123;</span><br><span class="line">                original[current] <span class="operator">=</span> helper[helperLeft]</span><br><span class="line">                helperLeft <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                original[current] <span class="operator">=</span> helper[helperRight]</span><br><span class="line">                helperRight <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            current <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">guard</span> helperLeft <span class="operator">&lt;=</span> mid <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span> <span class="operator">...</span> mid <span class="operator">-</span> helperLeft &#123;</span><br><span class="line">            original[current <span class="operator">+</span> i] <span class="operator">=</span> helper[helperLeft <span class="operator">+</span> i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="æ¡¶æ’åº"><a href="#æ¡¶æ’åº" class="headerlink" title="æ¡¶æ’åº"></a>æ¡¶æ’åº</h1><p>ç‰¹ç‚¹ï¼šåˆ†è€Œæ²»ä¹‹ã€‚</p><p>æ­¥éª¤ï¼šæ‰¾åˆ°æœ€å°å€¼<code>min</code>å’Œæœ€å¤§å€¼<code>max</code>ï¼›ç¡®å®šæ¡¶çš„æ•°é‡ï¼›è®¡ç®—å‡ºæ­¥é•¿ï¼›éå†æ•°ç»„å¹¶è®¡ç®—å°†å…ƒç´ æ’å…¥åˆ°ä¸ç”¨åºå·çš„æ¡¶ä¸­ï¼›æ ¹æ®æ¡¶åºå·ä»å°åˆ°å¤§éå†å–å‡ºå…ƒç´ å¹¶è£…è¿›æ–°çš„æ•°ç»„ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">bucketSort</span>(<span class="keyword">_</span> <span class="params">array</span>: [<span class="type">Int</span>]) &#123;</span><br><span class="line">        <span class="keyword">guard</span> array.count <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> array <span class="operator">=</span> array, min <span class="operator">=</span> array[<span class="number">0</span>], max <span class="operator">=</span> array[<span class="number">0</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> array &#123;</span><br><span class="line">            <span class="keyword">if</span> element <span class="operator">&lt;</span> min &#123;</span><br><span class="line">                min <span class="operator">=</span> element</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> element <span class="operator">&gt;</span> max &#123;</span><br><span class="line">                max <span class="operator">=</span> element</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> max <span class="operator">==</span> min &#123; <span class="comment">// æœ€å¤§å€¼å’Œæœ€å°å€¼ä¸€æ ·ï¼Œè¯´æ˜æ•°ç»„ä¸­å…ƒç´ å€¼éƒ½ç›¸åŒï¼Œä¸éœ€è¦æ’åº</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è§„å®šéœ€è¦æ¡¶çš„æ•°é‡ä¸º 10</span></span><br><span class="line">        <span class="keyword">let</span> bucketSize <span class="operator">=</span> <span class="number">10</span></span><br><span class="line">        <span class="comment">// è®¡ç®—æ­¥é•¿ï¼Œå³æ¯ä¸ªæ¡¶é‡Œå®¹çº³çš„æ•°å€¼èŒƒå›´</span></span><br><span class="line">        <span class="keyword">let</span> stride <span class="operator">=</span> (max <span class="operator">-</span> min) <span class="operator">/</span> bucketSize <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªäºŒä½æ•°ç»„ï¼ŒåŒ…å« 10 ä¸ªç©ºæ¡¶</span></span><br><span class="line">        <span class="keyword">var</span> buckets: [[<span class="type">Int</span>]] <span class="operator">=</span> <span class="type">Array</span>(repeating: [], count: bucketSize)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> array &#123;</span><br><span class="line">            <span class="keyword">let</span> pos <span class="operator">=</span> element <span class="operator">/</span> stride</span><br><span class="line">            insert(<span class="operator">&amp;</span>buckets[pos], element)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        array.removeAll()</span><br><span class="line">        <span class="keyword">for</span> bucket <span class="keyword">in</span> buckets &#123;</span><br><span class="line">            <span class="keyword">if</span> bucket.isEmpty &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> num <span class="keyword">in</span> bucket &#123;</span><br><span class="line">                array.append(num)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(array)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">insert</span>(<span class="keyword">_</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">val</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        array.append(val)</span><br><span class="line">        <span class="keyword">if</span> array.count <span class="operator">==</span> <span class="number">1</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> (<span class="number">0</span> <span class="operator">..&lt;</span> array.count).reversed() &#123;</span><br><span class="line">            <span class="keyword">if</span> i <span class="operator">==</span> <span class="number">0</span> <span class="operator">||</span> array[i] <span class="operator">&gt;=</span> array[i <span class="operator">-</span> <span class="number">1</span>] &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> temp <span class="operator">=</span> array[i]</span><br><span class="line">                array[i] <span class="operator">=</span> array[i <span class="operator">-</span> <span class="number">1</span>]</span><br><span class="line">                array[i <span class="operator">-</span> <span class="number">1</span>] <span class="operator">=</span> temp</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="è®¡æ•°æ’åº"><a href="#è®¡æ•°æ’åº" class="headerlink" title="è®¡æ•°æ’åº"></a>è®¡æ•°æ’åº</h1><p>ç‰¹ç‚¹ï¼šåˆ†è€Œæ²»ä¹‹ã€‚ç§‰æ‰¿äº†æ¡¶æ’åºçš„ä¸€äº›æ€è·¯ã€‚</p><p>æ­¥éª¤ï¼šå–å‡ºæœ€å°<code>min</code>å’Œæœ€å¤§<code>max</code>å€¼ï¼›è®¡ç®—å‡ºæœ€å°æœ€å¤§çš„å·®å€¼å¹¶åŠ 1ï¼ˆä½œä¸ºå®¹çº³ä¸åŒå…ƒç´ çš„ä¸ªæ•°çš„æ•°ç»„å®¹é‡å€¼ï¼‰ï¼›æŠŠè£…å…ƒç´ çš„ä¸ªæ•°æŒ‰ç…§æ–æ³¢é‚£å¥‘æ•°åˆ—æ•°åˆ—çš„æ–¹å¼è®¡ç®—åæ”¾åˆ°æ•°ç»„ï¼›é€ä¸ªä»åŸæ•°ç»„ä¸­å–å‡ºå…ƒç´ æ”¾åˆ°æ–°æ•°ç»„ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">countingSort</span>(<span class="params">unsorted</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>]) &#123;</span><br><span class="line">        <span class="keyword">guard</span> array.count <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> (min, max) <span class="operator">=</span> (array[<span class="number">0</span>], array[<span class="number">0</span>])</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> e <span class="keyword">in</span> array &#123;</span><br><span class="line">            <span class="keyword">if</span> e <span class="operator">&lt;</span> min &#123;</span><br><span class="line">                min <span class="operator">=</span> e</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> e <span class="operator">&gt;</span> max &#123;</span><br><span class="line">                max <span class="operator">=</span> e</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> k <span class="operator">=</span> max <span class="operator">-</span> min <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">        <span class="comment">// counting array</span></span><br><span class="line">        <span class="keyword">var</span> c <span class="operator">=</span> <span class="type">Array</span>(repeating: <span class="number">0</span>, count: k)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span> <span class="operator">..&lt;</span> array.count &#123;</span><br><span class="line">            c[array[i] <span class="operator">-</span> min] <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span> <span class="operator">..&lt;</span> c.count &#123;</span><br><span class="line">            c[i] <span class="operator">=</span> c[i] <span class="operator">+</span> c[i <span class="operator">-</span> <span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> result <span class="operator">=</span> <span class="type">Array</span>(repeating: <span class="number">0</span>, count: array.count)</span><br><span class="line">        <span class="keyword">var</span> lastIndex: <span class="type">Int</span>?</span><br><span class="line">        <span class="keyword">var</span> currentIndex: <span class="type">Int</span>?</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> (<span class="number">0</span> <span class="operator">..&lt;</span> array.count).reversed() &#123;</span><br><span class="line">            currentIndex <span class="operator">=</span> c[array[i] <span class="operator">-</span> min] <span class="operator">-</span> <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> lastIndex <span class="operator">!=</span> <span class="literal">nil</span> <span class="operator">&amp;&amp;</span> lastIndex <span class="operator">==</span> currentIndex &#123;</span><br><span class="line">                result[currentIndex<span class="operator">!</span> <span class="operator">-</span> <span class="number">1</span>] <span class="operator">=</span> array[i]</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                result[currentIndex<span class="operator">!</span>] <span class="operator">=</span> array[i]</span><br><span class="line">            &#125;</span><br><span class="line">            lastIndex <span class="operator">=</span> currentIndex<span class="operator">!</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(result)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="åŸºæ•°æ’åº"><a href="#åŸºæ•°æ’åº" class="headerlink" title="åŸºæ•°æ’åº"></a>åŸºæ•°æ’åº</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">radixSort</span>(<span class="params">unsorted</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>]) &#123;</span><br><span class="line">        <span class="keyword">guard</span> array.count <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> length <span class="operator">=</span> maxLength(array)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¾…æ’åºæ•°ç»„ä¸­çš„å…ƒç´ å¦‚æœå…¨æ˜¯æ­£æ•´æ•°çš„æƒ…å†µåªéœ€è¦ 0åˆ°9 åä¸ªåŸºæ•°æ¡¶å°±è¡Œï¼Œ</span></span><br><span class="line">        <span class="comment">// ä½†ç°å®æƒ…å†µå¾€å¾€éœ€è¦è€ƒè™‘è¾¹ç•Œæƒ…å†µï¼Œä¹Ÿå°±æ˜¯åŒæ—¶å­˜åœ¨æ­£è´Ÿæ•°çš„æƒ…å†µï¼Œæ­¤æ—¶å°±</span></span><br><span class="line">        <span class="comment">// éœ€è¦é¢å¤–çš„ -9åˆ°-1 ä¹ä¸ªæ¡¶ï¼Œæ‰€ä»¥æ€»å…±éœ€è¦ 19 ä¸ªæ¡¶</span></span><br><span class="line">        <span class="keyword">let</span> count <span class="operator">=</span> <span class="number">19</span>, indexer <span class="operator">=</span> <span class="number">9</span></span><br><span class="line">        <span class="keyword">var</span> mode <span class="operator">=</span> <span class="number">10</span>, divisor <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">var</span> lastSorted <span class="operator">=</span> array</span><br><span class="line">        <span class="keyword">var</span> buckets <span class="operator">=</span> <span class="type">Array</span>(repeating: [], count: count)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> length <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> e <span class="keyword">in</span> lastSorted &#123;</span><br><span class="line">                <span class="comment">// +indexer æ˜¯ä¸ºäº†ä¿è¯ä¸‹æ ‡ä¸ä¸ºè´Ÿæ•°</span></span><br><span class="line">                buckets[e <span class="operator">%</span> mode <span class="operator">/</span> divisor <span class="operator">+</span> indexer].append(e)</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            lastSorted.removeAll()</span><br><span class="line">            <span class="keyword">for</span> bucket <span class="keyword">in</span> buckets &#123;</span><br><span class="line">                <span class="keyword">if</span> bucket.isEmpty &#123;</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> e <span class="keyword">in</span> bucket &#123;</span><br><span class="line">                    lastSorted.append(e <span class="keyword">as!</span> <span class="type">Int</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            mode <span class="operator">*=</span> <span class="number">10</span></span><br><span class="line">            divisor <span class="operator">*=</span> <span class="number">10</span></span><br><span class="line">            length <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">            buckets.removeAll()</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(lastSorted)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">maxLength</span>(<span class="keyword">_</span> <span class="params">array</span>: [<span class="type">Int</span>]) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="comment">// å–æœ€å¤§å€¼</span></span><br><span class="line">        <span class="keyword">var</span> max <span class="operator">=</span> array[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> e <span class="keyword">in</span> array &#123;</span><br><span class="line">            <span class="keyword">if</span> e <span class="operator">&gt;</span> max &#123;</span><br><span class="line">                max <span class="operator">=</span> e</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æœ€å¤§å€¼ä½æ•°</span></span><br><span class="line">        <span class="keyword">var</span> positiveMaxLength <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> max <span class="operator">!=</span> <span class="number">0</span> &#123;</span><br><span class="line">            positiveMaxLength <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            max <span class="operator">=</span> max <span class="operator">/</span> <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å–æœ€å°å€¼</span></span><br><span class="line">        <span class="keyword">var</span> min <span class="operator">=</span> array[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> e <span class="keyword">in</span> array &#123;</span><br><span class="line">            <span class="keyword">if</span> e <span class="operator">&lt;</span> min &#123;</span><br><span class="line">                min <span class="operator">=</span> e</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æœ€å°å€¼ä½æ•°</span></span><br><span class="line">        <span class="keyword">var</span> negativeMaxLength <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> min <span class="operator">!=</span> <span class="number">0</span> &#123;</span><br><span class="line">            negativeMaxLength <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            min <span class="operator">=</span> min <span class="operator">*</span> <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> positiveMaxLength <span class="operator">&gt;</span> negativeMaxLength <span class="operator">?</span> positiveMaxLength : negativeMaxLength</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">shellSort</span>(<span class="params">unsorted</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>]) &#123;</span><br><span class="line">        <span class="keyword">guard</span> array.count <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">var</span> gap <span class="operator">=</span> array.count <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> gap <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span> <span class="operator">..&lt;</span> array.count &#123;</span><br><span class="line">                <span class="keyword">if</span> i <span class="operator">+</span> gap <span class="operator">&gt;=</span> array.count &#123;</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> array[i] <span class="operator">&lt;</span> array[i <span class="operator">+</span> gap] &#123;</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="built_in">swap</span>(<span class="operator">&amp;</span>array, i, i <span class="operator">+</span> gap, gap)</span><br><span class="line">            &#125;</span><br><span class="line">            gap <span class="operator">/=</span> <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="built_in">print</span>(array)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">swap</span>(<span class="keyword">_</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">start</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">end</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">gap</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp <span class="operator">=</span> array[start]</span><br><span class="line">        array[start] <span class="operator">=</span> array[end]</span><br><span class="line">        array[end] <span class="operator">=</span> temp</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> gap <span class="operator">==</span> <span class="number">1</span> <span class="operator">&amp;&amp;</span> start <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> array[start <span class="operator">-</span> <span class="number">1</span>] <span class="operator">&gt;</span> array[start] &#123;</span><br><span class="line">                <span class="built_in">swap</span>(<span class="operator">&amp;</span>array, start <span class="operator">-</span> <span class="number">1</span>, start, gap)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">heapSort</span>(<span class="keyword">_</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>]) -&gt; [<span class="type">Int</span>] &#123;</span><br><span class="line">        <span class="keyword">guard</span> array.count <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> array</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> array <span class="operator">=</span> array</span><br><span class="line">        build_max_heap(<span class="operator">&amp;</span>array)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> (<span class="number">0</span> <span class="operator">...</span> array.count <span class="operator">-</span> <span class="number">1</span>).reversed() &#123;</span><br><span class="line">            <span class="built_in">swap</span>(<span class="operator">&amp;</span>array, <span class="number">0</span>, i)</span><br><span class="line">            heapify(<span class="operator">&amp;</span>array, <span class="number">0</span>, i)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> array</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// å»ºå¤§é¡¶å †</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">build_max_heap</span>(<span class="keyword">_</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>]) &#123;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> (<span class="number">0</span> <span class="operator">...</span> array.count <span class="operator">/</span> <span class="number">2</span> <span class="operator">-</span> <span class="number">1</span>).reversed() &#123;</span><br><span class="line">            heapify(<span class="operator">&amp;</span>array, i, array.count)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">heapify</span>(<span class="keyword">_</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">index</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">len</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> dad <span class="operator">=</span> index</span><br><span class="line">        <span class="keyword">var</span> son <span class="operator">=</span> index <span class="operator">*</span> <span class="number">2</span> <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> son <span class="operator">&lt;</span> len &#123;</span><br><span class="line">            <span class="keyword">if</span> son <span class="operator">+</span> <span class="number">1</span> <span class="operator">&lt;</span> len <span class="operator">&amp;&amp;</span> array[son <span class="operator">+</span> <span class="number">1</span>] <span class="operator">&gt;</span> array[son] &#123;</span><br><span class="line">                son <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> array[dad] <span class="operator">&gt;</span> array[son] &#123;</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">swap</span>(<span class="operator">&amp;</span>array, dad, son)</span><br><span class="line">                dad <span class="operator">=</span> son</span><br><span class="line">                son <span class="operator">=</span> dad <span class="operator">*</span> <span class="number">2</span> <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">swap</span>(<span class="keyword">_</span> <span class="params">array</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">a</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp <span class="operator">=</span> array[a]</span><br><span class="line">        array[a] <span class="operator">=</span> array[b]</span><br><span class="line">        array[b] <span class="operator">=</span> temp</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>â€“ EOF â€“</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://www.youtube.com/channel/UCaqGoweuUdGFGEJA3fl6slg">https://www.youtube.com/channel/UCaqGoweuUdGFGEJA3fl6slg</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å†’æ³¡æ’åº&quot;&gt;&lt;a href=&quot;#å†’æ³¡æ’åº&quot; class=&quot;headerlink&quot; title=&quot;å†’æ³¡æ’åº&quot;&gt;&lt;/a&gt;å†’æ³¡æ’åº&lt;/h1&gt;&lt;p&gt;ç‰¹ç‚¹ï¼šç®€å•ç²—æš´ï¼Œä¸Šæ¥ç›´æ¥æ¯”ã€‚ä¸¤å±‚&lt;code&gt;for&lt;/code&gt;å¾ªç¯åµŒå¥—ï¼Œå¤–å±‚å…±æ‰§è¡Œ&lt;code&gt;n&lt;/code&gt;æ¬¡ï¼Œå†…å±‚éšå¤–å±‚æ‰§è¡Œçš„æ¬¡æ•°é€æ¸é€’å‡ï¼Œæ€»æ¬¡æ•°å°±æ˜¯&lt;code&gt;n&lt;/code&gt;å¹³æ–¹æ•°é‡çº§ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="ç®—æ³•" scheme="https://github.com/smilingmiao/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºå“ˆå¸Œå‡½æ•°</title>
    <link href="https://github.com/smilingmiao/2018/12/21/about-hash/"/>
    <id>https://github.com/smilingmiao/2018/12/21/about-hash/</id>
    <published>2018-12-20T16:00:00.000Z</published>
    <updated>2020-05-17T16:19:33.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å“ˆå¸Œå‡½æ•°"><a href="#å“ˆå¸Œå‡½æ•°" class="headerlink" title="å“ˆå¸Œå‡½æ•°"></a>å“ˆå¸Œå‡½æ•°</h1><p><strong>å“ˆå¸Œå‡½æ•°</strong>ï¼ˆHash functionï¼‰åˆå«æ•£åˆ—ç®—æ³•ï¼Œå®ƒåœ¨å¹¿æ³›åº”ç”¨åœ¨è®¡ç®—æœºç¨‹åºä¸­ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦æŒæ¡çš„åŸºç¡€çŸ¥è¯†ã€‚å¯ä»¥æŠŠ<strong>å“ˆå¸Œå‡½æ•°</strong>çœ‹æˆæ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªè¾“å…¥ï¼Œç„¶åé€šè¿‡ç®—æ³•å¯¹è¾“å…¥è¿›è¡Œå¤„ç†åè¾“å‡ºä¸€ä¸ªç»“æœã€‚å…·ä½“ç®—æ³•æœ‰å¥½æœ‰åï¼Œä½†åˆè¡·éƒ½æ˜¯è¦å°†æ•°æ®å‹ç¼©æˆè¾ƒçŸ­çš„å›ºå®šé•¿åº¦çš„æ•°æ®æ‘˜è¦ï¼Œå¹¶ä¸”å¸Œæœ›ä»»ä½•ä¸åŒè¾“å…¥éƒ½æœ‰ä¸åŒçš„è¾“å‡ºã€‚</p><span id="more"></span><p>ç»´åŸºç™¾ç§‘æ˜¯è¿™æ ·è¯´çš„ï¼š</p><blockquote><p><strong>æ•£åˆ—å‡½æ•°</strong>ï¼ˆè‹±è¯­ï¼šHash functionï¼‰åˆç§°<strong>æ•£åˆ—ç®—æ³•</strong>ã€<strong>å“ˆå¸Œå‡½æ•°</strong>ï¼Œæ˜¯ä¸€ç§ä»ä»»ä½•ä¸€ç§æ•°æ®ä¸­åˆ›å»ºå°çš„æ•°å­—â€œæŒ‡çº¹â€çš„æ–¹æ³•ã€‚æ•£åˆ—å‡½æ•°æŠŠæ¶ˆæ¯æˆ–æ•°æ®å‹ç¼©æˆæ‘˜è¦ï¼Œä½¿å¾—æ•°æ®é‡å˜å°ï¼Œå°†æ•°æ®çš„æ ¼å¼å›ºå®šä¸‹æ¥ã€‚è¯¥<a href="https://zh.wikipedia.org/wiki/%E5%87%BD%E6%95%B0">å‡½æ•°</a>å°†æ•°æ®æ‰“ä¹±æ··åˆï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªå«åš<strong>æ•£åˆ—å€¼</strong>ï¼ˆhash valuesï¼Œhash codesï¼Œhash sumsï¼Œæˆ–hashesï¼‰çš„æŒ‡çº¹ã€‚æ•£åˆ—å€¼é€šå¸¸ç”¨ä¸€ä¸ªçŸ­çš„éšæœºå­—æ¯å’Œæ•°å­—ç»„æˆçš„å­—ç¬¦ä¸²æ¥ä»£è¡¨ã€‚å¥½çš„æ•£åˆ—å‡½æ•°åœ¨è¾“å…¥åŸŸä¸­å¾ˆå°‘å‡ºç°<a href="https://zh.wikipedia.org/w/index.php?title=%E6%95%A3%E5%88%97%E5%86%B2%E7%AA%81&action=edit&redlink=1">æ•£åˆ—å†²çª</a>ã€‚åœ¨<a href="https://zh.wikipedia.org/wiki/%E6%95%A3%E5%88%97%E8%A1%A8">æ•£åˆ—è¡¨</a>å’Œ<a href="https://zh.wikipedia.org/w/index.php?title=%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86&action=edit&redlink=1">æ•°æ®å¤„ç†</a>ä¸­ï¼Œä¸æŠ‘åˆ¶å†²çªæ¥åŒºåˆ«æ•°æ®ï¼Œä¼šä½¿å¾—<a href="https://zh.wikipedia.org/w/index.php?title=%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%B0%E5%BD%95&action=edit&redlink=1">æ•°æ®åº“è®°å½•</a>æ›´éš¾æ‰¾åˆ°ã€‚</p></blockquote><h1 id="å“ˆå¸Œè¡¨"><a href="#å“ˆå¸Œè¡¨" class="headerlink" title="å“ˆå¸Œè¡¨"></a>å“ˆå¸Œè¡¨</h1><p><strong>å“ˆå¸Œè¡¨</strong>ä¹Ÿå«<strong>æ•£åˆ—è¡¨</strong>ï¼Œæ˜¯æ ¹æ®é”®ï¼ˆKeyï¼‰è€Œç›´æ¥è®¿é—®åœ¨å†…å­˜å­˜å‚¨çš„æ•°æ®ç»“æ„ã€‚å®ƒé€šè¿‡ä¸€ä¸ªé”®å€¼çš„å‡½æ•°ï¼Œå°†æ‰€éœ€æŸ¥è¯¢çš„æ•°æ®æ˜ å°„åˆ°è¡¨ä¸­çš„ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œè¿™åŠ å¿«äº†æŸ¥æ‰¾é€Ÿåº¦ã€‚è¿™ä¸ªæ˜ å°„å‡½æ•°ç§°åšæ•£åˆ—å‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„æ•°ç»„ç§°åšæ•£åˆ—è¡¨ã€‚</p><p>å¾®ä¿¡é€šè®¯å½•æŒ‰ç…§å¾®ä¿¡åçš„é¦–å­—æ¯ä» <strong>A</strong> åˆ° <strong>Z</strong> åˆ’åˆ†æˆä¸åŒçš„ç»„ï¼Œå…¶å®ƒå­—ç¬¦åˆ™å…¨å½’åœ¨ <strong>#</strong> ç»„ã€‚è¿™æ ·å¼ ä¸‰ï¼ˆ<strong>z</strong>hangsanï¼‰å’Œæå››ï¼ˆ<strong>l</strong>isiï¼‰å°±åˆ†åˆ«è¢«æ˜ å°„äº† <strong>Z</strong> ç»„é‡Œå’Œ <strong>L</strong> ç»„é‡Œã€‚è¿™ç§å–å¾®ä¿¡åçš„é¦–å­—æ¯ä½œä¸º key è¿›è¡Œæ˜ å°„çš„æ–¹å¼å°±ç®—æ˜¯å“ˆå¸Œå‡½æ•°æ˜ å°„çš„ä¸€ä¸ªæ¨¡å‹ã€‚ä½†è¿™æ ·ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå¼ ä¸‰å’Œå¼ å››éƒ½ä¼šè¢«å– Z ä½œä¸º key è¿›è¡Œæ˜ å°„ï¼Œå¹¶ä¸”ä¼šè¢«æ˜ å°„åˆ°åŒä¸€ä¸ªåœ°æ–¹ï¼Œè¿™å°±æ˜¯å‘ç”Ÿäº†å“ˆå¸Œç¢°æ’ï¼ˆcollisionï¼‰ã€‚é˜²æ­¢å“ˆå¸Œç¢°æ’æœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯æ‰©å¤§å“ˆå¸Œçš„å–å€¼ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯å€¼åŸŸã€‚é€šå¸¸è§£å†³å“ˆå¸Œç¢°æ’çš„æ–¹æ³•æ˜¯ä½¿ç”¨å¼€æ”¾å®šå€æ³•å’Œå•ç‹¬é“¾è¡¨æ³•æˆ–æ˜¯å†æ•£åˆ—è¿›è¡Œå¤„ç†ã€‚</p><h1 id="iOS-ä¸­çš„å“ˆå¸Œå‡½æ•°"><a href="#iOS-ä¸­çš„å“ˆå¸Œå‡½æ•°" class="headerlink" title="iOS ä¸­çš„å“ˆå¸Œå‡½æ•°"></a>iOS ä¸­çš„å“ˆå¸Œå‡½æ•°</h1><p>NSSet å’Œä¸ä¹‹ç›¸ä¼¼çš„ NSHashTableï¼Œä»¥åŠ NSDictionary å’Œä¸ä¹‹ç›¸ä¼¼ NSMapTable éƒ½æœ‰å¯¹å“ˆå¸Œå‡½æ•°çš„ä½¿ç”¨ï¼Œå› è€Œä¸€èˆ¬æ¥è¯´å¯¹è¿™äº›é›†åˆè¿›è¡Œè¯»ã€å†™ã€æŸ¥å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚å› æ­¤è¿™äº›é›†åˆç±»éƒ½æœ‰ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ä¸èƒ½ä¿å­˜é‡å¤çš„å…ƒç´ ã€‚NSArray å’Œå…¶å¯¹åº”çš„ mutable ç‰ˆæœ¬è¿›è¡Œã€æ”¹ã€æŸ¥åŸè‰²å°±éœ€è¦æ•´ä½“éå†æ¥æ“ä½œï¼Œå› è€Œæ—¶é—´å¤æ‚åº¦ O(n)ã€‚</p><p>å®šä¹‰ä¸€ä¸ª Object ç±»ï¼Œæœ‰<code>name</code>å’Œ<code>gender</code>å±æ€§ï¼Œé‡å†™<code>hash</code>æ–¹æ³•ã€‚</p><p>ç®€å•æµ‹è¯•ä¸€ä¸‹ï¼šåœ¨<code>hash</code>æ–¹æ³•æ‰“ä¸Šæ–­ç‚¹ï¼Œè¿è¡Œé¡¹ç›®ï¼Œå¹¶æ²¡æœ‰è¯­å¥æµè¢«æ–­ä½ã€‚</p><img src="/2018/12/21/about-hash/code.png" class=""><p>ç‚¹å‡»ä¸€ä¸‹ click Action åå‡ºç°ä¸‹é¢å›¾çš„æƒ…å†µï¼Œè¯æ˜ NSSet ä¼šè°ƒç”¨<code>hash</code>ç®—æ³•ï¼Œè€Œ NSArray å¹¶ä¸ä¼šã€‚</p><img src="/2018/12/21/about-hash/hash_function.png" class=""><p>å†™æ–‡ç« å®åœ¨ä¸å®¹æ˜“ï¼ŒçœŸçš„ä½©æœåšæŒå†™åšå®¢çš„åšä¸»ã€‚çŸ¥é“å’Œè¡¨è¾¾å‡ºæ¥çœŸçš„å®Œå…¨æ˜¯ä¸¤ç äº‹å„¿ã€‚</p><p>â€“ EOF â€“</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://zh.wikipedia.org/wiki/%E6%95%A3%E5%88%97%E5%87%BD%E6%95%B8">https://zh.wikipedia.org/wiki/%E6%95%A3%E5%88%97%E5%87%BD%E6%95%B8</a></p><p><a href="https://zh.wikipedia.org/wiki/%E5%93%88%E5%B8%8C%E8%A1%A8">https://zh.wikipedia.org/wiki/%E5%93%88%E5%B8%8C%E8%A1%A8</a></p><p><a href="https://bestswifter.com/hashtable/">https://bestswifter.com/hashtable/</a></p><p><a href="http://www.ruanyifeng.com/blog/2018/09/hash-collision-and-birthday-attack.html">http://www.ruanyifeng.com/blog/2018/09/hash-collision-and-birthday-attack.html</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å“ˆå¸Œå‡½æ•°&quot;&gt;&lt;a href=&quot;#å“ˆå¸Œå‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;å“ˆå¸Œå‡½æ•°&quot;&gt;&lt;/a&gt;å“ˆå¸Œå‡½æ•°&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;å“ˆå¸Œå‡½æ•°&lt;/strong&gt;ï¼ˆHash functionï¼‰åˆå«æ•£åˆ—ç®—æ³•ï¼Œå®ƒåœ¨å¹¿æ³›åº”ç”¨åœ¨è®¡ç®—æœºç¨‹åºä¸­ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦æŒæ¡çš„åŸºç¡€çŸ¥è¯†ã€‚å¯ä»¥æŠŠ&lt;strong&gt;å“ˆå¸Œå‡½æ•°&lt;/strong&gt;çœ‹æˆæ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªè¾“å…¥ï¼Œç„¶åé€šè¿‡ç®—æ³•å¯¹è¾“å…¥è¿›è¡Œå¤„ç†åè¾“å‡ºä¸€ä¸ªç»“æœã€‚å…·ä½“ç®—æ³•æœ‰å¥½æœ‰åï¼Œä½†åˆè¡·éƒ½æ˜¯è¦å°†æ•°æ®å‹ç¼©æˆè¾ƒçŸ­çš„å›ºå®šé•¿åº¦çš„æ•°æ®æ‘˜è¦ï¼Œå¹¶ä¸”å¸Œæœ›ä»»ä½•ä¸åŒè¾“å…¥éƒ½æœ‰ä¸åŒçš„è¾“å‡ºã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="éšæ‰‹ç¬”è®°" scheme="https://github.com/smilingmiao/tags/%E9%9A%8F%E6%89%8B%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>MySQL</title>
    <link href="https://github.com/smilingmiao/2018/12/11/mysql-part-one/"/>
    <id>https://github.com/smilingmiao/2018/12/11/mysql-part-one/</id>
    <published>2018-12-10T16:00:00.000Z</published>
    <updated>2020-05-17T16:18:26.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¾ˆæ—©ä¹‹å‰çš„ç¬”è®°</p></blockquote><p>Mac è‡ªå¸¦çš„ç»ˆç«¯å°±å¯ä»¥ç›´æ¥æ‰§è¡Œ SQL è¯­å¥è¿›è¡Œæ•°æ®åº“ sqlite æ•°æ®åº“çš„åˆ›å»ºã€‚</p><span id="more"></span><p>1ã€æ£€æŸ¥ç¯å¢ƒã€‚åœ¨ Mac ç»ˆç«¯é‡Œè¾“å…¥ <code>sqlite3 --version</code> å¹¶å›è½¦æ¥æŸ¥çœ‹ä¸€ä¸‹ Mac æ˜¯å¦æœ‰ <code>sqlite</code> ç¯å¢ƒï¼Œå‡ºç°å¦‚å›¾çš„ç•Œé¢å°±è¯´æ˜æ˜¯æœ‰çš„ã€‚</p><img src="/2018/12/11/mysql-part-one/step01.png" class=""><p>2ã€å»ºæ•°æ®åº“ã€‚éšä¾¿åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ç›®å½•ä¸‹è¾“å…¥ <code>sqlite3 sqlite.db</code> å¹¶å›è½¦æ¥åˆ›å»ºä¸€ä¸ªåä¸º <code>sqlite</code> çš„æ•°æ®åº“ã€‚æ­¤æ—¶åœ¨æ–‡ä»¶å¤¹ä¸‹æ˜¯çœ‹ä¸åˆ°è¿™ä¸ªæ•°æ®åº“çš„ï¼Œå› ä¸ºè¿™ä¸ªæ•°æ®åº“æ˜¯ç©ºçš„ï¼Œå­˜åœ¨æ²¡æœ‰æ„ä¹‰ã€‚å¦‚æœæƒ³çŸ¥é“å…·ä½“çš„ä¸€äº› SQL è¯­å¥å¯ä»¥æ ¹æ®æç¤ºè¾“å…¥ <code>.help</code> å›è½¦æŸ¥çœ‹ã€‚</p><img src="/2018/12/11/mysql-part-one/step02.png" class=""><p>3ã€å»ºè¡¨ã€‚é¡ºç€ç¬¬ 2 æ­¥ç»§ç»­è¾“å…¥ <code>CREATE TABLE IF NOT EXISTS customs(id VARCHAR(20) PRIMARY KEY NOT NULL, name TEXT NOT NULL, age INT CHECK(age&gt;5), height FLOAT(3,2) DEFAULT 000.00);</code> è¿›è¡Œå»ºè¡¨ã€‚å¦‚æœä¸ç¡®å®š MySQL çš„ä¸€äº›æ•°æ®ç±»å‹ï¼Œå¯ä»¥åœ¨ <a href="http://www.w3school.com.cn/sql/sql_datatypes.asp">è¿™é‡Œ</a> æŸ¥çœ‹ã€‚</p><img src="/2018/12/11/mysql-part-one/step03.png" class=""><p>è‡³æ­¤ï¼Œä½ çš„è¡¨å·²ç»å»ºå¥½äº†ã€‚ç”±äºå»ºå¥½äº†è¡¨ï¼Œä¸Šé¢å»ºçš„æ•°æ®åº“è¿™æ—¶å€™ä¹Ÿæ˜¾ç¤ºå‡ºæ¥äº†ã€‚å¦‚æœæƒ³æŸ¥çœ‹è¿™ä¸ªè¡¨çš„ç»“æ„ï¼Œä½ å¯ä»¥ç”¨å¯è§†åŒ–å·¥å…· <a href="http://sqlitebrowser.org/">DB Browser for SQLite</a> æ¥æŸ¥çœ‹ã€‚</p><img src="/2018/12/11/mysql-part-one/step04.png" class=""><p>è¿™é‡Œæœ‰å¿…è¦è¯´ä¸€ä¸‹ï¼Œå¦‚æœä½ ä¸­é€”é€€å‡ºäº†ç»ˆç«¯ï¼Œæƒ³è¦ç»§ç»­å¯¹æ•°æ®åº“è¿›è¡Œ SQL è¯­å¥æ“ä½œï¼Œé‚£ä¹ˆä»åªéœ€è¦æ‰§è¡Œä¸€ä¸‹ <code>sqlite3 sqlite.db</code> å³å¯ã€‚<code>sqlite.db</code> å°±æ˜¯ä¹‹å‰æˆ‘ä»¬åˆ›å»ºå¥½çš„æ•°æ®åº“ã€‚</p><p><strong>æ’å…¥æ•°æ®ã€‚</strong>ï¼ˆå¢ï¼‰</p><p>è¾“å…¥ <code>INSERT INTO customs(id, name, age, height) VALUES(000001, Tom, 23, 178.88);</code> å›è½¦åå‘ç° <code>Error</code> äº†ã€‚</p><img src="/2018/12/11/mysql-part-one/step05.png" class=""><p>è¿™æ˜¯å› ä¸º <code>name</code> åˆ—æ˜¯ <code>TEXT</code> æ•°æ®ç±»å‹çš„ï¼Œæˆ‘ä»¬åœ¨æ’å…¥æ•°æ®å€¼æ—¶è¦åŠ ä¸Šå¼•å·æ‰è¡Œã€‚</p><img src="/2018/12/11/mysql-part-one/step06.png" class=""><p>æ‰§è¡ŒæˆåŠŸäº†ï¼Œè¿™æ—¶å€™ç”¨å¯è§†åŒ–å·¥å…·çœ‹ä¸€ä¸‹ï¼Œå‘ç°åˆšæ‰çš„æ•°æ®å·²ç»æ’å…¥äº†è¡¨ä¸­ã€‚è¿™é‡Œå½“ç„¶ä½ å¯ä»¥æ‰§è¡Œ SQL è¯­å¥æŸ¥è¯¢ã€‚</p><img src="/2018/12/11/mysql-part-one/step07.png" class=""><p>ä¸€æ¬¡æ’å…¥å¤šæ¡æ•°æ®ã€‚</p><img src="/2018/12/11/mysql-part-one/step08.png" class=""><p><strong>æŸ¥è¯¢æ•°æ®ã€‚</strong></p><p>é€šè¿‡ <code>.help</code> å‘½ä»¤ä¼šå‡ºç°å¾ˆå¤šçš„è¯­å¥ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ¥æ‰§è¡Œæ“ä½œã€‚</p><p>ä½¿ç”¨ SQL è¯­å¥æŸ¥è¯¢æ•°æ®ï¼Œé¦–å…ˆæˆ‘ä»¬è°ƒä¸€ä¸‹æ˜¾ç¤ºçš„ <code>mode</code>ï¼Œåˆ†åˆ«æœ‰ <code>.mode.line</code> å’Œ <code>.mode.column</code> ä»¥åŠ <code>.mode.list</code>ã€‚æŒ‰ä¸ªäººå–œå¥½çš„æ ¼å¼æ˜¾ç¤ºå³å¯ã€‚</p><p>å½“ç„¶äº†ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>.header on</code> æˆ–è€… <code>.header off</code> æ¥æ˜¾ç¤ºæˆ–è€…éšè—è¡¨ä¸­çš„åˆ—åã€‚</p><img src="/2018/12/11/mysql-part-one/step09.png" class=""><p>â€“ EOF â€“</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å¾ˆæ—©ä¹‹å‰çš„ç¬”è®°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Mac è‡ªå¸¦çš„ç»ˆç«¯å°±å¯ä»¥ç›´æ¥æ‰§è¡Œ SQL è¯­å¥è¿›è¡Œæ•°æ®åº“ sqlite æ•°æ®åº“çš„åˆ›å»ºã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="éšæ‰‹ç¬”è®°" scheme="https://github.com/smilingmiao/tags/%E9%9A%8F%E6%89%8B%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>æ“ä½œç³»ç»Ÿéƒ¨åˆ†åŸºç¡€çŸ¥è¯†</title>
    <link href="https://github.com/smilingmiao/2018/12/11/operating-system-basics/"/>
    <id>https://github.com/smilingmiao/2018/12/11/operating-system-basics/</id>
    <published>2018-12-10T16:00:00.000Z</published>
    <updated>2020-05-17T16:18:49.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¾ˆæ—©ä¹‹å‰çš„ç¬”è®°ï¼Œæ¯”è¾ƒé›¶æ•£çš„æ”¾åœ¨ç”µè„‘ä¸Šï¼Œä»Šå¤©å½’æ•´åˆ°ä¸€èµ·ã€‚ï¼ˆè²Œä¼¼ä¸­é—´ç”µè„‘æåè¿˜ä¸¢äº†ä¸€äº›ï¼Œåˆæ²¡å¤‡ä»½ï¼‰</p></blockquote><span id="more"></span><h4 id="å¹¶å‘ä¸å¹¶è¡Œ"><a href="#å¹¶å‘ä¸å¹¶è¡Œ" class="headerlink" title="å¹¶å‘ä¸å¹¶è¡Œ"></a>å¹¶å‘ä¸å¹¶è¡Œ</h4><p>Concurrent å¹¶å‘ï¼šåŒä¸€æ—¶é—´æ®µå†…æ‰§è¡Œå¤šæ¡æŒ‡ä»¤<br>Parallel å¹¶è¡Œï¼šåŒä¸€æ—¶åˆ»æ‰§è¡Œå¤šæ¡æŒ‡ä»¤</p><h4 id="è¯»å†™æ•°æ®"><a href="#è¯»å†™æ•°æ®" class="headerlink" title="è¯»å†™æ•°æ®"></a>è¯»å†™æ•°æ®</h4><p>è¯»å†™æ•°æ®æ“ä½œä¸æ˜¯ç”± CPU è´Ÿè´£ï¼Œè€Œæ˜¯ç”± CUP å‘ä¸€æ¡æŒ‡ä»¤ç»™ç£ç›˜æ§åˆ¶å™¨ï¼Œç­‰å¾…ç€ç”±æ§åˆ¶å™¨æ¥å®Œæˆï¼Œè¿™ç”¨åˆ°äº† CUP çš„ä¸­æ–­ã€‚å½“æ§åˆ¶å™¨å®Œæˆæ“ä½œåé€šçŸ¥ CUPï¼Œè®© CUP æ¥ç€è¿›è¡Œç›¸åº”æœªå®Œæˆçš„æ“ä½œã€‚æ§åˆ¶å™¨æœ‰ä¸€å—ç¼“å­˜åŒºï¼Œç”¨äºä¸´æ—¶å­˜æ”¾ä»ç£ç›˜è¯»å…¥çš„æ•°æ®ã€‚</p><h4 id="ä¸­æ–­æºå’Œä¸­æ–­"><a href="#ä¸­æ–­æºå’Œä¸­æ–­" class="headerlink" title="ä¸­æ–­æºå’Œä¸­æ–­"></a>ä¸­æ–­æºå’Œä¸­æ–­</h4><p>ä¸­æ–­æºï¼šå¼•èµ·ä¸­æ–­çš„äº‹ä»¶å«ä¸­æ–­æºã€‚</p><p>ä¸­æ–­ï¼šä¸­æ–­å‘ç”Ÿæ—¶ï¼Œä¿æŒä¸­æ–­çŠ¶æ€ï¼ˆå¤„ç†ç¨‹åºçš„å…¥å£åœ°å€ï¼‰çš„å€¼ï¼Œé€šè¿‡ä»»åŠ¡å®Œæˆæ—¶è¿”å›ä¸­æ–­é™é‡å€¼æ¥ç»§ç»­æ‰§è¡Œä»»åŠ¡ã€‚ä¸­æ–­åˆ†ä¸ºå¤šç§ä¼˜å…ˆçº§ï¼Œå¯ä»¥åµŒå¥—ã€‚</p><p>Trapï¼šè‡ªé™·ï¼Œæ˜¯ç¨‹åºçš„è‡ªæˆ‘ä¸­æ–­ï¼Œæ˜¯ä¸€ç§ä¸»åŠ¨å‘ç”Ÿçš„æƒ…å†µã€‚</p><p>ç³»ç»Ÿé€šè¿‡ pollingï¼Œå³ CUP è½®è¯¢çš„æ–¹å¼æ¥æŸ¥çœ‹ä¸­æ–­æºï¼Œè¿›è¡Œéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚ï¼ˆè¿™æ˜¯ä¸€ç§è€å¼çš„å¤„ç†æ–¹å¼ï¼‰</p><p>ç°åœ¨é€šå¸¸ä½¿ç”¨ä¿å­˜åœ¨ RAM é«˜åœ°å€ä¸Šçš„é™åˆ¶å˜é‡æ¥æ–¹ä¾¿åœ°è·å–åˆ°ä¸­æ–­å‘ç”Ÿçš„å…¥å£åœ°å€ã€‚</p><h4 id="RAM-Random-Access-Memory-amp-ROM-Read-Only-Memory-amp-DMA-Direct-Memory-Access"><a href="#RAM-Random-Access-Memory-amp-ROM-Read-Only-Memory-amp-DMA-Direct-Memory-Access" class="headerlink" title="RAM(Random Access Memory) &amp; ROM(Read Only Memory) &amp; DMA(Direct Memory Access)"></a>RAM(Random Access Memory) &amp; ROM(Read Only Memory) &amp; DMA(Direct Memory Access)</h4><p>RAMï¼Œæ–­ç”µå³ä¸¢å¤±æ•°æ®<br>SRAMï¼šé™æ€ RAM<br>DRAMï¼šåŠ¨æ€ RAM</p><p>ROMï¼šä¸€æ¬¡å†™å…¥ï¼Œåå¤è¯»å–ã€‚åˆ†ä¸ºä¸€æ¬¡æ€§å›ºè¯ï¼Œå…‰æ“¦é™¤ï¼Œç”µæ“¦é™¤ã€‚</p><p>DMAï¼šç›´æ¥è®¿é—®å†…å­˜ï¼ŒåŒ…æ‹¬ç£ç›˜ã€Uç›˜ã€ç¡¬ç›˜ç­‰éƒ½æ˜¯è¿™æ ·çš„å¤„ç†æ–¹å¼ã€‚</p><blockquote><p>é€Ÿåº¦ï¼ˆç”±é«˜åˆ°ä½ï¼‰</p></blockquote><p>Disk - Memory - Cache - Register</p><h4 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h4><p>æ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªå…¨æ—¶è¿è¡Œçš„ç¨‹åºï¼Œç®¡ç†æ§åˆ¶ç³»ç»Ÿèµ„æºï¼Œåˆç†ç»„ç»‡è®¡ç®—æœºå·¥ä½œæµç¨‹ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨è®¡ç®—æœºç¨‹åºé›†åˆã€‚</p><p><strong>åˆ†æ—¶ç³»ç»Ÿå’Œå®æ—¶ç³»ç»Ÿ</strong></p><p>åˆ†æ—¶ç³»ç»Ÿï¼šé€šç”¨ç³»ç»Ÿ<br>äº¤äº’æ€§ï¼šå¤šé“<br>åŠæ—¶æ€§ï¼šç‹¬å æ€§</p><p>å®æ—¶æ“ä½œç³»ç»Ÿï¼šä¸“ç”¨ç³»ç»Ÿ<br>æ—¶é—´è¦æ±‚éå¸¸ä¸¥æ ¼ï¼Œåˆ†ä¸ºç¡¬å®æ—¶å’Œè½¯å®æ—¶<br>äº¤äº’æ€§ï¼šå¤šé“<br>åŠæ—¶æ€§ï¼šç‹¬å æ€§</p><p>å«ç”Ÿå‘å°„ç­‰å¯¹æ—¶é—´ç²¾ç¡®è¦æ±‚ä¸¥æ ¼çš„ä»»åŠ¡ä½¿ç”¨å®æ—¶ç³»ç»Ÿï¼Œä¸€èˆ¬æ¥è¯´ä½¿ç”¨åŒå·¥ï¼Œå³ä¸¤å°ä¸€æ¨¡ä¸€æ ·çš„è®¡ç®—æœºåŒæ—¶å·¥ä½œï¼ŒåŒä¸€æ—¶é—´æ‰§è¡Œç›¸åŒçš„æŒ‡ä»¤ï¼Œç›¸å½“äºå¤‡ä»½ã€‚</p><p><strong>åŒæ¨¡å¼</strong><br>1.ç”¨æˆ·æ¨¡å¼&#x2F;ç”¨æˆ·æ€  2.kernelæ¨¡å¼&#x2F;ç®¡ç†æ€</p><p><strong>æŒ‡ä»¤</strong><br>1.ç‰¹æƒæŒ‡ä»¤  2.éç‰¹æƒæŒ‡ä»¤</p><p><strong>PCB</strong><br>PCBï¼ˆProcess Control Blockï¼‰åŒ…æ‹¬äº† Base Address å’Œ Address Length</p><h4 id="æ“ä½œç³»ç»ŸæœåŠ¡"><a href="#æ“ä½œç³»ç»ŸæœåŠ¡" class="headerlink" title="æ“ä½œç³»ç»ŸæœåŠ¡"></a>æ“ä½œç³»ç»ŸæœåŠ¡</h4><ul><li>ç”¨æˆ·æ¥å£ <ul><li>Command Line Interface (<strong>CLI</strong>)</li><li>Graphics User Interface (<strong>GUI</strong>) </li><li>Batch ï¼ˆæ‰¹å¤„ç†ï¼‰</li></ul></li><li>Program execution</li><li>I&#x2F;O operations</li><li>File-system manipulation</li><li>Communications</li><li>Error detection</li></ul><p><strong>ç³»ç»Ÿè°ƒç”¨ï¼ˆsystem callï¼‰</strong></p><p>æ‰€æœ‰åº“å‡½æ•°éƒ½æ˜¯ç”±ç³»ç»Ÿè°ƒç”¨çš„</p><ul><li>fork</li><li>exec</li></ul><h4 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h4><p>ç¨‹åºæ˜¯æŒ‡ä»¤çš„é›†åˆï¼Œè¿›ç¨‹ &#x3D; ç¨‹åº + æ•°æ® + PCB</p><p>è¿›ç¨‹ï¼šæ˜¯å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºï¼Œå…³äºæŸä¸ªæ•°æ®é›†åˆçš„ä¸€æ¬¡è¿è¡Œè¿‡ç¨‹ã€‚</p><table><thead><tr><th align="center">åŒºåˆ«</th><th align="center">è¿›ç¨‹</th><th align="center">ç¨‹åº</th></tr></thead><tbody><tr><td align="center">ç›¸åŒç‚¹</td><td align="center">Ready waiting  Running</td><td align="center">Ready waiting  Running</td></tr><tr><td align="center">ä¸åŒç‚¹</td><td align="center">åŠ¨æ€ã€ç”Ÿå‘½å‘¨æœŸã€è¿›ç¨‹&#x3D;ç¨‹åº+æ•°æ®+PCBã€ä¸€ä¸ªè¿›ç¨‹å¯åŒ…å«å¤šä¸ªç¨‹åº</td><td align="center">é™æ€ã€æ°¸ä¹…å­˜åœ¨ã€ä¸€ä¸ªç¨‹åºå¯ä»¥å¯¹åº”å¤šä¸ªè¿›ç¨‹</td></tr></tbody></table><ul><li>ä¸‰ä¸ªåŸºæœ¬çŠ¶æ€<ul><li>Running æ­£åœ¨è¿è¡Œçš„çŠ¶æ€</li><li>Waiting ç­‰å¾…äº‹ä»¶å‘ç”Ÿ</li><li>Ready å‡†å¤‡å°±ç»ªçš„çŠ¶æ€</li></ul></li><li>PCB ( process control block ) æ˜¯ä¸€ä¸ªç¨‹åºæ§åˆ¶å—ï¼Œå®ƒæœ‰ç»“æ„ä¸»å­˜åŒºï¼ŒåŒ…å«è¿›ç¨‹æ‰§è¡Œæ‰€æœ‰ä¿¡æ¯ï¼Œç³»ç»Ÿé€šè¿‡ PCB æ„ŸçŸ¥è¿›ç¨‹ï¼Œæ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚å®ƒéšè¿›ç¨‹çš„åˆ›å»ºè€Œå‘ç”Ÿï¼Œéšè¿›ç¨‹çš„æ¶ˆäº¡è€Œæ¶ˆäº¡ã€‚PCB å¯ä»¥ä¿å­˜ä¸­æ–­ç­‰ä¸€ç³»åˆ—çŠ¶æ€ä¿¡æ¯ã€‚è¿›ç¨‹è¿è¡Œæ—¶å€™è¿›å…¥ç³»ç»Ÿé‡Œé¢ï¼Œåˆ›å»ºç›¸åº”çš„ PCBï¼ŒPCB åœ¨ç³»ç»Ÿçš„é˜Ÿåˆ—é‡Œæ’é˜Ÿï¼Œå—ç³»ç»Ÿè°ƒåº¦æ§åˆ¶ç¨‹åºã€‚</li></ul><h4 id="è¿›ç¨‹çš„çŠ¶æ€"><a href="#è¿›ç¨‹çš„çŠ¶æ€" class="headerlink" title="è¿›ç¨‹çš„çŠ¶æ€"></a>è¿›ç¨‹çš„çŠ¶æ€</h4><ul><li>new åˆ›å»º</li><li>ready å°±ç»ªç­‰å¾…ï¼Œé™¤ CUP å¤–ä¸€åˆ‡èµ„æºéƒ½åˆ†é…å®Œæˆ</li><li>waiting è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œæ— æ³•æ‰§è¡Œäº‹æƒ…</li><li>running è·å¾— CPU å¹¶ä¸”è¿è¡Œ</li><li>terminate ç»ˆæ­¢</li></ul><blockquote><p><strong>ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºå¦å¤–ä¸€ä¸ªè¿›ç¨‹ï¼Œåˆ†é…èµ„æºï¼ˆåˆ†é…å†…å­˜ï¼Œåˆ›å»º PCBï¼‰ç„¶åæ”¾åˆ°å°±ç»ªé˜Ÿåˆ—ã€‚</strong></p></blockquote><h4 id="æ’¤é”€è¿›ç¨‹"><a href="#æ’¤é”€è¿›ç¨‹" class="headerlink" title="æ’¤é”€è¿›ç¨‹"></a>æ’¤é”€è¿›ç¨‹</h4><ul><li>å›æ”¶ PCB</li><li>å›æ”¶èµ„æºï¼Œä¾‹å¦‚ï¼šå†…å­˜ã€è¾“å…¥è¾“å‡º</li></ul><h4 id="ç¼–è¯‘ã€é“¾æ¥ã€è£…è½½"><a href="#ç¼–è¯‘ã€é“¾æ¥ã€è£…è½½" class="headerlink" title="ç¼–è¯‘ã€é“¾æ¥ã€è£…è½½"></a>ç¼–è¯‘ã€é“¾æ¥ã€è£…è½½</h4><ul><li>ç¼–è¯‘å™¨å°†æºä»£ç ç¼–è¯‘æˆæ±‡ç¼–ä»£ç ï¼Œæ±‡ç¼–å™¨å°†æ±‡ç¼–ä»£ç è½¬æ¢æˆå¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé“¾æ¥å™¨å°†å¯æ‰§è¡Œæ–‡ä»¶é“¾æ¥æˆå•ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œè£…è½½å™¨å†å°†å¯æ‰§è¡Œç¨‹åºåŠ è½½åˆ°å†…å­˜å¹¶å‡†å¤‡æ‰§è¡Œã€‚å†…å­˜ä¸­çš„ç¨‹åºå°†ä¼šè·å¾—æ“ä½œç³»ç»Ÿçš„è°ƒç”¨è¿è¡Œã€‚</li><li>åœ¨æ±‡ç¼–å™¨å°†æ±‡ç¼–ä»£ç è½¬æ¢æˆå¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œä¼šå°†æºä»£ç ä¸­çš„ç¬¦å·åœ°å€ç»‘å®šä¸ºå¯é‡å®šä½çš„åœ°å€ï¼Œåœ¨é“¾æ¥çš„è¿‡ç¨‹ä¸­ï¼Œå°†å¯é‡å®šä½çš„åœ°å€æ˜ å°„ä¸ºç»å¯¹åœ°å€ã€‚</li></ul><p>â€“ EOF â€“</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å¾ˆæ—©ä¹‹å‰çš„ç¬”è®°ï¼Œæ¯”è¾ƒé›¶æ•£çš„æ”¾åœ¨ç”µè„‘ä¸Šï¼Œä»Šå¤©å½’æ•´åˆ°ä¸€èµ·ã€‚ï¼ˆè²Œä¼¼ä¸­é—´ç”µè„‘æåè¿˜ä¸¢äº†ä¸€äº›ï¼Œåˆæ²¡å¤‡ä»½ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="éšæ‰‹ç¬”è®°" scheme="https://github.com/smilingmiao/tags/%E9%9A%8F%E6%89%8B%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹</title>
    <link href="https://github.com/smilingmiao/2018/12/11/three-way-handshake/"/>
    <id>https://github.com/smilingmiao/2018/12/11/three-way-handshake/</id>
    <published>2018-12-10T16:00:00.000Z</published>
    <updated>2020-05-17T16:19:13.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="TCP-Header"><a href="#TCP-Header" class="headerlink" title="TCP Header"></a>TCP Header</h2><img src="/2018/12/11/three-way-handshake/tcp-header.png" class=""><p>ä¸Šå›¾æ˜¯ä¸€ä¸ª TCP header æ¥è‡ª <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol">wikipedia</a> </p><span id="more"></span><ul><li><p>Source port (16 bits)</p><p>æ ‡è¯†å‘é€æ–¹ç«¯å£å·</p></li><li><p>Destination port (16 bits)</p><p>æ ‡è¯†ç›®çš„åœ°ç«¯å£å·</p></li><li><p>Sequence number (32 bits)</p><p>å…·æœ‰åŒé‡ä½œç”¨ï¼š</p><ul><li>å¦‚æœ SYN ä½ç½®ä¸ºäº† 1ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯åˆå§‹åºåˆ—å·ã€‚å®é™…çš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„åºå·å’Œç›¸åº” ACK ä¸­ç¡®è®¤çš„åºå·å°±æ˜¯è¿™ä¸ªåºå·åŠ  1ã€‚</li><li>å¦‚æœ SYN ä½ç½®ä¸ºäº† 0ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯å½“å‰ä¼šè¯ä¸­è¯¥åŒ…çš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„ç´¯åŠ åºåˆ—å·ã€‚</li></ul></li><li><p>Acknowledgment number (32 bits)</p><p>å¦‚æœ ACK ä½ç½®ä¸ºäº† 1ï¼Œé‚£ä¹ˆè¯¥å­—æ®µçš„å€¼å°±æ˜¯å‘é€æ–¹æœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªåºåˆ—å·ã€‚è¿™è¡¨ç¤ºç¡®è®¤æ”¶åˆ°äº†å…ˆå‰æ‰€æœ‰çš„å­—èŠ‚ã€‚ä¸¤ç«¯å„å‘é€çš„ç¬¬ä¸€ä¸ª ACK æ ‡å¿—(1) ç¡®è®¤æ”¶åˆ°äº†å¯¹æ–¹çš„åˆå§‹åºå·ï¼Œä½†æ˜¯æ­¤æ—¶è¿˜æ²¡æœ‰å®é™…çš„æ•°æ®ã€‚</p></li><li><p>Data offset (4 bits)</p><p>æŒ‡å®š TCP header çš„å¤§å°ä¸º 32 ä½ï¼ˆ4 å­—èŠ‚ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸º wordï¼Œ<a href="ftp://ftp.gnu.org/old-gnu/Manuals/gdb/html_chapter/gdb_9.html">è¿™é‡Œ</a>æœ‰è§£é‡Šï¼‰ã€‚æœ€å°çš„ header æ˜¯ 5 words ï¼ˆå³ 20 å­—èŠ‚ï¼‰ï¼Œæœ€å¤§çš„æ˜¯ 15 wordsï¼ˆå³ 60 å­—èŠ‚ï¼‰ã€‚å…¶å®è¿™é‡Œçš„æœ€å¤§å’Œæœ€å°çš„å·®åˆ«é‡Œå¡«å……çš„éƒ½æ˜¯ optionsï¼ˆå¦‚å›¾æ‰€ç¤ºï¼‰ã€‚è¿™ä¸ªå­—æ®µåŒæ—¶ä»£è¡¨ TCP åŒ…èµ·å§‹ä½ç½®åˆ°å®é™…æ•°æ®çš„åç§»é‡ã€‚</p></li><li><p>Reserved (3 bits)</p><p>ä¿ç•™ä½ï¼Œé¢„é˜²ä»¥åç”¨å¾—åˆ°ã€‚é»˜è®¤éƒ½åº”è¯¥è®¾ç½®ä¸ºé›¶ã€‚</p></li></ul><p>å†æ¥ä¸€å¼ å›¾ï¼Œä¸€å›¾èƒœåƒæ–‡ã€‚è¿™å¼ å›¾æ˜¯ç”¨ keynote ç…§ç€ TCP&#x2F;IPè¯¦è§£ï¼ˆè‹±æ–‡ç‰ˆ â€¢ ç¬¬2ç‰ˆï¼‰ç¬¬ 596 é¡µå›¾ç”»çš„ã€‚æœ¬ç¯‡çŸ­æ–‡å°±å›´ç»•è¿™å¼ å›¾å±•å¼€è®¨è®ºã€‚</p><img src="/2018/12/11/three-way-handshake/three-way-handshake-and-four-way-waving-goodbey.png" class=""><h2 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œç¬¼ç»Ÿåœ°è¯´ï¼Œç½‘ç»œä¸­ä¼ è¾“æ•°æ®å°±æ˜¯è£…åŒ…å’Œæ‹†åŒ…çš„è¿‡ç¨‹ã€‚æ•´ä½“è€Œè¨€ï¼Œä»ä¸Šåˆ°ä¸‹ï¼ŒTCP&#x2F;IP äº”å±‚åè®®ï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚ã€‚è€Œä¸€ä¸ªæ•°æ®åŒ…ä»åº”ç”¨å±‚ (HTTP) å‡ºå‘ï¼Œé€”ç»ä¸‹é¢ä¸‰å±‚ï¼Œåœ¨ç»è¿‡æ¯ä¸€å±‚æ—¶åŠ ä¸Šè¿™å±‚çš„ Protocol Header å˜æˆåŒ…ã€‚æœ€åï¼Œåœ¨ç‰©ç†å±‚å°†æ•°å­—ä¿¡å·è½¬åŒ–æˆå…‰ä¿¡å·ã€‚åˆ°äº†å¦ä¸€ç«¯å°±æ˜¯ä»ä¸‹åˆ°ä¸Šæ‹†åŒ…ã€‚ä¹Ÿå°±æ˜¯è¿™æ ·ï¼š</p><img src="/2018/12/11/three-way-handshake/segment-process.png" class=""><p>å¦‚å›¾ <strong>Active Opener</strong>ï¼ˆä¸»åŠ¨è¿æ¥è€…ï¼‰ä»£è¡¨ <strong>Client</strong> ç«¯ï¼Œ<strong>Passive Opener</strong>ï¼ˆè¢«åŠ¨è¿æ¥è€…ï¼‰ä»£è¡¨ <strong>Server</strong> ç«¯ã€‚ä¸‹æ–‡ç®€å†™ä¸º C å’Œ Sã€‚å¿½ç•¥éå¿…è¦çš„ options å…·ä½“æ¡æ‰‹è¿‡ç¨‹è§£é‡Šå¦‚ä¸‹ï¼š</p><ol><li>C å‘ S å‘é€ä¸€ä¸ª SYNï¼ˆå³ SYN ä½ç½®ä¸ºäº† 1ï¼‰åŒ…ï¼Œè¡¨ç¤ºæ˜¯ä¸€ä¸ªè¯·æ±‚å»ºç«‹è¿æ¥çš„åŒ…ã€‚è€Œ Seq &#x3D; ISN(c) è¡¨ç¤ºå‘é€äº†åˆå§‹çš„ Sequence Numberã€‚</li><li>S æ”¶åˆ° C å‘æ¥çš„ SYN åŒ…ï¼Œæ‹†åŒ…åå‘ç° SYN ä½æ˜¯ 1ï¼Œå› æ­¤çŸ¥é“è¿™æ˜¯ C è¯·æ±‚å»ºç«‹è¿æ¥åŒ…ã€‚ä¸ºäº†è¡¨ç¤ºç¡®è®¤æ”¶åˆ°äº† C å‘æ¥çš„åŒ…ï¼ŒS ä¼šç»™ C å‘é€ä¸€ä¸ª SYN+ACKï¼ˆSYN å’Œ ACK ä½éƒ½ç½®ä¸º 1ï¼‰åŒ…ï¼Œè¿™ä¸ªåŒ…çš„ä½œç”¨æ—¢è¡¨æ˜æ”¶åˆ°äº† C çš„åŒ…ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åŒ…å«äº†è‡ªå·±çš„åˆå§‹ Sequence Numberï¼ˆSeq &#x3D; ISN(s)ã€‚ACK &#x3D; ISN(c) + 1ï¼Œå³ C å‘æ¥çš„ SYN åŒ…é‡Œé¢çš„ Sequence Number å€¼åŠ  1ã€‚è¿™ä¸ª ACK å€¼æ°å¥½æ˜¯ C æœŸæœ›æ”¶åˆ°çš„å‘é€ä¸‹ä¸ªåŒ…èƒ½ä½¿ç”¨çš„ Sequence Numberã€‚è‡³æ­¤ï¼ŒC å’Œ S è¯·æ±‚å»ºç«‹è¿æ¥çš„ç¬¬ä¸€ä¸ªåŒ…éƒ½å‘å®Œäº†ã€‚C å‘å‡ºäº†ä¸€ä¸ªåŒ…å¹¶æ”¶åˆ°äº†ä¸€ä¸ªç¡®è®¤åŒ…ï¼Œä½† S å´æ— æ³•å¾—çŸ¥è‡ªå·±å‘å‡ºçš„åŒ…æ˜¯å¦ä¸¢å¤±ã€‚</li><li>C å†å‘ S å‘é€ä¸€ä¸ª ACK åŒ…ï¼ŒSeq &#x3D; ISN(c) + 1ï¼ŒACK &#x3D; ISN(s) + 1ã€‚è¿™é‡Œçš„ Seq &#x3D; ISN(c) + 1 æ­£æ˜¯åˆšåˆš S å‘è¿‡æ¥çš„åŒ…é‡Œçš„ ACK å€¼ï¼Œè€Œ ACK &#x3D; ISN(s) + 1 åˆ™æ˜¯åˆšåˆš S å‘è¿‡æ¥çš„åŒ…é‡Œçš„ Sequence Numberï¼ˆ ISN(s) ï¼‰åŠ  1ï¼Œè¿™æ­£æ˜¯ S æœŸæœ›æ”¶åˆ°çš„ç¡®è®¤ã€‚</li></ol><blockquote><p>ç»ˆäºï¼Œä¸‰æ¬¡æ¡æ‰‹å®Œæˆäº†ï¼Œè¿™æ—¶å°±æ­£å¼å»ºç«‹äº†è¿æ¥ï¼Œå¯ä»¥è¿›è¡ŒçœŸæ­£çš„æ•°æ®ä¼ è¾“äº†ã€‚</p></blockquote><h2 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h2><p>æ•°æ®ä¼ è¾“å®Œæˆäº†ï¼Œå°±æŒ¥æ‰‹å†è§ã€‚</p><ol><li>C å‘ S å‘ä¸€ä¸ª FIN+ACK åŒ…ï¼ŒFIN ä½ç½®ä¸º 1ï¼Œè¡¨ç¤ºå‘é€çš„æ˜¯æœ€åä¸€ä¸ªåŒ…ã€‚Seq &#x3D; Kï¼ŒACK &#x3D; Lã€‚</li><li>S æ”¶åˆ° C å‘æ¥çš„ FIN+ACK åŒ…ï¼Œæ‹†åŒ…åå‘ç° FIN ä½ä¸º 1ï¼ŒçŸ¥é“æ˜¯ C è¯·æ±‚å…³é—­è¿æ¥ã€‚è¿™æ—¶ S ä¼šé¦–å…ˆå‘ C å‘é€ä¸€ä¸ª ACK åŒ…ã€‚C æ”¶åˆ°è¿™ä¸ª <font color="dd0000">ACK</font> åŒ…æ—¶ä¼šæ„è¯†åˆ° S å·²ç»æ‰§è¡Œäº†å…³é—­è¿æ¥ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ­¤æ—¶åº”ç”¨ç¨‹åºä¼šåˆå§‹åŒ–å…³é—­æ“ä½œï¼Œéšæ—¶å‡†å¤‡å…³é—­è¿æ¥ã€‚ï¼ˆå°±ç›¸å½“äºåªæ˜¯ new äº†ä¸€ä¸ªå…³é—­æ“ä½œçš„å®ä½“ï¼Œå…·ä½“å…³é—­åŠ¨ä½œè¿˜è¦ç­‰è°ƒç”¨å…·ä½“å®ç°ï¼‰</li><li>ç´§æ¥ç€<strong>è¢«åŠ¨</strong>è¿æ¥çš„ S ç«¯å˜ä¸º<strong>ä¸»åŠ¨</strong>è¿æ¥å‘ C å‘ä¸€ä¸ª FIN+ACK åŒ…ï¼Œè¿™ä¸ªåŒ…å’Œ <font color="dd0000">ACK</font> åŒ…å”¯ä¸€åŒºåˆ«åªæ˜¯å°† FIN ä½ç½®ä¸ºäº† 1ã€‚ï¼ˆå’Œè¯·æ±‚å»ºç«‹è¿æ¥ä¸€æ ·ï¼ŒC å‘ S è¯·æ±‚å…³é—­è¿æ¥éœ€è¦å¾—åˆ°ç¡®è®¤ï¼ŒåŒæ · S ä¹Ÿè¦å‘ C å‘å‡ºå…³é—­è¿æ¥è¯·æ±‚å¹¶å¾—åˆ°ç¡®è®¤ã€‚ï¼‰</li><li>C æ”¶åˆ° S å‘å‡ºæ¥çš„ FIN åŒ…åï¼Œéšåå‘å‡º ACK åŒ…ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ¬¡è¿æ¥çš„æœ€åä¸€ä¸ªåŒ…ã€‚å¦‚æœ S å‘å‡ºçš„ FIN åŒ…åœ¨ä¸€å®šæ—¶é—´å†…æœªæ”¶åˆ°ç¡®è®¤åŒ…å°±ä¼šè®¤ä¸ºä¸¢å¤±ï¼Œå°†ä¼šç»§ç»­é‡ä¼ ï¼Œç›´åˆ°æ”¶åˆ°ä¸ºæ­¢ï¼ˆå½“ç„¶è¿™é‡Œä¹Ÿè‚¯å®šæœ‰æœ€å¤§æ—¶é—´é™åˆ¶ï¼Œå¦åˆ™ä¼šé€ æˆå¾ˆå¤§çš„æµªè´¹ï¼‰ã€‚å¦‚æœ C åœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°<strong>é‡ä¼ </strong>çš„ FIN åŒ…ï¼Œåˆ™æ‰§è¡Œæ–­å¼€è¿æ¥ã€‚</li></ol><blockquote><p>æŒ¥æ‰‹å®Œäº†ï¼Œä¸Šé¢æœ‰äº›åœ°æ–¹æ˜¯æˆ‘ä¸ªäººçš„ç†è§£ï¼Œå¦‚æœæœ‰é”™çš„è¯å¸Œæœ›å¤§å®¶æŒ‡å‡ºï¼ˆå¦‚æœè¿™ç¯‡çŸ­æ–‡æœ‰å¹¸è¢«æ‚¨çœ‹åˆ°çš„è¯ï¼‰ã€‚</p></blockquote><h3 id="æ¸©ä¹ ä¸€ä¸‹å…³é”®ç¼©å†™"><a href="#æ¸©ä¹ ä¸€ä¸‹å…³é”®ç¼©å†™" class="headerlink" title="æ¸©ä¹ ä¸€ä¸‹å…³é”®ç¼©å†™"></a>æ¸©ä¹ ä¸€ä¸‹å…³é”®ç¼©å†™</h3><p>SYN â€” Synchronize sequence numbers.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Synchronize sequence numbers. Only the first packet sent from each end should have this flag set. Some other flags and fields change meaning based on this flag, and some are only valid when it is set, and others when it is clear.</span><br></pre></td></tr></table></figure><p>ACK â€” Acknowledgement.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">indicates that the Acknowledgment field is significant. All packets after the initial SYN packet sent by the client should have this flag set.</span><br></pre></td></tr></table></figure><p>FIN â€” Final connection.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Last packet from sender.</span><br></pre></td></tr></table></figure><p>Seq â€” Sequence numbers.</p><p>ISN(c) â€” Initial Sequence Numbers( Client End ).</p><p>ISN(s) â€” initial Sequence Numbers( Server End ).</p><p>â€“ EOF â€“</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol">https://en.wikipedia.org/wiki/Transmission_Control_Protocol</a></p><p><a href="ftp://ftp.gnu.org/old-gnu/Manuals/gdb/html_chapter/gdb_9.html">ftp://ftp.gnu.org/old-gnu/Manuals/gdb/html_chapter/gdb_9.html</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;TCP-Header&quot;&gt;&lt;a href=&quot;#TCP-Header&quot; class=&quot;headerlink&quot; title=&quot;TCP Header&quot;&gt;&lt;/a&gt;TCP Header&lt;/h2&gt;&lt;img src=&quot;/2018/12/11/three-way-handshake/tcp-header.png&quot; class=&quot;&quot;&gt;

&lt;p&gt;ä¸Šå›¾æ˜¯ä¸€ä¸ª TCP header æ¥è‡ª &lt;a href=&quot;https://en.wikipedia.org/wiki/Transmission_Control_Protocol&quot;&gt;wikipedia&lt;/a&gt; &lt;/p&gt;</summary>
    
    
    
    
    <category term="éšæ‰‹ç¬”è®°" scheme="https://github.com/smilingmiao/tags/%E9%9A%8F%E6%89%8B%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>è®°ä¸€æ¬¡ CocoaPods å®‰è£…</title>
    <link href="https://github.com/smilingmiao/2018/11/14/ji-yi-ci-cocoapods-an-zhuang/"/>
    <id>https://github.com/smilingmiao/2018/11/14/ji-yi-ci-cocoapods-an-zhuang/</id>
    <published>2018-11-13T16:00:00.000Z</published>
    <updated>2020-05-17T16:14:48.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯-CocoaPods-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-CocoaPods-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ CocoaPods ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ CocoaPods ï¼Ÿ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CocoaPods is a dependency manager for Swift and Objective-C Cocoa projects. It has over 54 thousand libraries and is used in over 3 million apps. CocoaPods can help you scale your projects elegantly.</span><br></pre></td></tr></table></figure><p>CocoaPods æ˜¯ Swift å’Œ Objective-C é¡¹ç›®çš„ä¸€ä¸ªä¾èµ–ç®¡ç†å·¥å…·ã€‚å®ƒæœ‰è¶…è¿‡ 54000 ä¸ªåº“ï¼Œå·²ç»è¢«åº”ç”¨äºè¶…è¿‡ä¸‰ç™¾ä¸‡ä¸ª appã€‚CocoaPods èƒ½å¸®åŠ©ä½ ä¼˜é›…åœ°æ‰©å±•ä½ çš„é¡¹ç›®ã€‚</p><span id="more"></span><p><a href="https://www.youtube.com/watch?v=iEAjvNRdZa0&spfreload=10">è¿™é‡Œ</a> æœ‰ä¸ªè§†é¢‘å¯ä»¥å¸®åŠ©ä½ æ›´å¥½çš„ç†è§£å’Œä½¿ç”¨ <a href="https://cocoapods.org/">CocoaPods</a></p><h3 id="æ›¿æ¢-ruby-æº"><a href="#æ›¿æ¢-ruby-æº" class="headerlink" title="æ›¿æ¢ ruby æº"></a>æ›¿æ¢ ruby æº</h3><p>å› ä¸ºåœ¨å›½å†…ï¼Œæ‰€ä»¥ç”¨<a href="https://gems.ruby-china.com/">å›½å†…çš„æº</a></p><p>åœ¨ç»ˆç«¯è¾“å…¥ <code>gem sources -l</code> çœ‹ä¸€ä¸‹ï¼Œå¦‚æœæ˜¾ç¤ºä¸€ç‰‡ç©ºç™½ï¼Œé‚£å°±è¾“å…¥ä¸‹é¢çš„å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem sources --add https://gems.ruby-china.com/</span><br></pre></td></tr></table></figure><p>æˆ–è€…å¦‚æœæ˜¾ç¤ºçš„æ˜¯<code>https://rubygems.org/</code> é‚£å°±è¾“å…¥ä¸‹é¢çš„å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/</span><br></pre></td></tr></table></figure><p><strong>è¿™ä¸ªæ—¶å€™ä½ åœ¨ç»ˆç«¯è¾“å…¥<code>gem sources -l</code> ä¸€å®šæ˜¯æ˜¾ç¤ºçš„<code>https://gems.ruby-china.com/</code> äº†</strong></p><h3 id="å®‰è£…-CocoaPods"><a href="#å®‰è£…-CocoaPods" class="headerlink" title="å®‰è£… CocoaPods"></a>å®‰è£… CocoaPods</h3><p>å½“ä½ åœ¨ç»ˆç«¯è¾“å…¥<code>gem install cocoapods</code> å›è½¦çš„æ—¶å€™ï¼Œæ˜¾ç¤ºçš„ä¸€å®šæ˜¯æŠ¥é”™ä¿¡æ¯ã€‚ä½ å¯èƒ½çœ‹åˆ°æ˜¯æƒé™ä¸è¶³ï¼Œäºæ˜¯ä½ åœ¨ç½‘ä¸Šæœåˆ°äº†è¦åŠ ä¸Š<code>sudo</code>ï¼Œç„¶åè¾“å…¥<code>sudo gem install cocoapods</code> æ—¶å€™å‘ç°è¿˜æ˜¯æŠ¥é”™ï¼Œä¿¡æ¯è¿˜æ˜¯æƒé™ä¸è¶³ã€‚è¿™ä¸ªæ—¶å€™ä¸¤ä¸ªåŠæ³•ï¼š</p><p>1 å…³é—­ç³»ç»Ÿçš„ SIP è§£å†³ã€‚ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤ï¼ˆSIPï¼ŒSystem Integrity Protectionï¼‰ ï¼Œä½ å¯ä»¥è‡ªå·±æ‰‹åŠ¨å¼€å¯å’Œå…³é—­ã€‚</p><p>å…·ä½“æ­¥éª¤ï¼š</p><ul><li><p>âŒ˜ + R è¿›å…¥æ¢å¤æ¨¡å¼ï¼Œæ‰“å¼€ç»ˆç«¯è¾“å…¥ <code>sudo csrutil disable</code> å…³é—­ SIPã€‚</p></li><li><p>âŒ˜ + R è¿›å…¥æ¢å¤æ¨¡å¼ï¼Œæ‰“å¼€ç»ˆç«¯è¾“å…¥ <code>sudo csrutil enable</code> å¼€å¯ SIPã€‚</p></li></ul><p>2 ä¸ç»™ RubyGems ç‰¹æƒ <a href="https://guides.cocoapods.org/using/getting-started.html#getting-started">Sudo-less installation</a></p><p>If you do <em>not</em> want to grant RubyGems admin privileges for this process, you can tell RubyGems to install into your user directory by passing either the <code>--user-install</code> flag to <code>gem install</code> or by configuring the RubyGems environment. The latter is in our opinion the best solution. To do this, create or edit the <code>.profile</code> file in your home directory and add or amend it to include these lines:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export GEM_HOME=$HOME/.gem</span><br><span class="line">export PATH=$GEM_HOME/bin:$PATH</span><br></pre></td></tr></table></figure><p>Note that if you choose to use the <code>--user-install</code> option, you will still have to configure your <code>.profile</code> file to set the <code>PATH</code> or use the command prepended by the full path. You can find out where a gem is installed with <code>gem which cocoapods</code>. E.g.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ gem install cocoapods --user-install</span><br><span class="line">$ gem which cocoapods</span><br><span class="line">/Users/eloy/.gem/ruby/2.0.0/gems/cocoapods-0.29.0/lib/cocoapods.rb</span><br><span class="line">$ /Users/eloy/.gem/ruby/2.0.0/bin/pod install</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å½’çº³ä¸€ä¸‹æ­¥éª¤å°±æ˜¯ï¼š</p><ul><li><p>åœ¨ç»ˆç«¯è¾“å…¥<code>sudo gem install cocoapods --user-install</code></p></li><li><p>ğŸ‰åœ¨ tom ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>.profile</code> çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ <code>cocoapods.profile</code>ã€‚ç›´æ¥æ‰“å¼€ç»ˆç«¯è¾“å…¥ <code>touch cocoapods.profile</code> å³å¯ã€‚</p></li><li><p>åœ¨ <code>cocoapods.profile</code> æ–‡ä»¶ä¸­å¡«å…¥ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export GEM_HOME=$HOME/.gem</span><br><span class="line">export PATH=$GEM_HOME/bin:$PATH</span><br></pre></td></tr></table></figure></li><li><p>ç»ˆç«¯è¾“å…¥ <code>gem which cocoapods</code> å‘½ä»¤åä¼šå‡ºç° CocoaPods çš„ç›®å½•ä½ç½®ï¼Œæ¯”å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/tom/.gem/ruby/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods.rb</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ä½ åªéœ€è¦ç”¨ç‰ˆæœ¬å·ä¹‹å‰çš„è·¯å¾„ <code>/Users/tom/.gem/ruby/2.3.0</code> æŠŠæ–‡ä»¶ <code>cocoapods.profile</code> ä¸­ç¬¬ä¸€è¡Œçš„ $HOME&#x2F;.gem æ›¿æ¢æ‰å³å¯ã€‚æ¯”å¦‚æ›¿æ¢åä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export GEM_HOME=/Users/tom/.gem/ruby/2.3.0</span><br><span class="line">export PATH=$GEM_HOME/bin:$PATH</span><br></pre></td></tr></table></figure></li></ul><p>ä¹Ÿå¯çœ‹<a href="https://github.com/rubygems/rubygems/issues/1310">è¿™é‡Œ</a> çš„è®¨è®º</p><p>ç»ˆäºå¯ä»¥æ‰§è¡Œä¸€ä¸‹ pod setup äº†ï¼Œä¸è¿‡ä½ éœ€è¦åˆ°è¿™ä¸ªç›®å½• bin ä¸‹æ‰§è¡Œ</p><img src="/2018/11/14/ji-yi-ci-cocoapods-an-zhuang/cocoapods-installation.png" class=""><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/tom/.gem/ruby/2.3.0/bin/pod setup</span><br></pre></td></tr></table></figure><p>ä»¥åæ“ä½œ update æˆ–è€… install ç­‰ç­‰éƒ½éœ€è¦ <code>/Users/tom/.gem/ruby/2.3.0/bin/pod</code> åæ¥å…·ä½“å‘½ä»¤å‚æ•°ã€‚è™½ç„¶è¿™æ ·æŒºéº»çƒ¦çš„ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å–œæ¬¢è¿™ç§ï¼Œæ”¹æˆå…¨å±€çš„æœªå…æ˜¯ä»€ä¹ˆå¥½äº‹ï¼Œè¿™æ ·å…¶å®èƒ½åŠ æ·±ä¸€äº›ç†è§£ã€‚</p><p>æ›´æ–°ï¼š</p><p>ç”¨äº†å‡ å¤©è¿˜æ˜¯è§‰å¾—æ¯æ¬¡æ‰§è¡Œ<code>pod</code>å‘½ä»¤å‡ºç°<code>zsh: command not found: pod</code>ç„¶åå†æ‰§è¡Œ<code>/Users/tom/.gem/ruby/2.3.0/bin/pod + å‘½ä»¤</code>å¾ˆéº»çƒ¦ã€‚èŠ±äºŒååˆ†é’Ÿè§£å†³äº†ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚åŸå› æ˜¯ï¼šå½“å‰å‘½ä»¤çš„<a href="https://baike.baidu.com/item/%E8%BD%AF%E9%93%BE%E6%8E%A5">è½¯é“¾æ¥</a>ï¼ˆä¾‹å¦‚ Windows æ¡Œé¢çš„å¿«æ·æ–¹å¼ï¼‰å·²ç»åˆ›å»ºï¼Œä½†æ˜¯è½¯é“¾æ¥æ‰€åœ¨çš„<code>*/bin</code>è·¯å¾„è¿˜æ²¡æœ‰è¢« exportã€‚æ¯”å¦‚<code>/Users/tom/.gem/ruby/2.3.0/bin/</code>è¿˜æ²¡è¢« exportã€‚ä¸€å¥è¯æè¿°ï¼šè¿˜æ²¡æœ‰é…ç½®ç¯å¢ƒå˜é‡ã€‚</p><ul><li><p>è§£å†³é—®é¢˜æ­¥éª¤ï¼š</p><ul><li>åœ¨ç»ˆç«¯è¾“å…¥<code>gem which cocoapods</code></li></ul><img src="/2018/11/14/ji-yi-ci-cocoapods-an-zhuang/gem-which-cocoapods.png" class=""><ul><li>æ‰§è¡Œ<code>ln -s /Users/smilingmiao/.gem/ruby/2.3.0/bin/pod /usr/local/bin</code></li><li>å†æ‰§è¡Œ<code>source ~/.zshrc</code></li></ul></li></ul><p>ğŸ“</p><p>æ›´æ›´æ–°ï¼š</p><p>ä¸Šé¢çš„ ğŸ‰ â†’ ğŸ“éƒ½å¿½ç•¥</p><p>åªè¦åœ¨<code>.zshrc</code>æ–‡ä»¶ä¸­åŠ å…¥ä¸€è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=&quot;$PATH:/Users/smilingmiao/.gem/ruby/2.6.0/bin&quot;</span><br></pre></td></tr></table></figure><p>â€“ EOF â€“</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://www.jianshu.com/p/bba968ca3957">https://www.jianshu.com/p/bba968ca3957</a></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯-CocoaPods-ï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-CocoaPods-ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ CocoaPods ï¼Ÿ&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ CocoaPods ï¼Ÿ&lt;/h3&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CocoaPods is a dependency manager for Swift and Objective-C Cocoa projects. It has over 54 thousand libraries and is used in over 3 million apps. CocoaPods can help you scale your projects elegantly.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;CocoaPods æ˜¯ Swift å’Œ Objective-C é¡¹ç›®çš„ä¸€ä¸ªä¾èµ–ç®¡ç†å·¥å…·ã€‚å®ƒæœ‰è¶…è¿‡ 54000 ä¸ªåº“ï¼Œå·²ç»è¢«åº”ç”¨äºè¶…è¿‡ä¸‰ç™¾ä¸‡ä¸ª appã€‚CocoaPods èƒ½å¸®åŠ©ä½ ä¼˜é›…åœ°æ‰©å±•ä½ çš„é¡¹ç›®ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="CocoaPods" scheme="https://github.com/smilingmiao/tags/CocoaPods/"/>
    
  </entry>
  
</feed>
